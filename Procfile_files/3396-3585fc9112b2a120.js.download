try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="e8db320f-7d41-4f30-a820-d2e226bfa359",e._sentryDebugIdIdentifier="sentry-dbid-e8db320f-7d41-4f30-a820-d2e226bfa359")}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3396],{3424:(e,t,a)=>{async function s(e){let t,a="CaptureController"in window?new CaptureController:null;null==a||a.setFocusBehavior("no-focus-change");try{t=await navigator.mediaDevices.getDisplayMedia({video:!0,controller:a})}catch(e){if(e instanceof DOMException&&"NotAllowedError"===e.name)return null;throw e}let s=document.createElement("video");s.srcObject=t,await new Promise((e,t)=>{s.onloadedmetadata=()=>{s.play().then(e,t)}});let n=document.createElement("canvas");if(e){let t=Math.min(e.width/Math.min(s.videoWidth,e.width),e.height/Math.min(s.videoHeight,e.height));n.width=s.videoWidth*t,n.height=s.videoHeight*t}else n.width=s.videoWidth,n.height=s.videoHeight;let l=n.getContext("2d");if(!l)throw Error("Could not create 2D context");l.drawImage(s,0,0,n.width,n.height);let i=n.toDataURL("image/png");return t.getTracks().forEach(e=>e.stop()),{imageDataUrl:i}}a.d(t,{U_:()=>b,pi:()=>_,$V:()=>w,Cn:()=>v});var n=a(74813),l=a(45054),i=a(11930),r=a(2e3),o=a(69287),d=a(10369),c=a(86141),u=a(79052),m=a(36016),p=a(42605),h=a(88775),f=a(4114),x=a(11717),g=a(88801),y=a(49629);let v=e=>{let{setMcpDirectoryModalIsOpen:t,setStyleModalOpenWithScreen:a,setCreateProjectModalIsOpen:s,setGithubModalIsOpen:n,setGmailAuthModalIsOpen:l,setCreatePromptArgumentModalIsOpen:r}=e,o=M(),d=_(),c=w(),{openFeaturePreviewModal:p}=(0,x.go)(),{checkIsGithubAuthenticated:h,initGithubAuth:f}=(0,m.nB)(),{initDriveAuth:g}=(0,u.cI)();return{onAddScreenshot:()=>{o()},openGithubModal:()=>{h().then(e=>{if(!e)return void f();n(!0)})},openGmailAuthModal:()=>{l(!0)},openMcpDirectoryModal:()=>{t(!0)},initDriveAuth:g,createDriveSyncSource:j(),onStyleChange:e=>{d(e)},openStyleModal:()=>{a(i.I.LIST)},onSelectProject:c,onCreateProject:e=>{s({isOpen:!0,moveAttachments:e})},openFeaturePreviewModal:p,onEnterPromptArguments:(e,t)=>{r({isOpen:!0,serverUuid:e,prompt:t})}}},j=()=>{let{addError:e}=(0,l.Y)(),{setIsUploadingDriveSync:t,setSyncSourceUuids:a}=(0,p.o)(),{mutate:s}=(0,c.EF)({onMutate:()=>{t(!0)},onSuccess:e=>{t(!1),a(t=>[...t,e.uuid])},onError:a=>{t(!1),e((0,y.J)(a),{error:a})},meta:{noToast:!0}});return e=>s({sync_source_type:r.v8.GDRIVE,sync_source_config:{uri:e}})},b=e=>{var t;null==(t=document.getElementById("chat-input-file-upload-".concat(e)))||t.click()},w=()=>{let e=(0,h.QN)(),{setProjectUuid:t}=(0,p.o)();return a=>{e===a?t(void 0):t(a)}},M=()=>{let{addError:e}=(0,l.Y)(),t=(0,d.A)(),{handleUpload:a}=(0,p.o)(),i=(0,n.st)();return async()=>{i.track({event_key:"claudeai.plus_menu.screenshot_clicked"});let n=null;try{n=await s({width:1568,height:1568})}catch(a){(0,o.Cp)(a),e(t.formatMessage({defaultMessage:"Could not capture screen",id:"GT8HkzCHoM"}),{error:a})}if(!n)return;let l=new File([await fetch(n.imageDataUrl).then(e=>e.blob())],"screenshot.png",{type:"image/png"});await a([l])}},_=()=>{let{setPersonalizedStyle:e}=(0,p.o)(),t=(0,n.st)(),{personalizedStyleOptions:a,setStoredStyle:s}=(0,f.p)();return n=>{let l=a.find(e=>e.key===n);if(!l)return;e(l);let i=(0,g.X)(l);s({styleKey:i,timestamp:new Date}),t.track({event_key:"styles.selected",style_key:i})}}},5690:(e,t,a)=>{a.d(t,{Kk:()=>b});var s=a(54568),n=a(64328),l=a(13750),i=a(23812),r=a(84617),o=a(2e3),d=a(91073),c=a(43692),u=a(72902),m=a(7620),p=a(59666),h=a(10369),f=a(13644),x=a(45538),g=a(85492),y=a(15848);let v=(0,s.jsx)(p.A,{defaultMessage:"Everyone in your organization can view and use this project",id:"o6dyBu92Ad"}),j=(0,s.jsx)(p.A,{defaultMessage:"Only invited members can view and use this project",id:"r65HKpZU8I"});function b(e){var t,a,b,w,M,_;let{syncSources:A=[],onProjectCreated:k,onError:C,onCancel:N,strings:S}=e,E=(0,h.A)(),I=(0,n.mV)(),T=(0,y.AI)(),{customInstructions:O,type:R,subtype:D}=null!=T?T:{},[L,P]=(0,m.useState)({name:"",description:null!=(t=S.createProjectDescriptionDefault)?t:"",type:R,subtype:D,is_private:!0}),[F,z]=(0,m.useState)({}),[G,U]=(0,m.useState)(!1),Y=A.length>0,H=A.some(e=>e.type===o.v8.GITHUB),V=A.some(e=>e.type===o.v8.GDRIVE),W=H&&V?(0,s.jsx)(p.A,{defaultMessage:"Github and GDrive attachments can only be added to private projects",id:"rqNebqAfPF"}):H?(0,s.jsx)(p.A,{defaultMessage:"Github attachments can only be added to private projects",id:"eyujXWQfg4"}):V?(0,s.jsx)(p.A,{defaultMessage:"GDrive attachments can only be added to private projects",id:"DMBgAV43lL"}):(0,s.jsx)(p.A,{defaultMessage:"Some of these attachments can only be added to private projects",id:"2ssKO1VReL"}),{mutateAsync:B}=(0,x.bL)(),{activeOrganization:K}=(0,n.YL)(),{data:J}=(0,x.BN)(),{data:q,isLoading:X}=(0,x.PL)(),{data:$}=(0,f.q)(),Q=$&&!Y,Z=!X&&(null==q?void 0:q.count)===0,ee=e=>t=>{P(a=>({...a,[e]:t.target.value})),z(t=>({...t,[e]:null}))},et=e=>{P(t=>({...t,is_private:e.target.checked&&"private"===e.target.value}))},ea=async e=>{if(e.preventDefault(),!G&&(()=>{let e={};return""===L.name.trim()&&(e.name=E.formatMessage({defaultMessage:"Project name is required",id:"n5cqkMmIMW"})),z(e),0===Object.keys(e).length})()){U(!0);try{let e={...L};O&&(e.prompt_template=O.replaceAll("{{PROJECT_NAME}}",L.name));let t=await B(e);k(t)}catch(e){C(e)}finally{U(!1)}}};return(0,s.jsxs)("form",{className:"grid grid-cols-1 gap-4",onSubmit:e=>ea(e),children:[Z&&!T&&(0,s.jsxs)("div",{className:"bg-bg-300 border-border-400/10 text-text-300 flex w-full flex-col items-start justify-start gap-2 rounded-xl border px-5 pb-5 pt-4 text-sm",children:[(0,s.jsx)("div",{className:"flex items-center gap-1 font-medium",children:(0,s.jsx)(p.A,{defaultMessage:"How to use projects",id:"moKJkVk/qB"})}),I?(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("div",{children:(0,s.jsx)(p.A,{defaultMessage:"Use Projects with your team to do things like:",id:"fcUpqajVgl"})}),(0,s.jsxs)("ul",{className:"list-disc pl-4",children:[(0,s.jsx)("li",{children:(0,s.jsx)(p.A,{defaultMessage:"Query and analyze information about customers, sales calls, and project plans",id:"1YyB53/KOc"})}),(0,s.jsx)("li",{children:(0,s.jsx)(p.A,{defaultMessage:"Upload files from your codebase to understand, improve, and contribute",id:"HXj87AQH0P"})}),(0,s.jsx)("li",{children:(0,s.jsx)(p.A,{defaultMessage:"Generate analysis and reports from one consistent set of materials",id:"3XvEQYrcUv"})}),(0,s.jsx)("li",{children:(0,s.jsx)(p.A,{defaultMessage:"Create content informed by company policies and documentation",id:"HrODk029zr"})})]}),(0,s.jsx)("p",{children:(0,s.jsx)(p.A,{defaultMessage:"Start by creating a memorable title and description to organize your project. You can always edit it later.",id:"qEWJMy5mr7"})})]}):(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("p",{children:(0,s.jsx)(p.A,{defaultMessage:"Projects help organize your work and leverage knowledge across multiple conversations. Upload docs, code, and files to create themed collections that Claude can reference again and again.",id:"7HFalNigyO"})}),(0,s.jsx)("p",{children:(0,s.jsx)(p.A,{defaultMessage:"Start by creating a memorable title and description to organize your project. You can always edit it later.",id:"qEWJMy5mr7"})})]}),J&&(0,s.jsx)("div",{children:(0,s.jsx)(p.A,{defaultMessage:"Curious to learn more? <link>Try an example project</link>",id:"+AcqvUzRry",values:{link:e=>(0,s.jsx)(r.Y,{href:"/project/".concat(J),children:e})}})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(l.ks,{autoFocus:!0,name:"name",className:"w-full",label:null!=(a=S.createProjectNameLabel)?a:E.formatMessage({defaultMessage:"What are you working on?",id:"R2IogQsIBI"}),placeholder:null!=(b=S.createProjectNamePlaceholder)?b:E.formatMessage({defaultMessage:"Name your project",id:"BtIbm/e/WX"}),size:"lg",onChange:ee("name"),error:!!F.name,"data-1p-ignore":!0}),F.name&&(0,s.jsx)("div",{className:"text-danger-000 mt-1 text-right text-xs font-medium",children:F.name})]}),!T&&(0,s.jsx)("div",{children:(0,s.jsx)(l.fs,{name:"description",className:"w-full",label:null!=(w=S.createProjectDescriptionLabel)?w:E.formatMessage({defaultMessage:"What are you trying to achieve?",id:"RPsTh+NBxY"}),placeholder:null!=(M=S.createProjectDescriptionPlaceholder)?M:E.formatMessage({defaultMessage:"Describe your project, goals, subject, etc...",id:"WStTnUWlP8"}),minRows:3,onChange:ee("description"),error:F.description})}),I?(0,s.jsxs)("fieldset",{children:[(0,s.jsx)("div",{className:"mb-2 text-sm font-medium",children:(0,s.jsx)(p.A,{defaultMessage:"Visibility",id:"JAkIqbzRj5"})}),(0,s.jsxs)("label",{className:(0,u.A)("mb-2 flex w-full gap-2",!Q&&"opacity-40"),children:[(0,s.jsx)("input",{name:"visibility",className:"mt-0.5",type:"radio",value:"open",checked:!L.is_private,onChange:et,disabled:!Q}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"text-sm",children:[(0,s.jsx)(d.m,{size:16,className:"-mt-1 mr-1 inline-block"}),null!=(_=null==K?void 0:K.name)?_:(0,s.jsx)(p.A,{defaultMessage:"Organization",id:"K56Dims7Up"})]}),(0,s.jsx)("div",{className:"text-text-300 text-xs",children:$?Y?W:v:(0,s.jsx)(p.A,{defaultMessage:"Public projects are disabled by your organization",id:"c2HBgZtgDR"})})]})]}),(0,s.jsxs)("label",{className:"flex w-full gap-2",children:[(0,s.jsx)("input",{name:"visibility",className:"mt-0.5",type:"radio",value:"private",checked:L.is_private,onChange:et}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"text-sm",children:[(0,s.jsx)(c.W,{size:16,className:"-mt-1 mr-1 inline-block"}),(0,s.jsx)(p.A,{defaultMessage:"Private",id:"viXE3205/2"})]}),(0,s.jsx)("div",{className:"text-text-300 text-xs",children:j})]})]})]}):null,(0,s.jsx)("div",{className:"mt-2 flex justify-end",children:(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(i.$,{onClick:N,href:N?void 0:"/projects",variant:"secondary",disabled:G,children:(0,s.jsx)(p.A,{defaultMessage:"Cancel",id:"47FYwba+bI"})}),(0,s.jsx)(g.i,{children:(0,s.jsx)(i.$,{type:"submit",loading:G,children:(0,s.jsx)(p.A,{defaultMessage:"Create project",id:"VUN1K7kSzC"})})})]})})]})}},9140:(e,t,a)=>{a.d(t,{d:()=>h});var s=a(2348),n=a(54568),l=a(13750),i=a(84284),r=a(59922),o=a(23812),d=a(27541),c=a(10369),u=a(59666);function m(){let e=(0,s._)(["\n  text-text-400\n  text-sm\n  font-medium\n"]);return m=function(){return e},e}function p(){let e=(0,s._)(["\n  text-xs\n  font-normal\n"]);return p=function(){return e},e}let h=e=>{let{category:t,setCategory:a,notes:s,setNotes:r,reporterEmail:m,setReporterEmail:p,reporterName:h,setReporterName:g,optOutOfTraining:y,setOptOutOfTraining:v,onSubmit:j,onClose:b,additionalFields:w}=e,M=(0,c.A)(),_=(0,d.useRouter)(),A=(()=>{let e=(0,c.A)();return{COPYRIGHT_INFRINGEMENT:e.formatMessage({defaultMessage:"Copyright infringement",id:"KBxpgB8JHb"}),TRADEMARK_INFRINGEMENT:e.formatMessage({defaultMessage:"Trademark infringement",id:"vYjeaNdXif"}),CHILD_SAFETY:e.formatMessage({defaultMessage:"Child safety/sexual abuse",id:"ddXREI8PNV"}),FRAUD:e.formatMessage({defaultMessage:"Fraud",id:"YoXOdinNC1"}),SEXUALLY_EXPLICIT_CONTENT:e.formatMessage({defaultMessage:"Sexually Explicit content",id:"D0NxeIKdoR"}),VIOLENCE_AND_HATE:e.formatMessage({defaultMessage:"Violence and/or hate speech",id:"vyV1zGTEEH"}),ILLEGAL_GOODS:e.formatMessage({defaultMessage:"Illegal goods",id:"13OdRQYanm"}),COURT_ORDER:e.formatMessage({defaultMessage:"Court order",id:"2mmEfFQIze"}),PRIVATE_OR_CONFIDENTIAL_INFORMATION:e.formatMessage({defaultMessage:"Private/confidential information",id:"qndjDTg0gE"}),DEFAMATION:e.formatMessage({defaultMessage:"Defamation",id:"h9Y5N1xs5X"}),OTHER_ILLEGAL:e.formatMessage({defaultMessage:"Other illegal or unlawful content",id:"Bjp5vOloME"}),VIOLATION_OF_TERMS:e.formatMessage({defaultMessage:"Violation of terms or usage policy",id:"8Aa/HbeJSY"})}})(),k=null;return"COPYRIGHT_INFRINGEMENT"===t||"TRADEMARK_INFRINGEMENT"===t||"PRIVATE_OR_CONFIDENTIAL_INFORMATION"===t||"COURT_ORDER"===t?k=(0,n.jsx)("div",{className:"text-text-300 border-0.5 border-border-300 rounded-lg p-12 text-sm",children:(0,n.jsx)(u.A,{defaultMessage:"Please use this <link>form</link> to report copyright infringement.",id:"6Ovg0gmxY3",values:{link:e=>(0,n.jsx)("a",{href:"https://docs.google.com/forms/d/e/1FAIpQLSeO9Hzkyf_hQ2fYkfP_cqAcJG5kdlkg1wF4drQEFK9Z6db7jg/viewform",target:"_blank",className:"underline",children:e})}})}):t&&(k=(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(f,{htmlFor:"reporter-name",children:(0,n.jsx)(u.A,{defaultMessage:"Your name",id:"vlKhIlKczK"})}),(0,n.jsx)(l.ks,{id:"reporter-name",value:h,onChange:e=>g(e.target.value),placeholder:M.formatMessage({defaultMessage:"Optional",id:"InWqysQtIQ"})}),w,(0,n.jsxs)(f,{htmlFor:"reporter-email",children:[(0,n.jsx)(u.A,{defaultMessage:"Your email",id:"nONnTwYJzw"}),(0,n.jsx)(x,{children:(0,n.jsx)(u.A,{defaultMessage:"If provided, we may contact you for additional information or updates on this report",id:"76+sVeXWuh"})})]}),(0,n.jsx)(l.ks,{id:"reporter-email",value:m,onChange:e=>p(e.target.value),placeholder:M.formatMessage({defaultMessage:"Optional",id:"InWqysQtIQ"})}),(0,n.jsxs)(f,{htmlFor:"notes",children:[(0,n.jsx)(u.A,{defaultMessage:"Additional information",id:"gh/lBJ3ybG"}),(0,n.jsxs)(x,{className:"flex flex-col gap-1",children:[(0,n.jsx)("div",{children:(0,n.jsx)(u.A,{defaultMessage:"Please provide any additional information to help us understand your request.",id:"iqT0iuZphp"})}),(0,n.jsx)("div",{children:(0,n.jsx)(u.A,{defaultMessage:"If you are reporting the content as illegal/unlawful, please describe in detail why you believe the identified content is illegal/unlawful, citing specific provisions of law wherever possible.",id:"FtDimnJZ6A"})}),(0,n.jsx)("div",{children:(0,n.jsx)(u.A,{defaultMessage:"If you are reporting the content as violating our policies (including our terms or Usage Policy), please describe in detail why you believe the identified content is in violation of our policies, with specific citations to our policies wherever possible.",id:"4XdZthEtcv"})})]})]}),(0,n.jsx)(l.fs,{id:"notes",value:s,onChange:e=>r(e.target.value),placeholder:M.formatMessage({defaultMessage:"Optional",id:"InWqysQtIQ"})}),(0,n.jsxs)(f,{children:[(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)(u.A,{defaultMessage:"Opt out of training on this report",id:"mREcB0MAuE"}),(0,n.jsx)(i.j,{checked:y,onChange:()=>v(!y)})]}),(0,n.jsx)(x,{children:(0,n.jsx)(u.A,{defaultMessage:"We value user reports to uphold our platform’s integrity and improve our ability to enforce our Usage Policy. Unless you opt out, reports may be used to train models for use by our Trust & Safety team, consistent with Anthropic’s safety mission. Opt out of this use by changing the toggle above.",id:"2IiG1AGCna"})})]}),(0,n.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,n.jsx)(o.$,{variant:"secondary",onClick:b,children:(0,n.jsx)(u.A,{defaultMessage:"Close",id:"rbrahOGMC3"})}),(0,n.jsx)(o.$,{onClick:()=>{j(),_.push("/reported")},variant:"primary",children:(0,n.jsx)(u.A,{defaultMessage:"Report",id:"x5Tz6MZH82"})})]})]})),(0,n.jsxs)("div",{className:"flex w-full flex-col gap-2 pt-6",children:[(0,n.jsx)(f,{htmlFor:"report-reason-dropdown",children:(0,n.jsx)(u.A,{defaultMessage:"Why are you reporting this?",id:"0nCKXihfO0"})}),(0,n.jsxs)(l.l6,{id:"report-reason-dropdown",value:null!=t?t:"select-report-reason",onChange:e=>a(e.target.value),children:[(0,n.jsx)("option",{value:"select-report-reason",disabled:!0,children:(0,n.jsx)(u.A,{defaultMessage:"Select report reason",id:"bk8tuJl/tJ"})}),Object.entries(A).map(e=>{let[t,a]=e;return(0,n.jsx)("option",{value:t,children:a},t)})]}),k]})},f=r.J.label(m()),x=r.J.div(p())},9596:(e,t,a)=>{a.d(t,{$z:()=>o,cY:()=>r});var s=a(1613),n=a(64328),l=a(68067),i=a(66365);function r(){let e=(0,i.useLayer)("frontend"),{value:t}=(0,l.fS)("chat_suggestion_chips_enabled"),a=e.get("chat_suggestion_chips",!1);return t||a}function o(e){let{mutateAsync:t,enabled:a}=function(){let{activeOrganization:e}=(0,n.YL)(),{value:t}=(0,l.fS)("chat_autocomplete"),a=(0,s.L2)("/api/organizations/".concat(null==e?void 0:e.uuid,"/dust/chat_autocomplete"),"POST",{enabled:t,onError:()=>{console.warn("Failed to fetch completion")},meta:{noToast:!0}});return{mutateAsync:a.mutateAsync,isPending:a.isPending,isIdle:a.isIdle,enabled:t}}();return{fetchInputAutocompletion:async s=>{if(!a||!e)return"";let[n,l]=(await t({conversationUuid:null!=e?e:"",prompt:s})).prompt.split("\n").map(e=>e.trim());return"Yes"===n?" "===s[s.length-1]?l||"":" "+(l||""):"No"===n&&l||""}}}},11717:(e,t,a)=>{a.d(t,{TW:()=>E,go:()=>S,wU:()=>N});var s=a(54568),n=a(94295),l=a(32049),i=a(34003),r=a(74813),o=a(64328),d=a(45054),c=a(84284),u=a(21266),m=a(3075),p=a(73996),h=a(84617),f=a(67453),x=a(68067),g=a(99969),y=a.n(g),v=a(32536),j=a(7620),b=a(59666),w=a(10369),M=a(24407);let _=M.z.object({title:M.z.string(),description:M.z.string(),shortDescription:M.z.string().optional(),titleKey:M.z.string().optional(),descriptionKey:M.z.string().optional(),shortDescriptionKey:M.z.string().optional()}),A=M.z.object({preview_feature_uses_artifacts:_.optional(),preview_feature_uses_latex:_.optional(),preview_feature_uses_citations:_.optional(),enabled_artifacts_attachments:_.optional(),enabled_turmeric:_.optional(),enabled_gdrive:_.optional(),enabled_bananagrams:_.optional(),enabled_web_search:_.optional(),enabled_sourdough:_.optional(),enabled_foccacia:_.optional()}),k={},C=(0,j.createContext)({openFeaturePreviewModal:y()}),N=e=>{let{children:t}=e,[a,n]=(0,j.useState)(!1);return(0,s.jsxs)(C.Provider,{value:{openFeaturePreviewModal:()=>n(!0)},children:[t,(0,s.jsx)(m.aF,{modalSize:"xl",isOpen:a,onClose:()=>n(!1),hasCloseButton:!0,title:(0,s.jsx)(b.A,{defaultMessage:"Feature preview",id:"3H/t1552xG"}),children:(0,s.jsx)(E,{})})]})},S=()=>(0,j.useContext)(C);function E(e){let{includeTitle:t}=e,a=function(){let e=(0,x.T9)("fp_menu","features",k,A),{value:t,source:a}=(0,l.N)({}),{preview_feature_uses_artifacts:s,enabled_artifacts_attachments:n,preview_feature_uses_latex:i,enabled_turmeric:r,...o}=e,d={...o};return t&&"experiment"===a&&s||(d.enabled_artifacts_attachments=n),d.enabled_monkeys_in_a_barrel={title:"Code execution and file creation",description:"Claude can execute code and create and edit docs, spreadsheets, presentations, PDFs, and data reports. Available on web and desktop."},d}(),i=Object.keys(a).length>0,{account:r}=(0,o.YL)(),{mutate:d}=(0,n.Jy)(),c=(0,j.useRef)(!1);if((0,j.useEffect)(()=>{if(!(null==r?void 0:r.settings)||c.current)return;c.current=!0;let e=r.settings.enabled_monkeys_in_a_barrel,t=r.settings.preview_feature_uses_artifacts,a=r.settings.enabled_artifacts_attachments;e&&!t&&d({...r.settings,preview_feature_uses_artifacts:!0}),e&&a&&d({...r.settings,enabled_artifacts_attachments:!1})},[null==r?void 0:r.settings,d]),!i)return;let u=(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(p.eE,{id:"feature-preview",children:(0,s.jsx)(b.A,{defaultMessage:"Preview and provide feedback on upcoming enhancements to our platform. Please note: experimental features might influence Claude’s behavior and some interactions may differ from the standard experience.",id:"TJ0Nj7aQ5C"})}),(0,s.jsx)("div",{className:"flex flex-col gap-4",children:Object.entries(a).map((e,t)=>{let[a,n]=e;return(0,s.jsxs)("div",{className:"flex flex-col gap-4",children:[t>0&&(0,s.jsx)("div",{className:"border-t border-border-300"}),(0,s.jsx)(I,{label:a,...n})]},a)})})]});return t?(0,s.jsxs)(p.XY,{children:[(0,s.jsx)(p.F9,{children:(0,s.jsx)(b.A,{defaultMessage:"Experimental",id:"GOx7x4mbZd"})}),u]}):u}function I(e){var t;let{label:a,...l}=e,m=(0,w.A)(),{track:p}=(0,r.st)(),{addSuccess:x}=(0,d.Y)(),{account:g}=(0,o.YL)(),{mutate:y}=(0,n.Jy)(),{checked:M}=T(a),_=(0,i.t5)(),A="enabled_monkeys_in_a_barrel"===a&&!_,k=(0,j.useCallback)(()=>{if(!g||A)return;p({event_key:"claudeai.settings.preview_feature.toggled",account_uuid:g.uuid,feature_id:a,action:!0===M?"disable":"enable"});let e=!M;if(x(m.formatMessage({defaultMessage:"{title} {action}",id:"XuGv50sPs9"},{title:l.title,action:M?"disabled":"enabled"})),e){var t,s,n;if("enabled_monkeys_in_a_barrel"===a){let e=null==(t=g.settings)?void 0:t.enabled_artifacts_attachments,a=[];e&&a.push("Analysis Tool"),a.length>0&&x(m.formatMessage({defaultMessage:"Automatically disabled: {features}",id:"7StJBCedWA"},{features:a.join(", ")})),(null==(s=g.settings)?void 0:s.preview_feature_uses_artifacts)||x(m.formatMessage({defaultMessage:"Automatically enabled: Artifacts",id:"v5zt5SRUyk"}))}else"enabled_artifacts_attachments"===a&&(null==(n=g.settings)?void 0:n.enabled_monkeys_in_a_barrel)&&x(m.formatMessage({defaultMessage:"Automatically disabled: Files feature",id:"8T9PGQkYRT"}))}y({...g.settings,[a]:e,..."enabled_monkeys_in_a_barrel"===a&&e&&{enabled_artifacts_attachments:!1,preview_feature_uses_artifacts:!0},..."enabled_artifacts_attachments"===a&&e&&{enabled_monkeys_in_a_barrel:!1}})},[g,p,a,M,x,m,l.title,y,A]);return(0,s.jsxs)("div",{className:"flex flex-row w-full gap-4 items-start",children:[(0,s.jsx)(v.default,{src:"/images/feature-preview/square/".concat(null!=(t=O[a])?t:"generic",".png"),style:{objectFit:"cover",width:62,height:62},className:"rounded-lg border border-border-300",width:248,height:248,alt:m.formatMessage({defaultMessage:"Preview image of feature",id:"6VliGZPeZA"})}),(0,s.jsxs)("div",{className:"flex flex-col gap-2 flex-grow",children:[(0,s.jsx)("h3",{className:"text-text-100 font-base-bold",id:"feature-".concat(a,"-title"),children:l.titleKey?(0,s.jsx)(u.X5,{id:l.titleKey}):l.title}),(0,s.jsx)("p",{className:"text-text-300 font-base",children:l.descriptionKey?(0,s.jsx)(u.X5,{id:l.descriptionKey}):l.description}),"enabled_monkeys_in_a_barrel"===a&&(0,s.jsx)("span",{className:"text-xs text-text-500",children:(0,s.jsx)(b.A,{defaultMessage:"This feature gives Claude network access to create and analyze files, which has <a>security risks</a>. Monitor chats closely when using this feature.",id:"2tm+lICYTm",values:{a:e=>(0,s.jsx)(h.Y,{href:"https://support.claude.com/en/articles/12111783-create-and-edit-files-with-claude#h_0ee9d698a1",target:"_blank",children:e})}})})]}),(0,s.jsx)("label",{className:"cursor-pointer mt-2",children:(0,s.jsx)(f.Tooltip,{tooltipContent:A?(0,s.jsx)(b.A,{defaultMessage:"This feature has been disabled by your administrator.",id:"Jpvq2WYysx"}):"enabled_monkeys_in_a_barrel"===a?(0,s.jsx)(b.A,{defaultMessage:"This is an upgrade to the analysis tool. It does not support versioning or remixing of Artifacts.",id:"OT4Z/tnKXZ"}):null,children:(0,s.jsx)("div",{children:(0,s.jsx)(c.j,{checked:!!M,onChange:k,"aria-labelledby":"feature-".concat(a,"-title"),disabled:A},a)})})})]})}let T=e=>{var t,a,s,n,r,d,c;let{account:u}=(0,o.YL)(),{value:m,source:p}=(0,l.N)(null!=(n=null==u?void 0:u.settings)?n:{}),h=(0,i.u9)(),f=null!=(r=null==u||null==(t=u.settings)?void 0:t.preview_feature_uses_artifacts)&&r,x="flag"===p&&m||null!=(d=null==u||null==(a=u.settings)?void 0:a.enabled_artifacts_attachments)&&d;return"enabled_monkeys_in_a_barrel"===e?{checked:null!=h&&h}:"enabled_artifacts_attachments"===e?{checked:x}:"preview_feature_uses_artifacts"===e?{checked:f}:{checked:null!=(c=null==u||null==(s=u.settings)?void 0:s[e])&&c}},O={preview_feature_uses_artifacts:"artifacts",preview_feature_uses_latex:"latex",preview_feature_uses_citations:"generic",enabled_artifacts_attachments:"analyse",enabled_turmeric:"turmeric",enabled_gdrive:"google-drive",enabled_web_search:"web-search",enabled_bananagrams:"bananagrams",enabled_foccacia:"foccacia",enabled_sourdough:"sourdough",enabled_monkeys_in_a_barrel:"wiggle"}},11930:(e,t,a)=>{a.d(t,{I:()=>s});var s=function(e){return e.CREATE="create",e.CREATE_MANUALLY="create_manually",e.LIST="list",e.EDIT="edit",e}({})},15912:(e,t,a)=>{a.d(t,{V:()=>r});var s=a(54568);a(19736),a(96614),a(86545),a(64328);var n=a(14691),l=a(22147);a(68067),a(10665);var i=a(93220);a(88775);let r=e=>{let{anchorRef:t,canShowNux:a,text:r,id:o,nuxItem:d,side:c,align:u="center"}=e,{shouldShow:m,dismiss:p}=(0,i.z)(o,d);return m&&a?(0,s.jsx)(l.U,{side:c,anchorRef:t,onClose:p,accentColor:"secondary",introDelay:.5,align:u,children:(0,s.jsxs)("div",{className:"flex flex-row gap-2 min-w-[13rem]",children:[(0,s.jsx)(n.g5,{}),(0,s.jsx)("p",{className:"whitespace-normal",children:r})]})}):null}},16256:(e,t,a)=>{a.d(t,{A:()=>s});let s={snappyOut:[.19,1,.22,1],inOutQuart:[.77,0,.175,1],outCirc:[.075,.82,.165,1],inOutBase:[.25,.1,.25,1]}},18800:(e,t,a)=>{a.d(t,{V:()=>o});var s=a(54568);a(2e3);var n=a(7620),l=a(86141),i=a(88775),r=a(46868);function o(e){let{uuid:t,syncSource:a,onRemove:o,isEditable:d}=e,{mutateAsync:c}=(0,l.Ql)(),u=(0,n.useCallback)(()=>{c(t),null==o||o()},[c,t,o]),{projectUuid:m}=(0,i.lE)();return(0,s.jsx)(r.br,{location:"chat",projectUuid:m,syncSource:a,handleRemove:d?u:void 0,isEditable:d})}},18849:(e,t,a)=>{a.d(t,{_:()=>c,x:()=>d});var s=a(54568),n=a(18088),l=a(27541),i=a(7620),r=a(91755);let o=(0,i.createContext)({isDrawerExpanded:!1,setIsDrawerExpanded:()=>void 0});function d(){return(0,i.useContext)(o)}function c(e){let{children:t,conversationUuid:a}=e,d=function(e){let t=!!(0,l.useSearchParams)().get("controls")&&!(window.matchMedia&&window.matchMedia("(max-width: 767px)").matches),[a]=(0,n.Vc)("".concat(e,":chatControlsSidebarIsOpen"),t);return a}(a),{isExpanded:c,setIsExpanded:u}=(0,r.V)(),[m,p]=(0,i.useState)(d),h=(0,i.useRef)({reopenMain:!1}),f=(0,i.useCallback)(e=>{e&&(c&&(h.current.reopenMain=!0),u(!1)),!e&&h.current.reopenMain&&(h.current.reopenMain=!1,u(!0)),p(e)},[c,u,p]),x=(0,i.useMemo)(()=>({isDrawerExpanded:m,setIsDrawerExpanded:f}),[m,f]);return(0,s.jsx)(o.Provider,{value:x,children:t})}},19920:(e,t,a)=>{a.d(t,{s:()=>c});var s=a(54568),n=a(14691),l=a(47592),i=a(95617),r=a(72902),o=a(10369),d=a(95839);let c=e=>{let{path:t,inputMenuSearchQuery:a,setInputMenuSearchQuery:c,handleBack:u,className:m}=e,p=(0,o.A)(),h=(0,l.fJ)(),f={[i.xd.DRIVE]:p.formatMessage({defaultMessage:"Search Google Drive",id:"1bbXc6Z3S1"}),[i.xd.PROJECTS]:p.formatMessage({defaultMessage:"Search projects",id:"doPT7U8q21"}),[i.xd.STYLES]:p.formatMessage({defaultMessage:"Search styles",id:"9oQ0JkPwFY"})},x=t&&t in f?f[t]:p.formatMessage({defaultMessage:"Search menu",id:"lL4HM3zEqr"}),g=null===t||!!a.trim().length;return(0,s.jsxs)("div",{className:(0,r.A)("flex flex-row items-center gap-2.5 px-1.5 w-full rounded-md h-[2rem]",m),children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"w-4 h-4 flex items-center justify-center",children:(0,s.jsx)(n.vj,{className:(0,r.A)("text-text-500/50 transition-opacity",g?"opacity-100":"opacity-0")})}),(0,s.jsx)("button",{onClick:u,className:(0,r.A)("transition-opacity text-text-500 hover:text-text-100 absolute left-0 top-0",g?"opacity-0":"opacity-100"),disabled:g,children:(0,s.jsx)("div",{className:"w-4 h-4 flex items-center justify-center",children:(0,s.jsx)(n.nk,{})})})]}),(0,s.jsx)("input",{autoFocus:!h,id:d.I,className:"block bg-transparent hide-focus-ring leading-6 placeholder:text-text-500/70 font-base text-text-300 w-full",placeholder:x,value:a,onChange:e=>c(e.target.value)})]})}},22147:(e,t,a)=>{a.d(t,{U:()=>d});var s=a(54568),n=a(23812),l=a(72902),i=a(61295),r=a(7620);let o={FROM_ANCHOR:8,POINTER_OFFSET:26,POINTER_HEIGHT:16},d=e=>{let{anchorRef:t,children:a,side:d,align:u="center",accentColor:m="default",onClose:p,className:h,introDelay:f=0,spacing:x={},buttonText:g,onClickButton:y}=e,v={...o,...x},j=(0,r.useRef)(null),[b,w]=(0,r.useState)(d),[M,_]=(0,r.useState)(u);(0,r.useEffect)(()=>{if(!j.current||!t.current)return;let e=()=>{let{current:e}=j,{current:a}=t;if(!e||!a)return;let s=a.getBoundingClientRect(),n=e.getBoundingClientRect(),l=window.innerWidth,i=window.innerHeight,r=b,o=M,d=0,c=0,u=()=>{d="top"===r?s.top-n.height-v.FROM_ANCHOR:"bottom"===r?s.bottom+v.FROM_ANCHOR:s.top-v.POINTER_OFFSET+.5*s.height-.5*v.POINTER_HEIGHT},m=()=>{if("left"===r)c=s.left-n.width-v.FROM_ANCHOR;else if("right"===r)c=s.right+v.FROM_ANCHOR;else switch(o){case"start":c=s.left-v.FROM_ANCHOR;break;case"center":c=s.left+(s.width-n.width)/2;break;case"end":c=s.right-n.width+v.FROM_ANCHOR}};u(),m(),c<0?"top"===r||"bottom"===r?o="start":r="bottom":c+n.width>l&&("top"===r||"bottom"===r?o="end":r="bottom"),d<0?r="bottom":d+n.height>i&&(r="top"),u(),m(),e.style.top="".concat(d,"px"),e.style.left="".concat(c,"px"),r!==b&&w(r),o!==M&&_(o)};e();let a=new ResizeObserver(e);t.current&&(a.observe(t.current),t.current.parentElement&&a.observe(t.current.parentElement));let s=e=>{if(p){var t;(null==(t=j.current)?void 0:t.contains(e.target))||p()}};return window.addEventListener("resize",e),window.addEventListener("scroll",e),document.addEventListener("click",s,{capture:!0}),()=>{a.disconnect(),window.removeEventListener("resize",e),window.removeEventListener("scroll",e),document.removeEventListener("click",s,{capture:!0})}},[b,M,t,p,v.FROM_ANCHOR,v.POINTER_HEIGHT,v.POINTER_OFFSET]);let A={};switch(b){case"right":A={translateX:-v.FROM_ANCHOR,opacity:0};break;case"left":A={translateX:v.FROM_ANCHOR,opacity:0};break;case"bottom":A={translateY:-v.FROM_ANCHOR,opacity:0};break;case"top":A={translateY:v.FROM_ANCHOR,opacity:0}}return(0,s.jsxs)(i.P.div,{ref:j,initial:A,animate:{translateY:0,translateX:0,opacity:1,transition:{delay:f,type:"spring",stiffness:200,damping:20,mass:1.5,opacity:{ease:"easeOut",duration:.15}}},exit:{scale:.985,opacity:0,filter:"blur(24px)",transition:{ease:"easeIn",duration:.3,opacity:{duration:.2}}},className:(0,l.A)("font-base fixed z-tooltip rounded-xl p-4 border-0.5 shadow-sm max-w-[16.6rem]","default"===m&&"bg-bg-200 border-border-300","secondary"===m&&"text-accent-secondary-000 bg-accent-secondary-900 border-accent-secondary-100/50",h),role:"dialog",style:{willChange:"transform",backfaceVisibility:"hidden",WebkitBackfaceVisibility:"hidden"},children:[(0,s.jsx)(c,{side:b,align:M,accentColor:m,spacing:v}),(0,s.jsxs)("div",{className:"flex flex-col gap-4",children:[a,!!g&&!!y&&(0,s.jsx)(n.$,{variant:"outline",className:(0,l.A)("!gap-0 !text-sm !rounded-lg  !px-3 !min-w-0 !w-fit","secondary"===m&&"!text-accent-secondary-000 !border-accent-secondary-100/30 hover:!bg-accent-secondary-100 hover:!text-oncolor-100"),onClick:()=>{y(),null==p||p()},size:"sm",children:(0,s.jsx)("p",{className:"inline",children:g})})]})]})},c=e=>{let{accentColor:t,side:a,align:n,spacing:i=o}=e,r="fill-bg-200",d="fill-border-300";"secondary"===t&&(r="fill-accent-secondary-900",d="fill-accent-secondary-100/50");let c={};switch(a){case"top":c={top:"100%",left:"50%",marginTop:"-5px",transform:"rotate(-90deg) translateY(-25%)"};break;case"bottom":c={bottom:"100%",left:"50%",marginBottom:"-5px",transform:"rotate(90deg) translateY(25%)"};break;case"right":c={top:i.POINTER_OFFSET};break;case"left":c={top:i.POINTER_OFFSET,left:"100%",transform:"rotate(180deg)"}}if("top"===a||"bottom"===a)switch(n){case"start":c.left=i.POINTER_OFFSET;break;case"end":c.left="auto",c.right=i.POINTER_OFFSET}return(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",height:i.POINTER_HEIGHT,viewBox:"0 0 6 16",className:(0,l.A)("absolute origin-center pointer-events-none","right"===a&&"right-full"),style:c,children:[(0,s.jsx)("path",{className:r,d:"M6 0h-.5v1.55c0 .55-.27 1.06-.71 1.55-.53.6-1.16 1.05-1.79 1.51-.57.42-1.15.85-1.65 1.37C.87 6.48.5 7.06.5 7.74c0 .68.37 1.26.85 1.77.5.52 1.08.94 1.65 1.36.63.47 1.26.93 1.79 1.51.44.5.71 1 .71 1.56V16H6V0Z"}),(0,s.jsx)("path",{className:d,fillRule:"evenodd",clipRule:"evenodd",d:"M6 0v1.55c0 .74-.36 1.36-.85 1.9-1.01 1.13-2.4 1.8-3.44 2.89-.45.47-.71.92-.71 1.4 0 .48.26.93.7 1.4 1.05 1.1 2.44 1.76 3.45 2.89.5.54.85 1.17.85 1.9V16h-.5v-2.06c0-.56-.27-1.06-.71-1.56-1.01-1.12-2.4-1.79-3.44-2.87C.87 9 .5 8.42.5 7.74c0-.68.37-1.26.85-1.76C2.4 4.89 3.78 4.22 4.8 3.1c.44-.5.71-1 .71-1.55V0H6Z"})]})}},26250:(e,t,a)=>{a.d(t,{L:()=>l,NuxProvider:()=>i});var s=a(54568),n=a(7620);let l=(0,n.createContext)(null);function i(e){let{children:t}=e,[a,i]=(0,n.useState)({items:{},currentlyShowing:null}),o=(0,n.useCallback)((e,t)=>{i(a=>{if(a.items[e])return a;let s={...a.items,[e]:t};return{items:s,currentlyShowing:r(s,!0)}})},[]),d=(0,n.useCallback)(e=>{i(t=>{let{[e]:a,...s}=t.items;return{items:s,currentlyShowing:t.currentlyShowing===e?r(s):t.currentlyShowing}})},[]),c={items:a.items,currentlyShowing:a.currentlyShowing,registerNux:o,unregisterNux:d};return(0,s.jsx)(l.Provider,{value:c,children:t})}let r=(e,t)=>{let a=Object.entries(e).sort((e,t)=>{let a=e[1].priority||0,s=t[1].priority||0;return a!==s?s-a:new Date(t[1].dateAdded).getTime()-new Date(e[1].dateAdded).getTime()});if(t){var s,n;return null!=(n=null==(s=a[0])?void 0:s[0])?n:null}for(let[e,t]of a)if(t.showAfterOthersDismiss)return e;return null}},30541:(e,t,a)=>{a.d(t,{g:()=>r,x:()=>o});var s=a(1613),n=a(64328),l=a(80688),i=a(4869);let r=()=>{let{account:e,activeOrganization:t}=(0,n.YL)();return(0,s.Sk)("/api/organizations/".concat(null==t?void 0:t.uuid,"/spotlight"),{enabled:!!e,queryKey:[l.vi,null==e?void 0:e.uuid,null==t?void 0:t.uuid]})},o=()=>{let{account:e,activeOrganization:t}=(0,n.YL)(),a=(0,i.useQueryClient)();return(0,s.L2)("/api/organizations/".concat(null==t?void 0:t.uuid,"/spotlight/action"),"POST",{enabled:!!e,onSuccess:()=>{a.invalidateQueries({queryKey:[l.vi,null==e?void 0:e.uuid,null==t?void 0:t.uuid]})}})}},30586:(e,t,a)=>{a.d(t,{L:()=>s,f:()=>n});var s=function(e){return e.CLAUDE_CODE="claude_code",e.ORG_ENABLE_INTEGRATIONS="org_enable_integrations",e.MONKEYS_IN_A_BARREL="monkeys_in_a_barrel",e.AZURE_KNIGHT_GALLANT="azure_knight_gallant",e.RESEARCH_AND_MCP="research_and_mcp",e.ARTIFACTS_GALLERY="artifacts_gallery",e.MCP_DIRECTORY="mcp_directory",e.MEMORY_SEARCH="memory_search",e.MEMORY_SYNTHESIS="memory_synthesis",e.VOLDEMORT_LUNA_LOVEGOOD="voldemort_luna_lovegood",e.PENGUIN_PARROT_WALNUT="penguin_parrot_walnut",e}({}),n=function(e){return e.INTERACTED="interacted",e.DISMISSED="dismissed",e.NOT_TARGETED="not_targeted",e}({})},35415:(e,t,a)=>{a.d(t,{EY:()=>r,jc:()=>o});var s=a(1613),n=a(64328),l=a(66365);let i=()=>{let{activeOrganization:e}=(0,n.YL)(),t=null==e?void 0:e.uuid,a=(0,n.h0)(),i=(0,l.useLayer)("trials_freemium"),r=!a&&(i.get("free_thinking",!1)||i.get("free_opus",!1))&&!!t;return(0,s.Sk)("/api/organizations/".concat(t,"/feature_limits"),{queryKey:["FEATURE_LIMITS",t],enabled:r,staleTime:3e5})},r=()=>{let{data:e,...t}=i(),a=null==e?void 0:e.limits.find(e=>"thinking"===e.feature);return{...t,data:a}},o=()=>{let{data:e,...t}=i(),a=null==e?void 0:e.limits.find(e=>"opus_4"===e.feature);return{...t,data:a}}},38695:(e,t,a)=>{a.d(t,{V:()=>aO});var s=a(2348),n=a(54568),l=a(19736),i=a(59922),r=a(21266),o=a(68067),d=a(9679),c=a(72902),u=a(39109),m=a(61295),p=a(7620),h=a(10369),f=a(86141),x=a(9596),g=a(46793),y=a(83158),v=a(47479),j=a(18800);let b=e=>{let{attachments:t,files:a,syncSourceResults:s,onRemoveAttachment:l,onRemoveFile:i,onRemoveSyncSource:r,isUploadingFile:o,isUploadingSync:d}=e;return(0,n.jsxs)("div",{className:"border-border-300/25 border-t-0.5 rounded-b-2xl bg-bg-100 !p-3.5 !m-0 flex flex-row overflow-x-auto gap-3 px-3.5 py-2.5 -my-1",children:[t.map((e,t)=>(0,n.jsx)(y.NM,{file:e,size:"md",onRemoveFile:()=>l(t),isEditable:!0},t)),a.map((e,t)=>(0,n.jsx)(y.NM,{file:e,showWarnings:!0,size:"md",onRemoveFile:()=>i(t),isEditable:!0},e.file_uuid)),(0,n.jsx)(v.NG,{isShown:o}),s.map(e=>{let{syncSource:t,uuid:a}=e;return(0,n.jsx)(j.V,{uuid:a,syncSource:t,onRemove:()=>r(a),isEditable:!0},a)}),(0,n.jsx)(v.NG,{isShown:d})]})};var w=a(42605),M=a(55188),_=a(89568),A=a(88775),k=a(73619),C=a(44894),N=a(45054),S=a(2e3),E=a(59666),I=a(79052),T=a(22167),O=a(51561),R=a(49629),D=a(35580),L=a(96614),P=a(87784),F=a(71462),z=a(18727),G=a(24407),U=a(17421),Y=a(86545),H=a(47831);let V=e=>{var t,a;let{model:s,projectUuid:l}=e,{allModelOptions:i}=(0,Y.A9)(),r=(0,H.ED)(l),o=(0,H.Pb)(l),d=null!=(a=null==(t=i.find(e=>e.model===s))?void 0:t.slow_kb_warning_threshold)?a:155e3,c=!o&&(null!=r?r:0)>d?(0,n.jsx)("div",{className:"max-md:hidden",children:(0,n.jsx)(E.A,{defaultMessage:"Large knowledge may slow responses",id:"d6mr4c6d+8"})}):void 0;return(0,n.jsx)("div",{className:"text-text-400 text-xs ml-2",children:null!=c?c:void 0})};var W=a(52135),B=a(64328),K=a(60687),J=a(14691),q=a(23812),X=a(87483),$=a(67453),Q=a(47592),Z=a(30586),ee=a(95617),et=a(65315),ea=a(17560),es=a(19977),en=a(69287),el=a(66365),ei=a(35415),er=a(30541),eo=a(8468),ed=a(74326),ec=a(10665),eu=a(97208);let em=e=>{let{remaining:t,total:a}=e;return(0,n.jsxs)("span",{className:"inline-flex items-center gap-0.5 text-accent-secondary-100 bg-bg-000 border-0.5 border-border-300 rounded-full px-2 py-0.5 text-xs ml-1",children:[(0,n.jsx)("span",{children:t}),(0,n.jsx)("span",{children:"/"}),(0,n.jsx)("span",{children:a})]})};var ep=a(66912);let eh=e=>{let{model:t}=e,a=t.name.replace("Claude",""),s=a.startsWith("\uD83E\uDD2B")?(0,n.jsx)($.Tooltip,{tooltipContent:a,children:(0,n.jsx)("span",{children:"\uD83E\uDD2B"})}):a;return(0,n.jsx)("div",{className:"font-claude-response inline-flex gap-[3px] text-[14px] h-[14px] leading-none items-baseline",children:(0,n.jsx)("div",{className:"flex items-center gap-[4px]",children:(0,n.jsx)("div",{className:"whitespace-nowrap select-none",children:s})})})};var ef=a(74813),ex=a(22147),eg=a(27541);let ey=e=>{let{anchorRef:t,onClose:a,onSelectModel:s}=e,l=(0,eg.useRouter)(),i=(0,B.zc)(),d=(0,B.O9)(),c=(0,B.mV)(),{mutateAsync:m}=(0,er.x)(),{allModelOptions:h}=(0,Y.A9)(),f=(0,et.wc)(),{track:x}=(0,ef.st)(),{value:g}=(0,o.fS)("voldemort_luna_lovegood"),y=f[et.m],v=h.find(e=>e.model===y);(0,p.useEffect)(()=>{v&&g&&x({event_key:"claudeai.model_upsell.tooltip.viewed",model_id:v.model})},[v,g,x]);let j=async()=>{await m({spotlight:Z.L.VOLDEMORT_LUNA_LOVEGOOD,action:Z.f.DISMISSED}),x({event_key:"claudeai.model_upsell.tooltip.dismissed",model_id:null==v?void 0:v.model}),a()},b=async()=>{a(),await m({spotlight:Z.L.VOLDEMORT_LUNA_LOVEGOOD,action:Z.f.INTERACTED}),x({event_key:"claudeai.model_upsell.tooltip.clicked",model_id:null==v?void 0:v.model}),l.push("/upgrade")},w=async()=>{v&&s&&s(v.model),a(),await m({spotlight:Z.L.VOLDEMORT_LUNA_LOVEGOOD,action:Z.f.INTERACTED}),x({event_key:"claudeai.model_upsell.tooltip.clicked",model_id:null==v?void 0:v.model})};return v&&g?(0,n.jsx)(u.N,{children:(0,n.jsxs)(ex.U,{anchorRef:t,side:"bottom",align:"start",onClose:j,introDelay:.2,accentColor:"secondary",children:[(0,n.jsx)(q.$,{variant:"ghost",size:"icon_xs",onClick:j,className:"!absolute !top-2 !right-2 !text-accent-secondary-000 hover:!text-accent-secondary-100 !w-6 !h-6 !p-0 !rounded-md hover:!bg-accent-secondary-100/10",children:(0,n.jsx)(J.X,{size:12})}),(0,n.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsx)("p",{className:"font-base-bold text-accent-secondary-000 pr-6",children:(0,n.jsx)(r.YX,{id:"twilight_forest_echo"})}),(0,n.jsx)("p",{className:"font-base text-accent-secondary-000",children:(0,n.jsx)(r.YX,{id:"silver_mountain_breeze"})})]}),(0,n.jsx)("div",{className:"space-y-2",children:d||i||c?(0,n.jsx)(q.$,{variant:"outline",size:"sm",onClick:w,className:"w-full !bg-transparent !border-accent-secondary-200 !text-accent-secondary-000 hover:!bg-accent-secondary-100/10 !rounded-lg font-small-bold",children:(0,n.jsx)(r.YX,{id:"emerald_river_dawn"})}):(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(q.$,{variant:"outline",size:"sm",onClick:b,className:"w-full !bg-transparent !border-accent-secondary-100 !text-accent-secondary-000 hover:!bg-accent-secondary-100/10 !rounded-lg font-small-bold",children:(0,n.jsx)(r.YX,{id:"crystal_meadow_path"})})})})]})]})}):null};function ev(){let e=(0,s._)(["\n  uppercase\n  mt-0.3\n  bg-accent-pro-100/10\n  text-accent-pro-000\n  rounded-full\n  px-2\n  ml-2\n  -mr-1\n  border-0.5\n  border-accent-pro-100/10\n  leading-4\n  h-4\n  text-[0.6rem]\n  flex-shrink-0\n"]);return ev=function(){return e},e}function ej(){let e=(0,s._)(["\n  border-0.5\n  border-border-300\n  -mr-1\n  ml-2\n  translate-y-px\n  rounded-full\n  px-2\n  py-px\n  text-xs\n  text-text-500\n  group-hover:bg-bg-100\n"]);return ej=function(){return e},e}let eb=i.J.div(ev()),ew=i.J.div(ej()),eM=(0,n.jsx)(E.A,{defaultMessage:"Upgrade to Claude Pro to use our best and latest models",id:"GFsmqWxmnh"}),e_={model:"missing-model",name:"Legacy Model",description:"",inactive:!0},eA=e=>{var t,a;let s,{model:l,currentModelOption:i,opensInNewChat:o,onSelect:d,tag:u,tooltip:m,onUpgradeClick:f,isRestrictedBySeatTier:x}=e,g=(0,h.A)(),y=(0,p.useMemo)(()=>({"haiku-3-5-description":(0,n.jsx)(E.A,{defaultMessage:"Fastest model for daily tasks",id:"75wJbzj8Tm",description:"A description of the AI model"}),"sonnet-3-7-description":(0,n.jsx)(E.A,{defaultMessage:"Our most intelligent model yet",id:"WW0Apyq96E",description:"A description of the AI model"}),"telescope-cinnamon-lampshade":(0,n.jsx)(r.YX,{id:"telescope_cinnamon_lampshade"}),"origami-glacier-marmalade":(0,n.jsx)(r.YX,{id:"origami_glacier_marmalade"})}),[]),{data:v}=(0,ei.jc)(),j=(0,B.h0)(),b=(0,el.useLayer)("trials_freemium"),w=l.model===(null==i?void 0:i.model),M=l.name.replace("Claude","").trim(),_=!j,A=b.get("free_opus",!1),k=l.model.startsWith("claude-opus-4");if(k&&_&&A&&v&&void 0!==v.remaining&&v.resets_at){let e=new Date(1e3*v.resets_at),t=g.formatDate(e,{month:"short",day:"numeric"});s=g.formatMessage({defaultMessage:"{remaining} remaining until {date}",id:"httnsxXSeU"},{remaining:v.remaining,date:t})}let C=k&&_&&A&&(null==v?void 0:v.remaining)===0,N=C?"Upgrade":u,S=x&&!w||C&&"Upgrade"!==N;return(0,n.jsx)($.Tooltip,{tooltipContent:m,side:"right",children:(0,n.jsx)("div",{children:(0,n.jsxs)(X.tJ,{onClick:()=>{(!x||w)&&(w||N||C?("Upgrade"===N||"PRO"===N||C)&&(null==f||f()):d(l))},className:(0,c.A)("group pr-1 py-1.5",("Upgrade"===N||"PRO"===N||C)&&"cursor-pointer",x&&!w&&"opacity-40 cursor-not-allowed"),disabled:S,children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("div",{className:"flex-1 text-sm",children:(0,n.jsx)("div",{className:"flex items-center gap-1.5",children:(0,n.jsx)("div",{children:M})})}),N&&!w&&"Upgrade"===N?(0,n.jsx)(ep.M,{as:"button",className:"mt-0.3 ml-2 -mr-1 flex-shrink-0",onClick:e=>{e.stopPropagation(),null==f||f()}}):N&&!w?(0,n.jsx)(eb,{children:N}):null,!w&&o&&!N&&!C&&(0,n.jsx)(ew,{children:(0,n.jsx)(E.A,{defaultMessage:"New chat",id:"ATDyLPIoxz"})})]}),(0,n.jsxs)("div",{className:"text-text-500 pr-4 text-xs mt-1",children:[null!=(a=y[null!=(t=l.description_i18n_key)?t:""])?a:l.description,s&&(0,n.jsx)("div",{className:"mt-0.5",children:s})]})]}),w&&(0,n.jsx)(ea.J,{className:"text-accent-secondary-100 mb-1 mr-1.5",size:16,weight:"bold"})]})})})},ek=e=>{let{models:t,currentModelOption:a,opensInNewChat:s,handleModelSelect:l,hasMultiModalContent:i,upsellMode:o}=e,d=(0,p.useMemo)(()=>({"velvet-bicycle-thunderstorm":(0,n.jsx)(r.YX,{id:"velvet_bicycle_thunderstorm"})}),[]),c=(0,eu.Ob)(),u=(0,B.h0)(),m=(0,el.useLayer)("trials_freemium"),h=(0,B.Ox)(),f=m.get("free_opus",!1),x=!u,g=()=>{window.location.href="/upgrade"};return(0,n.jsx)(n.Fragment,{children:t.map(e=>{let t=h(e.model);return(0,n.jsx)(eA,{model:e,currentModelOption:a,opensInNewChat:s,onSelect:l,hasMultiModalContent:i,tag:o&&e.model!==(null==a?void 0:a.model)&&x&&!(f&&e.model.startsWith("claude-opus-4")||e.model.startsWith("claude-sonnet-4"))?c?"Upgrade":"PRO":void 0,tooltip:(e=>{var t,s;return h(e.model)&&e.model!==(null==a?void 0:a.model)?(0,n.jsx)(E.A,{defaultMessage:"This model is not available for your current plan",id:"FhHD7lBh9l"}):o&&e.model!==(null==a?void 0:a.model)&&x&&!(f&&e.model.startsWith("claude-opus-4")||e.model.startsWith("claude-sonnet-4"))?eM:null!=(s=d[null!=(t=e.notice_text_i18n_key)?t:""])?s:e.notice_text})(e),onUpgradeClick:g,isRestrictedBySeatTier:t},e.model)})})},eC=e=>{let{selectedModel:t,conversationUuid:a,onSelect:s,placement:l,hasMultiModalContent:i,open:r,onOpenChange:d,isNewConversation:u}=e,h=!u,{allModelOptions:f,mainModels:x,overflowModels:g}=(0,Y.A9)(),y=(0,L.Z3)(a||null),v=null!=t?t:y,j=(0,p.useRef)(null),[b,w]=(0,p.useState)(!1),M=(0,ec.v)("paprika_mode"),_=(0,ed.j)(),A=(0,eo.G8)(),{toggleConversationSetting:k}=(0,ec.r)(),C=(0,et.wc)(),{mutateAsync:N}=(0,er.x)(),S=(0,B.Ox)(),I=f.find(e=>e.model===v);I||(I=e_);let{value:T}=(0,o.fS)("model_selector_enabled"),O=(0,B.h0)(),{selectedTier:R,shouldOverrideFeatureAccess:D,isTierSelectorEnabled:P}=(0,K.t)(),F=P&&D&&!!R,z=F?R===ee.d7.FREE:!T&&!O,G=(0,el.useLayer)("trials_freemium").get("free_opus",!1),{data:U}=(0,ei.jc)(),{setStickyModelPreference:H}=(0,W.F)(),[V,$]=(0,p.useState)(!1),{value:ea}=(0,o.fS)("voldemort_luna_lovegood"),{data:eu}=(0,er.g)(),ep=v.startsWith("claude-opus-4")&&!O&&G&&U&&void 0!==U.remaining&&void 0!==U.limit;(0,p.useEffect)(()=>{ea&&(null==eu?void 0:eu.spotlight)===Z.L.VOLDEMORT_LUNA_LOVEGOOD&&(I.model===C[et.m]?N({spotlight:Z.L.VOLDEMORT_LUNA_LOVEGOOD,action:Z.f.NOT_TARGETED}).catch(e=>(0,en.Cp)(e,{extra:{message:"Failed to set spotlight action",spotlight:Z.L.VOLDEMORT_LUNA_LOVEGOOD,action:Z.f.NOT_TARGETED}})):w(!0))},[null==eu?void 0:eu.spotlight,ea,I,C,N]);let ef=e=>{if(S(e.model))return;let t=!O&&G;(T||F&&"free"!==R||t)&&(M&&!_(e.model)&&k("paprika_mode",null),A(e.model)||k("compass_mode",null),H(e.model),s(e))};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(X.ms,{className:(0,c.A)("relative"),..."bottom"===l?{side:"top",sideOffset:4}:{side:"bottom",sideOffset:4},align:"end",unstyledTrigger:!0,onCloseAutoFocus:e=>e.preventDefault(),open:r,onOpenChange:e=>{d&&d(e),e||$(!1)},trigger:(0,n.jsx)(m.P.div,{initial:{opacity:0,scale:.6},animate:{opacity:1,scale:1},transition:{type:"spring",stiffness:700,damping:32,mass:.7},className:"overflow-hidden shrink-0 p-1 -m-1",children:(0,n.jsxs)(q.$,{ref:j,variant:"ghost",size:"sm","data-testid":"model-selector-dropdown",append:(0,n.jsx)(J.bi,{className:"opacity-75"}),children:[(0,n.jsx)(eh,{model:I}),ep&&(0,n.jsx)(em,{remaining:U.remaining,total:U.limit})]})}),children:[(0,n.jsx)(ek,{models:x,currentModelOption:I,opensInNewChat:h,handleModelSelect:ef,hasMultiModalContent:i,upsellMode:z}),g.length>0&&((0,Q.Fr)()?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(X.DG,{}),(0,n.jsx)("div",{className:"text-xs text-text-500 pt-2 pb-1 px-2",children:(0,n.jsx)(E.A,{defaultMessage:"More models",id:"9yxvA9+l6B"})}),(0,n.jsx)(ek,{models:g,currentModelOption:I,opensInNewChat:h,handleModelSelect:ef,hasMultiModalContent:i,upsellMode:z})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(X.DG,{}),(0,n.jsxs)(X.MS,{children:[(0,n.jsxs)(X.Wn,{className:"pl-2 py-1.5 gap-2",children:[(0,n.jsx)("div",{className:"group-hover:text-text-100  text-sm",children:(0,n.jsx)(E.A,{defaultMessage:"More models",id:"9yxvA9+l6B"})}),(0,n.jsx)(es.K,{className:"text-text-500 group-hover:text-text-300 mr-1",size:16})]}),(0,n.jsx)(X.cm,{children:(0,n.jsx)(X.FV,{sideOffset:4,children:(0,n.jsx)(ek,{models:g,currentModelOption:I,opensInNewChat:h,handleModelSelect:ef,hasMultiModalContent:i,upsellMode:z})})})]})]}))]}),b&&(0,n.jsx)(ey,{anchorRef:j,onClose:()=>w(!1),onSelectModel:e=>{let t=f.find(t=>t.model===e);t&&ef(t)}})]})};var eN=a(11739),eS=a(72446),eE=a(13784),eI=a(23820),eT=a(3075);let eO=e=>{let{isOpen:t,onClose:a,onConfirm:s,isLoading:l=!1}=e,i=(0,p.useCallback)(e=>{"Enter"!==e.key||l||s()},[s,l]);return(0,p.useEffect)(()=>(t&&window.addEventListener("keydown",i),()=>{window.removeEventListener("keydown",i)}),[t,i]),(0,n.jsxs)(eT.aF,{isOpen:t,onClose:a,title:(0,n.jsx)(E.A,{defaultMessage:"Want to stop researching?",id:"H+/TRHeeuc"}),children:[(0,n.jsx)("div",{className:"mt-4 mb-6",children:(0,n.jsx)(E.A,{defaultMessage:"This can’t be undone. If you want to research this topic again, you can ask in this chat or start a new session.",id:"RuV1dagwp6"})}),(0,n.jsxs)(eT.vW,{children:[(0,n.jsx)(q.$,{variant:"danger",onClick:s,disabled:l,autoFocus:!0,children:(0,n.jsx)(E.A,{defaultMessage:"Stop research",id:"l3tljn/kXe"})}),(0,n.jsx)(q.$,{variant:"secondary",onClick:a,children:(0,n.jsx)(E.A,{defaultMessage:"Keep researching",id:"ODR/0L48DC"})})]})]})},eR=e=>{let{prompt:t,files:a,attachments:s,syncSourceUuids:l,conversation:i,onSend:r,onStop:o,isSending:d,isDisabled:c,disabledReason:m,currentCompassTask:p}=e,h=(()=>{if(p)return"researching";if(i){let{isSampling:e,isStoppingSampling:t}=i;if(e)return t?"stopping":"sampling"}return t.length>0||a.length>0||s.length>0||l.length>0?"drafting":"empty"})();return(0,n.jsx)(u.N,{children:"sampling"===h||"stopping"===h?(0,n.jsx)(eL,{onStop:o,isLoading:"stopping"===h},"stop"):"researching"===h?(0,n.jsx)(eD,{conversationId:null==i?void 0:i.id,taskId:p},"stop_research"):(0,n.jsx)(eP,{isSending:d,isDisabled:c,disabledReason:m,onSend:r},"send")})},eD=e=>{let{conversationId:t,taskId:a}=e,s=(0,h.A)(),[l,i]=(0,p.useState)(!1),{mutate:r,isPending:o}=(0,eo.hs)(t,null!=a?a:""),d=(0,p.useCallback)(()=>{t&&a&&(r(),i(!1))},[t,a,r]),c=(0,p.useCallback)(()=>{i(!0)},[]);return(0,p.useEffect)(()=>{let e=e=>{"Escape"!==e.key||o||i(!0)};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[o]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)($.Tooltip,{tooltipContent:(0,n.jsx)(E.A,{defaultMessage:"Stop Claude response",id:"BonFmr6O3r"}),keyboardShortcut:"Esc",children:(0,n.jsx)(q.$,{variant:"secondary",size:"icon_sm",className:"!rounded-lg",onClick:c,"aria-label":s.formatMessage({defaultMessage:"Stop response",id:"RANC4/S/j1"}),children:o?(0,n.jsx)(eS.N,{className:"animate-spin",size:18}):(0,n.jsx)(eE.X,{weight:"bold",size:16})})}),(0,n.jsx)(eO,{isOpen:l,onClose:()=>i(!1),onConfirm:d,isLoading:o})]})},eL=e=>{let{onStop:t,isLoading:a}=e,s=(0,h.A)();return(0,p.useEffect)(()=>{let e=e=>{"Escape"!==e.key||a||t()};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[t,a]),(0,n.jsx)($.Tooltip,{tooltipContent:(0,n.jsx)(E.A,{defaultMessage:"Stop Claude response",id:"BonFmr6O3r"}),keyboardShortcut:"Esc",children:(0,n.jsx)(q.$,{variant:"secondary",size:"icon_sm",className:"!rounded-lg",onClick:()=>t(),"aria-label":s.formatMessage({defaultMessage:"Stop response",id:"RANC4/S/j1"}),children:a?(0,n.jsx)(eS.N,{className:"animate-spin",size:18}):(0,n.jsx)(eE.X,{weight:"bold",size:16})})})},eP=e=>{let{isSending:t,isDisabled:a,disabledReason:s,onSend:l}=e,i=(0,h.A)(),r=(0,p.useCallback)(()=>{(0,eN.R)("event","msg_sent",{location:"chat_input"}),l()},[l]);return(0,n.jsx)(m.P.div,{initial:{scale:.3,opacity:0},animate:{scale:1,opacity:1,transition:{delay:.15,scale:{type:"spring",stiffness:600,damping:30},opacity:{duration:.1}}},children:(0,n.jsx)($.Tooltip,{tooltipContent:s,children:(0,n.jsx)("div",{children:(0,n.jsx)(q.$,{variant:"flat",size:"icon_sm",className:"!rounded-lg !h-8 !w-8",disabled:a,onClick:()=>r(),"aria-label":i.formatMessage({defaultMessage:"Send message",id:"Xx0WZVz8QS"}),children:t?(0,n.jsx)(eS.N,{className:"animate-spin",weight:"bold",size:16}):(0,n.jsx)(eI.D,{weight:"bold",size:16})})})})})};var eF=a(90215),ez=a(54671),eG=a(3424),eU=a(785),eY=a(98304),eH=a(85705);let eV=p.forwardRef((e,t)=>{let{indicatorActive:a,disabled:s,text:l,tag:i,className:r,buttonClassName:o,tooltip:d,hideIndicatorText:u,icon:p,showRemoveIcon:h,showCaretIcon:f,...x}=e,g=(0,n.jsx)(m.P.div,{className:(0,c.A)("flex",l?"shrink min-w-8":"shrink-0",r),initial:{opacity:0,scale:.6},animate:{opacity:1,scale:1},transition:{type:"spring",stiffness:700,damping:32,mass:.7},children:(0,n.jsxs)(q.$,{variant:"unstyled",size:"unset",className:(0,c.A)("border-0.5 transition-all h-8 min-w-8 rounded-lg flex items-center px-[7.5px] group !pointer-events-auto !outline-offset-1",a?"text-accent-secondary-100 bg-accent-secondary-100/[8%] border-accent-secondary-200/20":"text-text-300 border-border-300",!s&&(a?"active:scale-[0.98] hover:text-accent-secondary-000 hover:bg-accent-secondary-100/[12%]":"active:scale-[0.98] hover:text-text-200/90 hover:bg-bg-100"),o),disabled:s,"aria-pressed":a,...x,children:[p,!!l&&!u&&(0,n.jsxs)("div",{className:"min-w-0 flex items-center",children:[(0,n.jsx)("p",{className:"min-w-0 pl-1 text-xs text-ellipsis whitespace-nowrap break-words overflow-hidden shrink",children:l}),!!i&&(0,n.jsx)(eH.u,{tag:i,className:"!top-0 !ml-1"})]}),f&&(0,n.jsx)(eU.a,{size:12,className:"ml-1 opacity-70"}),!s&&h&&(0,n.jsx)("div",{className:"duration-100 w-0 group-hover:w-3 opacity-0 group-hover:opacity-70 transition-all ml-0 group-hover:ml-1",children:(0,n.jsx)(eY.X,{size:12})})]})});return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)($.Tooltip,{tooltipContent:d,disableHoverableContent:!0,side:"bottom",align:"center",children:g})})});eV.displayName="InputMenuButton";let eW=e=>{let{menuItem:t,handleClick:a,limitInfo:s,...l}=e,{handleClickItem:i}=(0,ez.CH)();if(!t||t.isDisabled||"pro"===t.tag||"new chat"===t.tag||!t.indicatorActive)return null;let{indicatorActive:r}=t,o=!!t.menuItemHidden,d=s?(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[l.icon,(0,n.jsx)(em,{remaining:s.remaining,total:s.total})]}):l.icon;return(0,n.jsx)(eV,{onClick:null!=a?a:()=>i(t),indicatorActive:r,disabled:o,showRemoveIcon:!0,...l,icon:d})},eB=e=>{let{hideIndicatorText:t,hideIndicators:a}=e,s=(0,h.A)();return a?null:(0,n.jsx)(eF.o,{children:(0,n.jsxs)("div",{className:"flex flex-row items-center gap-2 min-w-0",children:[(0,n.jsx)(eK,{}),(0,n.jsx)(eJ,{itemKey:ee.xd.COMPASS,tooltip:s.formatMessage({defaultMessage:"Research mode",id:"lYf0AUt2RH"})}),(0,n.jsx)(eq,{hideIndicatorText:t}),(0,n.jsx)(eX,{hideIndicatorText:t})]})})},eK=()=>{let e=(0,h.A)(),{menuView:{rootItems:t}}=(0,ez.tl)(),a=(0,B.h0)(),s=(0,el.useLayer)("trials_freemium"),{data:l}=(0,ei.EY)(),i=t.find(e=>e.key===ee.xd.EXTENDED_THINKING),r=(0,o.P0)("thinking_sticky_default_on","hide_thinking_chat_indicator",!1,o.e_);if(!i||r)return null;let d=s.get("free_thinking",!1),c=!a&&d&&l&&void 0!==l.remaining&&void 0!==l.limit&&i.indicatorActive;return(0,n.jsx)(eW,{hideIndicatorText:!0,menuItem:i,icon:i.icon,tooltip:e.formatMessage({defaultMessage:"Extended thinking",id:"5j4WakKa2u"}),limitInfo:c?{remaining:l.remaining,total:l.limit}:null})},eJ=e=>{let{itemKey:t,tooltip:a}=e,{menuView:{rootItems:s}}=(0,ez.CH)(),{menuView:{rootItems:l}}=(0,ez.tl)(),i=[...s,...l].find(e=>e.key===t);return i?(0,n.jsx)(eW,{hideIndicatorText:!0,menuItem:i,icon:i.icon,tooltip:a}):null},eq=e=>{let{hideIndicatorText:t}=e,{menuView:{rootItems:a}}=(0,ez.tl)(),s=(0,eG.pi)(),l=a.find(e=>"styles"===e.key);return l&&"optionGroup"===l.type?(0,n.jsx)(eW,{hideIndicatorText:t,menuItem:l,icon:(0,n.jsx)(J.P_,{size:16}),text:l.secondaryText,buttonClassName:"!shrink",handleClick:()=>s("Default")}):null},eX=e=>{let{hideIndicatorText:t}=e,{menuView:{rootItems:a}}=(0,ez.CH)(),s=(0,eG.$V)(),l=a.find(e=>e.key===ee.xd.PROJECTS);return l&&"optionGroup"===l.type?(0,n.jsx)(eW,{"data-testid":"projects-indicator",hideIndicatorText:t,menuItem:l,icon:(0,n.jsx)(J.Jt,{size:16}),text:l.secondaryText,buttonClassName:"!shrink-[2]",handleClick:()=>s(void 0)}):null},e$=e=>{let{style:t,children:a,duration:s=200,delay:l=0,easing:i="ease-in-out",className:r="",onTransitionEnd:o=()=>void 0}=e,d=(0,p.useRef)(null),[c,u]=(0,p.useState)("auto"),m=(0,p.useRef)(null);return(0,p.useEffect)(()=>{if(d.current)return m.current=new ResizeObserver(e=>{for(let t of e){let e=t.contentRect.height;u("".concat(e,"px"))}}),m.current.observe(d.current),()=>{m.current&&m.current.disconnect()}},[]),(0,n.jsx)("div",{style:{height:c,transitionDelay:"".concat(l,"ms"),transitionTimingFunction:i,transitionDuration:"".concat(s,"ms"),transitionProperty:"height",...t},className:r,onTransitionEnd:()=>{o()},children:(0,n.jsx)("div",{className:"w-full",ref:d,children:a})})};var eQ=a(16256),eZ=a(89835),e0=a(50571),e1=a(15912),e5=a(78067),e2=a(97595),e6=a(93220),e4=a(65016),e3=a(85524);let e8=e=>{let{path:t}=e,a={drive:(0,h.A)().formatMessage({defaultMessage:"Paste a Drive link in the chat to upload it",id:"ZJxjEilF0C"})},s=t&&t in a?a[t]:null;return s?(0,n.jsxs)("div",{className:"w-full bg-bg-100 border-t-0.5 border-border-300 opacity-80 text-text-500 flex flex-row items-center gap-2.5 px-3 py-1 font-small",children:[(0,n.jsx)(e3.R,{size:14}),s]}):null};var e9=a(19920),e7=a(16),te=a(26982);let tt=e=>{let{tooltip:t,text:a,tag:s,showCaretIcon:l,indicatorActive:i=!1,hideIndicatorText:r,canShowDot:o,onDoubleClick:d,menuType:c,menuView:u,inputMenuIsOpen:f,setInputMenuIsOpen:x,disabled:g,disabledTooltip:y}=e,v=(0,h.A)(),j=(0,p.useRef)(null),{rootItems:b}=u,w={indicatorActive:i,text:a||"",tooltip:t},M=(0,eu.gB)(),_="tools"===c&&M;if(g&&y)w.tooltip=y;else if(_){w.tooltip=v.formatMessage({defaultMessage:"Style",id:"7mL9QEUFav"});let e=b.find(e=>"option"===e.type&&e.isChecked);e&&"Default"!==e.key&&(w.indicatorActive=!0,w.text=e.label)}let A=b.filter(e=>{let{indicatorActive:t}=e;return t}).length,k=(0,n.jsxs)("div",{className:"flex flex-row items-center justify-center gap-1",children:["plus"===c?(0,n.jsx)(m.P.div,{animate:{rotate:45*!!f},transition:{type:"spring",stiffness:650,damping:32,duration:.1},children:(0,n.jsx)(e7.F,{size:16})}):"research"===c?(0,n.jsx)(J.is,{size:16}):_?(0,n.jsx)(J.P_,{size:16}):(0,n.jsx)(te.l,{size:16}),(0,n.jsx)(ta,{isShown:o&&A>0})]}),C="plus"===c?v.formatMessage({defaultMessage:"attachments",id:"whkEDsy4V6",description:"Menu heading that will be used within the string ‘Open {menuType} menu’"}):"research"===c?v.formatMessage({defaultMessage:"research",id:"PUcnDUZD0/",description:"Menu heading that will be used within the string ‘Open {menuType} menu’"}):_?v.formatMessage({defaultMessage:"styles",id:"G91kUvt+GD",description:"Menu heading that will be used within the string ‘Open {menuType} menu’"}):v.formatMessage({defaultMessage:"tools",id:"yd3KUET1r+",description:"Menu heading that will be used within the string ‘Open {menuType} menu’"});return(0,n.jsx)("div",{className:"flex items-center",children:(0,n.jsx)(eV,{disabled:g,tag:s,showCaretIcon:l,hideIndicatorText:!!r,icon:k,id:"input-".concat(c,"-menu-trigger"),ref:j,onClick:()=>{x(!f)},onKeyDown:e=>{f||"Space"!==e.code&&"ArrowDown"!==e.code||x(!0)},onDoubleClick:d?e=>{e.preventDefault(),null==d||d()}:void 0,"aria-expanded":f,"aria-haspopup":"listbox","aria-controls":"input-menu","data-testid":"input-menu-".concat(c),"aria-label":v.formatMessage({defaultMessage:"Open {menuType} menu",id:"Larie1pvYJ"},{menuType:C}),...w})})},ta=e=>{let{isShown:t}=e;return!!t&&(0,n.jsx)(m.P.div,{initial:{width:0,opacity:0},animate:{width:"auto",opacity:1},children:(0,n.jsx)("div",{className:"h-1.5 w-1.5 bg-accent-secondary-200 rounded-full mr-0.5"})})};var ts=a(81023);let tn={forward:{initial:{x:"20%",opacity:0},animate:{x:0,opacity:1}},back:{initial:{x:"-20%",opacity:0},animate:{x:0,opacity:1}},none:{initial:{x:0},animate:{x:0}}},tl=e=>{let{placement:t,canShowDot:a}=e,s=(0,p.useRef)(null),l=(0,h.A)(),i=(0,ez.tl)(),r=(0,e0.AY)(),o=(0,e0.M8)();return(0,n.jsxs)("div",{ref:s,children:[(0,n.jsx)(td,{canShowDot:a,placement:t,menuType:"tools",...i,tooltip:l.formatMessage({defaultMessage:"Search and tools",id:"lhFEU+uT6i"})}),(0,n.jsx)(e1.V,{canShowNux:o,anchorRef:s,side:"bottom",text:l.formatMessage({defaultMessage:"Add your everyday tools and apps to get the best out of Claude",id:"olaMSdwPL6"}),id:"research-rmcp-tools-nux-1",nuxItem:{dateAdded:"2025-05-14",priority:e2.c.HIGH,showAfterOthersDismiss:!0}}),(0,n.jsx)(e1.V,{canShowNux:r,anchorRef:s,side:"bottom",text:l.formatMessage({defaultMessage:"MCP is here now! Access integrations in this menu.",id:"NkJar0wFk+"}),id:"mcp-tools-nux-1",nuxItem:{dateAdded:"2025-04-29",priority:e2.c.HIGH,showAfterOthersDismiss:!0}})]})},ti=e=>{let{placement:t,canShowDot:a}=e,s=(0,ez.CH)(),l=(0,eu.lS)();return(0,n.jsx)(td,{placement:t,menuType:"plus",canShowDot:a,disabled:l,disabledTooltip:l?"Coming soon":void 0,...s})},tr=e=>{let t,{hideIndicatorText:a}=e,s=(0,h.A)(),{conversation:l,model:i,setModel:r}=(0,w.o)(),o=(0,eu.lS)(),d=(0,ec.v)("compass_mode"),{toggleResearchMode:c,canAutoEnableWebSearch:u}=(0,e4.D$)(l),m=(0,eo.g7)(),p=(0,eo.BU)(),f=(0,eo.Gm)(l),x=(0,L.Z3)((null==l?void 0:l.id)||null),g=(0,eo.G8)()(null!=i?i:x),y=(0,eo.G8)()(x),v=!l&&!g&&y;if(!m)return null;o?t="Coming soon":p?f||u?g||v||(t=s.formatMessage({defaultMessage:"Select a different model to use this feature",id:"/9vSDy2Wm0"})):t=s.formatMessage({defaultMessage:"Enable a search integration to use research",id:"WyiVeak7w5"}):t=s.formatMessage({defaultMessage:"Your administrator must enable a search tool to use research",id:"CzjOV5rgPZ"});let j=!!t;return(0,n.jsx)(eV,{disabled:j,tooltip:t,hideIndicatorText:a,icon:(0,n.jsx)(J.is,{size:16}),onClick:()=>{j||(v&&r(x),c("advanced"!==d))},indicatorActive:!j&&"advanced"===d,text:s.formatMessage({defaultMessage:"Research",id:"JEe7dVso7F"}),className:"!shrink-0"})},to={id:"mcp-add-connectors-nux",nuxItem:{dateAdded:"2025-07-11",priority:e2.c.HIGH,showAfterOthersDismiss:!0}},td=e=>{let{text:t,tag:a,showCaretIcon:s,indicatorActive:l,canShowDot:i,hideIndicatorText:r,tooltip:o,placement:d,menuType:h,path:f,menuView:x,highlightedItemKey:g,setHighlightedItemKey:y,handleClickItem:v,inputMenuIsOpen:j,setInputMenuIsOpen:b,inputMenuSearchQuery:w,setInputMenuSearchQuery:M,handleBack:_,animationDirection:A,disabled:k,disabledTooltip:C}=e,{currentItems:N}=x,S=(0,eZ.L)(()=>{b(!1)},["mouseup","touchend"]),I=(0,p.useRef)(null),T=(0,p.useRef)(null),O=(0,p.useRef)(null),R=(0,p.useRef)(null),[D,L]=(0,p.useState)(void 0),[P,F]=(0,p.useState)("bottom"===d?"top":"bottom"),[z,G]=(0,p.useState)(0),U=(0,eg.useSearchParams)(),{shouldShow:Y}=(0,e6.z)(to.id,to.nuxItem),H="true"===U.get(e5.HU)&&Y&&"tools"===h;(0,p.useEffect)(()=>{H&&(b(!0),O.current&&(O.current.scrollTop=O.current.scrollHeight))},[H,b]),(0,p.useEffect)(()=>{if(!I.current||!T.current)return;let e=I.current.getBoundingClientRect(),{updatedHeightAvailable:t,updatedDropdownSide:a}=tc({placement:d,triggerRectTop:e.top,triggerRectBottom:e.bottom});L(Math.min(422,t)),F(a);let s=T.current.getBoundingClientRect();G(Math.min(0,window.innerWidth-s.right-8))},[d,j]);let V=(0,eu.Hd)(),W=("plus"===h||"tools"===h)&&V?(0,n.jsx)(e9.s,{path:f,inputMenuSearchQuery:w,setInputMenuSearchQuery:M,handleBack:_}):null;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"relative shrink-0",onClick:e=>{e.preventDefault()},ref:S,children:[(0,n.jsx)("div",{ref:I,children:(0,n.jsx)(tt,{disabled:k,disabledTooltip:C,tag:a,tooltip:o,text:t,showCaretIcon:s,indicatorActive:l,hideIndicatorText:r,canShowDot:i,menuType:h,menuView:x,inputMenuIsOpen:j,setInputMenuIsOpen:b,onDoubleClick:"plus"===h?()=>(0,eG.U_)(d):void 0})}),(0,n.jsx)("div",{ref:T,className:(0,c.A)("w-[20rem] absolute max-w-[calc(100vw-16px)]","top"===P?"bottom-10":"top-10",j?"block":"hidden"),children:(0,n.jsx)(u.N,{children:j&&(0,n.jsx)(m.P.div,{ref:O,initial:{opacity:0,scale:.95,y:"top"===P?8:-8,x:-8},animate:{opacity:1,scale:1,y:0,x:0},exit:{opacity:0,scale:.95,y:"top"===P?8:-8,x:-8},transition:{type:"spring",stiffness:650,damping:23,mass:.6,height:{ease:"easeInOut"}},className:(0,c.A)("relative w-full will-change-transform h-auto overflow-y-auto overscroll-auto flex z-dropdown bg-bg-000 rounded-xl overflow-hidden border-border-300 border-0.5 shadow-diffused shadow-[hsl(var(--always-black)/6%)]","top"===P?"flex-col-reverse":"flex-col"),onMouseEnter:()=>y(null),style:{maxHeight:D?"".concat(D,"px"):void 0,left:z},onClick:e=>{e.stopPropagation(),(0,ts.l)()},children:(0,n.jsxs)(e$,{duration:100,className:(0,c.A)("flex flex-col min-h-0 w-full !ease-out","top"===P?"justify-end":"justify-start"),children:[(0,n.jsxs)("div",{className:"p-1.5 flex flex-col",children:["bottom"===P&&W,(0,n.jsx)(m.P.div,{variants:tn[A],initial:"initial",animate:"animate",className:"flex flex-col",transition:{x:{duration:.15,ease:eQ.A.outCirc},opacity:{duration:.25,ease:"easeInOut"}},children:("top"===P?[...N].reverse():N).filter(e=>{let{menuItemHidden:t}=e;return!t}).map(e=>"addIntegrations"===e.key?(0,n.jsx)("div",{ref:R,children:(0,n.jsx)(eH.$,{item:e,onClick:()=>v(e),isHighlighted:g===e.key})},e.key):(0,n.jsx)(eH.$,{item:e,onClick:()=>v(e),isHighlighted:g===e.key},e.key))},null!=f?f:"root"),"top"===P&&W]}),(0,n.jsx)(e8,{path:f})]})})})})]}),(0,n.jsx)(e1.V,{canShowNux:H&&!!R.current&&j,anchorRef:R,side:"right",text:(0,n.jsx)(E.A,{defaultMessage:"Find and add more of your favorite tools in <span>Add connectors</span>.",id:"2icgWBPsqj",values:{span:e=>(0,n.jsx)("span",{className:"font-bold",children:e})}}),...to})]})},tc=e=>{let{placement:t,triggerRectTop:a,triggerRectBottom:s}=e,n=window.innerHeight-s-8-8;if("bottom"===t){let e=a-76-8;return e<160&&n>e?{updatedDropdownSide:"bottom",updatedHeightAvailable:n}:{updatedDropdownSide:"top",updatedHeightAvailable:e}}{let e=a-8-8;return n<160&&e>n?{updatedDropdownSide:"top",updatedHeightAvailable:e}:{updatedDropdownSide:"bottom",updatedHeightAvailable:n}}},tu=G.z.object({enabled:G.z.boolean(),system_prompt:G.z.string().optional()}),tm=e=>{let{placement:t,isDisabled:a}=e,s=(0,h.A)();(0,o.iW)("prompt_improver_config",{enabled:!1},tu);let{prompt:l}=(0,A.QT)(),i=(0,A.QN)(),{model:r,setModel:d,attachments:c,files:u,syncSourceUuids:m,sendMessage:f,stopSampling:x,conversation:g,isSending:y,isChatSyncing:v,isProjectSyncing:j,isModelSelectorOpen:b,setIsModelSelectorOpen:M,isNewConversation:_,currentCompassTask:k,improvePrompt:C,isImprovingPrompt:N}=(0,w.o)(),S=v||j?s.formatMessage({defaultMessage:"Syncing knowledge...",id:"QuwefnZNVj"}):void 0,E=(0,p.useMemo)(()=>{var e;return[...u,...null!=(e=null==g?void 0:g.files)?e:[]].some(e=>e.file_kind===F.M.Image||e.file_kind===F.M.SanitizedDocument)},[u,g]),I=(0,p.useCallback)(e=>d(e.model),[d]),[T,O]=(0,z.w)({box:"border-box"}),R=O.width||null,D=null===R||R<480,L=null===R||R<396;return(0,U.QJ)(),(0,n.jsxs)("div",{className:"flex gap-2.5 w-full items-center",ref:T,children:[(0,n.jsxs)("div",{className:"relative flex-1 flex items-center gap-2 shrink min-w-0",children:[(0,n.jsx)(ti,{placement:t,canShowDot:null!==R&&L}),(0,n.jsx)(tl,{placement:t,canShowDot:null!==R&&L}),"",(0,n.jsx)(tr,{hideIndicatorText:D}),"",null!==R&&(0,n.jsx)(eB,{hideIndicatorText:D,hideIndicators:L}),(0,n.jsx)(V,{model:r,projectUuid:i})]}),(0,n.jsx)(eC,{selectedModel:r,onSelect:I,hasMultiModalContent:E,placement:t,open:b,onOpenChange:M,isNewConversation:_}),(0,n.jsx)(eR,{isSending:y,isDisabled:a,disabledReason:S,prompt:l,files:u,attachments:c,syncSourceUuids:m,conversation:g,currentCompassTask:k,onSend:()=>f(),onStop:()=>x()})]})};var tp=a(67441),th=a(5231);let tf=e=>{let{disabled:t=!1,enableScreenDrop:a=!1}=e,{onDrop:s}=(0,w.o)();return(0,n.jsx)(tp.wC,{disabled:t,onDrop:s,enableScreenDrop:a,children:(0,n.jsx)(tx,{})})},tx=()=>{let{dragState:e}=(0,tp.t1)(),t=e===tp.mq.DRAGGING_ON_TARGET,a=e===tp.mq.DRAGGING_OFF_TARGET||e===tp.mq.DRAGGING_ON_TARGET;return a?(0,n.jsx)(u.N,{children:a&&(0,n.jsx)(m.P.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},className:"absolute top-0 border border-dashed bg-clip-padding rounded-2xl min-h-4 h-full w-full border-accent-secondary-100 bg-bg-000 overflow-hidden z-10",children:(0,n.jsx)("div",{className:(0,c.A)("flex items-center justify-center h-full w-full transition-colors",t?"bg-accent-secondary-900":"bg-accent-secondary-900/50"),children:(0,n.jsxs)("p",{className:"text-accent-secondary-100 flex flex-row items-center gap-2.5",children:[(0,n.jsx)(th._,{size:20,className:"opacity-50"}),(0,n.jsx)(E.A,{defaultMessage:"Drop files here to add to chat",id:"IYBR/J+nuA"})]})})},"chat-input-drop-zone-overlay")}):null};var tg=a(1613),ty=a(4114),tv=a(13750),tj=a(14935),tb=a.n(tj),tw=a(96547),tM=a(68010);function t_(e){var t,a;let{isOpen:s,onClose:l,prompt:i,serverUuid:r}=e,o=(0,h.A)(),d=(0,p.useCallback)(()=>{m({}),l()},[l]),c=(0,tw.vW)(d),[u,m]=(0,p.useState)({}),f=null==i||null==(t=i.arguments)?void 0:t.some(e=>e.required&&!u[e.name]);return i?(0,n.jsxs)(eT.aF,{title:o.formatMessage({defaultMessage:"Enter prompt inputs",id:"zDs90mJ5UJ"}),subtitle:(0,n.jsxs)("div",{className:"flex flex-col gap-1 mt-1",children:[i.name,(0,n.jsx)(tM.M,{text:i.description})]}),isOpen:s,onClose:d,modalSize:"lg",children:[(0,n.jsx)("div",{className:"flex flex-col gap-4 max-h-[500px] mb-4 overflow-y-auto",children:null==(a=i.arguments)?void 0:a.map(e=>(0,n.jsx)("div",{className:"flex flex-col gap-1",children:(0,n.jsx)(tv.ks,{required:e.required,label:"".concat(tb()(e.name.toLowerCase())).concat(e.required?"*":""),placeholder:e.description,value:u[e.name]||"",onValueChange:t=>m(a=>({...a,[e.name]:null!=t?t:""})),onBlur:()=>{m(t=>{var a;return{...t,[e.name]:(null!=(a=t[e.name])?a:"").trim()}})},error:e.required&&""===u[e.name]},e.name)},e.name))}),(0,n.jsxs)(eT.vW,{children:[(0,n.jsx)(q.$,{disabled:f,onClick:()=>void c({serverUuid:r,prompt:i,args:u}),children:(0,n.jsx)(E.A,{defaultMessage:"Add prompt",id:"8UhdEv01LN"})}),(0,n.jsx)(q.$,{variant:"secondary",onClick:d,children:(0,n.jsx)(E.A,{defaultMessage:"Cancel",id:"47FYwba+bI"})})]})]}):null}var tA=a(34385),tk=a(93714),tC=a(31312),tN=a(5690);let tS=e=>{let{moveAttachments:t=!1,handleProjectCreated:a,isOpen:s,handleClose:l,syncSources:i=[],attachments:r=[],setSyncSourceUuids:o,setAttachments:d}=e,[c,u]=(0,p.useState)(null),{addError:m}=(0,N.Y)(),h=(0,tC.n)();return tE({project:c,syncSources:i,attachments:r,setSyncSourceUuids:o,setAttachments:d}),(0,n.jsxs)(eT.aF,{isOpen:s,onClose:l,modalSize:"xl",children:[(0,n.jsxs)("div",{className:"flex justify-between items-start",children:[(0,n.jsx)("h1",{className:"font-heading text-text-200 mb-4",children:t?(0,n.jsx)(E.A,{defaultMessage:"Create a project with attachments",id:"wSxz4Q9mjA"}):(0,n.jsx)(E.A,{defaultMessage:"Create a project",id:"HR5A+UPiIu"})}),(0,n.jsx)(q.$,{onClick:l,size:"icon",variant:"ghost",children:(0,n.jsx)(eY.X,{size:16})})]}),s&&(0,n.jsx)(tN.Kk,{syncSources:t?i:void 0,onProjectCreated:e=>{t&&u(e),a(e)},onError:e=>m(e.message,{error:e}),onCancel:l,strings:h})]})},tE=e=>{let{project:t,syncSources:a,attachments:s,setSyncSourceUuids:n,setAttachments:l}=e,i=(0,p.useRef)(!1),{addSuccess:r}=(0,N.Y)(),o=(0,h.A)(),{mutate:d}=(0,tA.fh)(null==t?void 0:t.uuid),{mutate:c}=(0,tk.pz)(null==t?void 0:t.uuid),u=(0,p.useCallback)(()=>{t&&(s.length||a.length&&t.is_private)&&(s.forEach(e=>{let{file_name:t,extracted_content:a}=e;d({file_name:t,content:a})}),t.is_private&&(a.forEach(e=>{let t=(0,T.tS)(e);t&&c(t)}),n([])),l([]),r(o.formatMessage({defaultMessage:"Attachments successfully added to {projectName}",id:"xw8MJ6Kd/h"},{projectName:t.name||"your project"})))},[t,r,s,d,l,c,n,a,o]);(0,p.useEffect)(()=>{t&&!i.current&&(i.current=!0,u())},[t,u])};var tI=a(11930),tT=a(39500),tO=a(66420),tR=a(56706),tD=a(84617),tL=a(3574),tP=a(79289),tF=a(57292),tz=a(20673),tG=a(49299),tU=a(96442),tY=a(16178),tH=a(13982),tV=a(59074);let tW=()=>{let{addError:e}=(0,N.Y)();return{handleRateLimitError:(t,a)=>{if(t instanceof tY.LG&&429===t.statusCode){let a=null;if(t.message.includes("{"))try{a=JSON.parse(t.message)}catch(e){}(null==a?void 0:a.type)==="exceeded_limit"&&"concurrents"===a.representativeClaim?e("Looks like you have too many chats going. Please close a tab to continue.",{error:t}):"thinking_messages_rate_limit_exceeded"===t.errorCode?e("You’ve reached your weekly limit for thinking messages. Please try again next week.",{error:t}):"opus_messages_rate_limit_exceeded"===t.errorCode?(0,tV.T)():(e("You’ve reached the limit for Claude messages at this time. Please wait before trying again.",{error:t}),(0,tH.D)())}else e(a,{error:t})}}},tB=(0,tU.default)(()=>a.e(320).then(a.bind(a,10320)).then(e=>({default:e.WritingAnimation})),{loadableGenerated:{webpack:()=>[10320]},ssr:!1}),tK={default:{type:"spring",stiffness:650,damping:60},opacity:{type:"tween",ease:"easeOut",duration:.35}},tJ=(0,p.forwardRef)((e,t)=>{let{setScreen:a,onStyleChange:s,animateBoolRef:l}=e,i=(0,h.A)(),r=(0,ef.st)(),[o,d]=(0,p.useState)(!1),[c,f]=(0,p.useState)(""),{handleRateLimitError:x}=tW(),{mutateAsync:g}=(0,tR.f$)(),y=(0,p.useRef)(null),v=(0,p.useRef)(null);(0,p.useEffect)(()=>{o&&setTimeout(()=>{var e;return null==(e=v.current)?void 0:e.focus()},50)},[o]);let[j,b]=(0,p.useState)(!1),[w,M]=(0,p.useState)(!1),_=(0,p.useRef)(null),A=(0,p.useRef)(null),k=4e3,{handleFileUpload:S,handleTextUpload:I}=function(e){let[t,a]=(0,p.useState)(!1),{activeOrganization:s}=(0,B.YL)(),{addError:n}=(0,N.Y)(),l=(0,tg.mn)();return{handleFileUpload:async i=>{if(t||!s)return;if(a(!0),!(0,C.eT)(i))try{let t=await (0,C.F9)(i);await e(t),a(!1);return}catch(e){}let r=new FormData;r.append("file",i);try{let t=await l("/api/organizations/".concat(s.uuid,"/convert_document"),{method:"POST",body:r});if(!t.ok)throw Error("Document conversion failed");let a=await t.json();if(!(null==a?void 0:a.extracted_content))throw Error("Document conversion failed: No extracted content");await e(a.extracted_content)}catch(e){n(e instanceof Error?e.message:"Error uploading file",{error:e})}finally{a(!1)}},handleTextUpload:async n=>{!t&&s&&0!==n.trim().length&&(a(!0),await e(n),a(!1))},isUploading:t}}(async e=>{try{_.current=await g({content_example:e})}catch(e){x(e,i.formatMessage({defaultMessage:"Failed to create style. Please try again.",id:"GF2W10J5zb"})),b(!1)}}),T=()=>{_.current?s(_.current,!0):A.current=setTimeout(T,k=1e3)},O=async()=>{L(),await I(c)},R=async e=>{let t=Array.from(e.dataTransfer.files);t&&(M(!0),setTimeout(L,20),await S(t[0]))},D=async e=>{let t=e.target.files;t&&(L(),await S(Array.from(t)[0])),e.target.value=""},L=()=>{b(!0),A.current=setTimeout(T,k)};return(0,n.jsx)(m.P.div,{ref:t,className:"w-full h-full grid place-items-center",exit:{opacity:0,scale:.8},transition:l.current?tK:{duration:0},children:(0,n.jsxs)(u.N,{mode:"popLayout",children:[j&&(0,n.jsx)(m.P.div,{className:"w-full h-full grid place-items-center",initial:{opacity:0},animate:{opacity:1},transition:tK,children:(0,n.jsx)(tX,{})},"CreateStyleAnalyzingContentScreen"),!j&&(0,n.jsxs)(m.P.div,{className:"w-full h-full pt-1 flex flex-col sm:grid sm:grid-cols-2 sm:gap-4",children:[(0,n.jsxs)(m.P.div,{exit:{opacity:0,y:40,transition:tK},className:"sm:h-full text-center flex flex-col gap-2 items-center justify-center px-2 pt-8 pb-8 sm:pt-14 sm:pb-20",children:[(0,n.jsx)("div",{className:"relative pb-2 w-full flex items-center justify-center",children:(0,n.jsx)(tB,{})}),(0,n.jsx)("p",{className:"text-text-300 font-claude-response sm:text-lg",children:(0,n.jsx)(E.A,{defaultMessage:"Share a writing example or describe your style and Claude will make a custom writing style tailored just for you.",id:"2qm6Zfzfx3"})})]},"CreatStyleStartScreenExplainer"),(0,n.jsx)(m.P.div,{className:"h-full flex-1",exit:{opacity:0,x:0,scale:.8,transition:{basicTransition:tK}},children:o?(0,n.jsxs)("div",{className:"h-full flex flex-col gap-2 p-2 rounded-xl border-0.5 border-border-300",children:[(0,n.jsx)("textarea",{ref:v,className:" flex-1 min-h-0 bg-bg-000 border border-border-200 p-3 leading-5 rounded-lg transition-colors hover:border-border-100 placeholder:text-text-500 focus:border-accent-secondary-100 focus:ring-0 focus:outline-none disabled:cursor-not-allowed disabled:opacity-50 whitespace-pre-wrap resize-none",name:"inputText",placeholder:i.formatMessage({defaultMessage:"Paste at least a few paragraphs of example writing, including from multiple various sources if you’d like, for Claude to analyze and the match style of...",id:"mC+9IzmmMY"}),value:c,onChange:e=>f(e.target.value),required:!0}),(0,n.jsxs)("div",{className:"flex gap-2 justify-center",children:[(0,n.jsx)(q.$,{variant:"secondary",onClick:()=>d(!1),children:(0,n.jsx)(E.A,{defaultMessage:"Cancel",id:"47FYwba+bI"})}),(0,n.jsx)(q.$,{onClick:O,children:(0,n.jsx)(E.A,{defaultMessage:"Create style",id:"OC52fhpn7g"})})]})]}):(0,n.jsxs)(tp.wC,{className:"w-full h-full text-center border-dashed border border-border-300 bg-bg-000 rounded-xl relative grid place-items-center",onDrop:R,children:[(0,n.jsx)(tq,{showDropCover:w},"DropZoneOverlay"),(0,n.jsx)("input",{ref:y,type:"file",className:"hidden",accept:(0,C.cm)({imagesEnabled:!1}).join(","),onChange:D,multiple:!0}),(0,n.jsxs)("div",{children:[(0,n.jsxs)(X.ms,{trigger:(0,n.jsx)(q.$,{variant:"flat",className:"mt-2 font-medium !text-accent-secondary-100 bg-accent-secondary-900 hover:!bg-accent-secondary-100/15 gap-2",prepend:(0,n.jsx)(tL.C,{weight:"bold"}),children:(0,n.jsx)(E.A,{defaultMessage:"Add writing example",id:"EhXT0lXWRc"})}),children:[(0,n.jsx)(X.tJ,{children:(0,n.jsxs)("div",{className:"flex items-center gap-2",onClick:()=>{y.current&&y.current.click()},children:[(0,n.jsx)(tP.x,{size:16}),(0,n.jsx)(E.A,{defaultMessage:"Upload from device",id:"vMaZk5Jcnv"})]})}),(0,n.jsx)(X.tJ,{onClick:()=>d(!0),children:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(tF.v,{size:16}),(0,n.jsx)(E.A,{defaultMessage:"Paste text content",id:"nVQ9XcjUIh"})]})})]}),(0,n.jsxs)("div",{className:"text-xs text-text-400 mt-3 flex flex-col gap-1 max-sm:pb-8",children:[(0,n.jsx)("p",{children:window.innerWidth<=640?(0,n.jsx)(E.A,{defaultMessage:"Select or paste existing doc, post, message, etc.",id:"7oFd31Vmu3"}):(0,n.jsx)(E.A,{defaultMessage:"Select, drop, or paste existing doc, post, message, etc.",id:"ugXnNZ7Ix/"})}),(0,n.jsx)("p",{children:(0,n.jsx)(E.A,{defaultMessage:"Content is not stored after matching style.",id:"bLEGIyr72h"})})]})]}),(0,n.jsx)("div",{className:"absolute w-full bottom-6",children:(0,n.jsxs)(tD.Y,{className:"text-sm gap-1.5",onClick:()=>{r.track({event_key:"styles.custom.describe_clicked"}),a(tI.I.CREATE_MANUALLY)},children:[(0,n.jsx)(tz.u,{}),(0,n.jsx)(E.A,{defaultMessage:"Describe style instead",id:"p6hP+KeXkD"})]})})]})},"CreatStyleStartScreenDropZone")]},"CreatStyleStartScreen")]})})});tJ.displayName="CreateStyle";let tq=e=>{let{showDropCover:t}=e,{dragState:a}=(0,tp.t1)(),s=a===tp.mq.DRAGGING_OFF_TARGET||a===tp.mq.DRAGGING_ON_TARGET||t;return(0,n.jsx)(u.N,{children:s&&(0,n.jsx)(m.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:(0,c.A)("absolute -inset-px z-10 flex flex-col justify-center rounded-xl border border-dashed transition-colors",a===tp.mq.DRAGGING_ON_TARGET||t?"bg-accent-secondary-900 border-accent-secondary-200 text-accent-secondary-000":"bg-bg-100 border-border-200 text-text-300"),children:(0,n.jsxs)("div",{className:"py-1.5 text-center",children:[(0,n.jsx)("div",{className:"relative inline-block opacity-60",children:(0,n.jsx)(tG.p,{size:36,weight:"thin"})}),(0,n.jsx)("div",{className:"font-claude-response pt-2 pb-4 italic",children:(0,n.jsx)(E.A,{defaultMessage:"Drop example writing here to match the style",id:"VcDT1Dt8dq"})})]})},"drop-zone-overlay")})},tX=()=>(0,n.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,n.jsx)(tB,{animate:!0}),(0,n.jsx)(m.P.div,{className:"font-claude-response italic text-lg",initial:{opacity:0,y:-15},animate:{opacity:1,y:0},transition:{opacity:{delay:.2,ease:"easeOut",duraation:.6},y:{delay:.2,type:"spring",stiffness:230,damping:20}},children:(0,n.jsx)(E.A,{defaultMessage:"Analyzing your writing...",id:"AnDnGKCn6M"})})]});var t$=a(40888),tQ=a(37513),tZ=a(59175),t0=a(49937);let t1={objective:{label:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t$.W,{})," ",(0,n.jsx)(E.A,{defaultMessage:"Define style objective",id:"gJB/90MGQ7"})]}),description:"Describe the main purpose and goal of this writing style — whether to teach, analyze, persuade, inspire, etc.",placeholder:"Try something like:\nI want to teach complex topics step-by-step, with a focus on building understanding.",promptPrepend:"I’d like the writing to serve this purpose:"},audience:{label:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t0.t,{})," ",(0,n.jsx)(E.A,{defaultMessage:"Tailor to an audience",id:"TYdBxyl/f3"})]}),description:"Describe details of the target audience you’d like Claude to write for including relevant information, needs, or preferences.",placeholder:"Try something like:\nWrite for marketing professionals. They’re tech-savvy and appreciate a dash of humor with their data.",promptPrepend:"I’d like to tailor this style to a specific audience:"},voicetone:{label:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(tQ.r,{})," ",(0,n.jsx)(E.A,{defaultMessage:"Use specific voice & tone",id:"1Vo908p7lJ"})]}),description:"Think about characteristics like formality, emotion, personality, and how you want the written responses to feel.",placeholder:"Try something like:\nWrite in a warm, approachable tone with light professional humor - like a friendly mentor.",promptPrepend:"I’d like to write in this voice and tone:"},general:{label:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(tz.u,{})," ",(0,n.jsx)(E.A,{defaultMessage:"Describe generally",id:"f3JnPS+B3+"})]}),description:"Describe in detail how you would like Claude to write. Be as specific as you can.",placeholder:"Try something like:\nWrite like an excited scientist explaining fascinating discoveries - technical but energetic.",promptPrepend:"I’d like to write like this:"},custom:{label:(0,n.jsx)(E.A,{defaultMessage:"Use custom instructions (advanced)",id:"hSfu0Sz47T"}),description:"Write exact custom instructions for this style instead of generating a style prompt automatically. Claude will ignore instructions that don’t follow our guidelines.",placeholder:"Write style custom instructions here...",promptPrepend:""}},t5=(0,p.forwardRef)((e,t)=>{let{setScreen:a,onStyleChange:s}=e,l=(0,h.A)(),i=(0,ef.st)(),[r,o]=(0,p.useState)(!1),[d,f]=(0,p.useState)(""),[x,g]=(0,p.useState)(Object.keys(t1)[0]),{handleRateLimitError:y}=tW(),{mutateAsync:v}=(0,tR.f$)(),j=(0,p.useRef)(null);(0,p.useEffect)(()=>{setTimeout(()=>{var e;return null==(e=j.current)?void 0:e.focus()},50)},[x]);let b=d.replace(/\s/g,"").length>24,w=async()=>{if(!r&&b){o(!0);try{let e="custom"===x?{prompt:d}:{input_text:t1[x].promptPrepend+"\n"+d},t=await v(e);s(t,!1)}catch(e){y(e,l.formatMessage({defaultMessage:"Failed to create style. Please try again.",id:"GF2W10J5zb"}))}finally{o(!1)}}},M=e=>{i.track({event_key:"styles.custom.describe_selected",key:e}),g(e)};return(0,n.jsxs)(m.P.div,{ref:t,className:"w-full h-full flex flex-col sm:grid sm:grid-cols-2 gap-4 pt-3",children:[(0,n.jsxs)("div",{className:"flex flex-col sm:h-full sm:pr-3",children:[(0,n.jsxs)("div",{className:"flex-1 text-text-300",children:[(0,n.jsx)("p",{className:"mb-1 sm:mb-2 text-sm font-medium",children:(0,n.jsx)(E.A,{defaultMessage:"Generate style from a starting point:",id:"cz09/5alWg"})}),(0,n.jsx)("ul",{className:"hidden sm:flex flex-col gap-1.5",children:Object.keys(t1).map(e=>(0,n.jsx)("li",{children:(0,n.jsxs)("button",{className:(0,c.A)("flex gap-1.5 items-center font-ui h-11 rounded-lg border border-border-400 hover:border-border-300 px-3 w-full text-left transition active:scale-[1.015] hover:bg-bg-200",x===e&&"!bg-accent-secondary-900 text-accent-secondary-000 !border-accent-secondary-100/80","custom"===e&&"mt-2 text-sm"),onClick:()=>M(e),children:[(0,n.jsx)("div",{className:"w-4 h-4 rounded-full bg-bg-100 grid place-items-center border border-border-300 mr-1",children:x===e&&(0,n.jsx)("div",{className:"w-2.5 h-2.5 rounded-full bg-accent-secondary-100"})}),t1[e].label]})},e))}),(0,n.jsx)("div",{className:"sm:hidden",children:(0,n.jsx)(X.ms,{trigger:(0,n.jsx)(q.$,{variant:"ghost",append:(0,n.jsx)(eU.a,{}),className:"w-full !border !border-border-300",children:(0,n.jsx)("div",{className:"flex-1 text-left flex items-center gap-1",children:t1[x].label})}),children:Object.keys(t1).map(e=>(0,n.jsx)(X.tJ,{onSelect:()=>M(e),children:(0,n.jsx)("div",{className:"flex items-center gap-1",children:t1[e].label})},e))})})]}),(0,n.jsx)("div",{className:"mb-4 max-sm:hidden",children:(0,n.jsxs)(tD.Y,{className:"text-sm gap-1",onClick:()=>a(tI.I.CREATE),children:[(0,n.jsx)(tZ.f,{}),(0,n.jsx)(E.A,{defaultMessage:"Never mind, I’ll add an example",id:"PpPoeCEz4X"})]})})]}),(0,n.jsxs)("form",{className:"flex flex-col h-full rounded-xl border-0.5 border-border-300 bg-bg-200 px-3 py-2 gap-2",onSubmit:e=>{e.preventDefault(),w()},children:[(0,n.jsx)("p",{className:"pt-0 p-1 text-text-300 font-claude-response max-sm:text-sm",children:t1[x].description}),(0,n.jsxs)("div",{className:"relative flex-1 w-full",children:[(0,n.jsx)("textarea",{ref:j,className:" min-h-0 w-full h-full bg-bg-000 border border-border-200 p-3 leading-snug rounded-lg transition-colors hover:border-border-100 placeholder:text-text-500 focus:border-accent-secondary-100 focus:ring-0 focus:outline-none disabled:cursor-not-allowed disabled:opacity-50 whitespace-pre-wrap resize-none",name:"inputText",placeholder:t1[x].placeholder,value:d,required:!0,onChange:e=>f(e.target.value)}),(0,n.jsx)(u.N,{children:d.length>0&&!b&&(0,n.jsx)(m.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{ease:"easeIn",duration:.1},className:"absolute bottom-1 right-1 left-1 py-2 px-2 rounded-md text-sm bg-accent-secondary-900 text-text-200 text-center",children:(0,n.jsx)(E.A,{defaultMessage:"Be as descriptive as possible to help Claude generate the best possible style for you",id:"3ObAHHjHgF"})})})]}),(0,n.jsx)($.Tooltip,{tooltipContent:b?"":l.formatMessage({defaultMessage:"More description needed in order to generate style",id:"vX4dBOsKs3"}),side:"bottom",className:"text-center",children:(0,n.jsx)("div",{className:"flex items-center w-full justify-center pb-1",children:(0,n.jsx)(q.$,{className:"w-full",type:"submit",loading:r,disabled:!b,children:"custom"===x?(0,n.jsx)(E.A,{defaultMessage:"Create style",id:"OC52fhpn7g"}):(0,n.jsx)(E.A,{defaultMessage:"Generate style",id:"tILvvoBa87"})})})})]})]})});t5.displayName="CreateStyleManually";var t2=a(79383),t6=a(41284),t4=a(92276),t3=a(40220),t8=a(17060),t9=a(43747),t7=a(84267),ae=a(27076),at=a(12614),aa=a(33953),as=a(88801),an=a(18088);function al(){let[e,t]=(0,an.Vc)("userHiddenStyles",[]),a=(0,p.useCallback)(e=>{let a=(0,as.X)(e);t(e=>[...e,a])},[t]),s=(0,p.useCallback)(()=>{t([])},[t]),n=(0,p.useCallback)(t=>t.filter(t=>{let a=(0,as.X)(t);return!e.includes(a)}),[e]);return{hiddenPresetStyles:e,setHiddenPresetStyles:t,addHiddenPresetStyle:a,resetHiddenPresetStyles:s,filterHiddenStyles:n}}var ai=function(e){return e.VIEW="view",e.EDIT="edit",e.EDIT_MANUALLY="edit_manually",e}(ai||{});let ar=G.z.array(G.z.object({key:G.z.string(),name:G.z.string(),nameKey:G.z.string().optional(),text:G.z.string(),textKey:G.z.string().optional()})),ao=[],ad=e=>{let{isSaveButton:t,children:a}=e;return(0,n.jsx)("div",{className:(0,c.A)("flex gap-1.5",t?"sm:absolute sm:top-5 sm:right-16 max-sm:mt-3 max-sm:-mb-2":"absolute top-5 right-16"),children:a})},ac=(0,p.forwardRef)((e,t)=>{let{animateBoolRef:a,style:s,setCurrentStyle:l,returnToListScreen:i,setChatStyle:r,setIsEditing:o,setIsEditingName:d}=e,c=(0,h.A)(),u=(0,as.X)(s),f="default"===s.type,[x,g]=(0,p.useState)("view"),{mutateAsync:y}=(0,tR.lo)(u,f),{handleRateLimitError:v}=tW(),j=async e=>{let{prompt:t,editInput:a}=e;try{let e=await y({prompt:t,edit_instructions:a});e&&l(e)}catch(e){throw v(e,c.formatMessage({defaultMessage:"Failed to edit style. Please try again.",id:"1WkY08RVLW"})),Error}},b=e=>{o("edit"===e||"edit_manually"===e),g(e)};return(0,n.jsxs)(m.P.div,{className:"flex-1 min-h-0 grid sm:grid-cols-2 gap-3 pt-3",ref:t,children:["view"===x&&(0,n.jsxs)(ad,{children:[(0,n.jsx)(q.$,{variant:"secondary",className:"text-sm max-sm:hidden",onClick:()=>r(s),children:(0,n.jsx)(E.A,{defaultMessage:"Use style",id:"f7VY0ldE+0"})}),(0,n.jsx)(af,{style:s,returnToListScreen:i,onRename:()=>d(!0),setStateToManualEdit:()=>b("edit_manually")})]}),(0,n.jsxs)(m.P.div,{className:"min-h-0",initial:!!a.current&&{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{scale:{type:"spring",stiffness:230,damping:15,delay:.1},opacity:{duration:.3,delay:.1}},children:["view"===x&&(0,n.jsx)(ap,{style:s,onClick:()=>b("edit")}),"edit"===x&&(0,n.jsx)(au,{style:s,updateStyle:j,onClose:()=>b("view")}),"edit_manually"===x&&(0,n.jsx)(am,{style:s,updateStyle:j,onClose:()=>b("view")})]}),(0,n.jsx)(ah,{style:s,animateBoolRef:a})]})});ac.displayName="EditStyle";let au=e=>{let{style:t,updateStyle:a,onClose:s}=e,l=(0,h.A)(),i=(0,p.useRef)(t.prompt),r=(0,p.useRef)(null),[o,d]=(0,p.useState)(!1),[f,x]=(0,p.useState)(!1),[g,y]=(0,p.useState)([]),[v,j]=(0,p.useState)(""),b=async e=>{if(e.preventDefault(),o||f)return!1;await w(v)},w=async e=>{j(""),d(!0),y([...g,e]);try{await a({editInput:e})}catch(e){j(v),y(e=>e.slice(0,-1))}d(!1)},M=async()=>{g.length&&(x(!0),await a({prompt:i.current}),x(!1)),s()},_=(0,p.useMemo)(()=>{if(!t.attributes)return[];let e=Math.floor(Math.random()*t.attributes.length),a=e+1<t.attributes.length?e+1:e-1;return[l.formatMessage({defaultMessage:"A bit more {attribute}",id:"au1WTQvqDg"},{attribute:t.attributes[e].name.toLowerCase()}),l.formatMessage({defaultMessage:"Much less {attribute}",id:"dIbq/Ow8Zn"},{attribute:t.attributes[a].name.toLowerCase()})]},[t.attributes,l]);return(0,p.useEffect)(()=>{if(g.length>0){var e;null==(e=r.current)||e.scrollTo({top:r.current.scrollHeight,behavior:"smooth"})}},[g,t.summary]),(0,n.jsxs)("div",{className:"h-full flex flex-col",children:[(0,n.jsxs)("div",{className:"flex-1 min-h-0 flex flex-col gap-2 p-2.5 rounded-xl border border-accent-secondary-100/50 bg-bg-100 ",children:[(0,n.jsxs)("div",{className:(0,c.A)("border-0.5 rounded-lg p-3 pt-2.5 mb-2 relative transition bg-gradient-to-b",o?"border-border-300 from-accent-secondary-900/50 to-accent-secondary-900/10":"border-accent-secondary-100/50 from-accent-secondary-900/75 to-accent-secondary-900/25"),children:[(0,n.jsx)("div",{className:(0,c.A)("font-claude-response font-normal text-pretty leading-snug text-text-200 transition",o?"opacity-0 scale-[0.975]":"delay-150 duration-150 ease-out"),children:t.summary}),(0,n.jsx)(u.N,{children:o&&(0,n.jsx)(m.P.div,{className:"absolute inset-0 grid place-items-center",initial:{scale:.75,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.75,opacity:0},children:(0,n.jsx)(t6.a,{state:"thinking"})})})]}),(0,n.jsx)("ul",{ref:r,className:"flex-1 min-h-0 overflow-y-auto flex flex-col gap-2",children:g.map(e=>(0,n.jsx)("li",{children:(0,n.jsx)("div",{className:"inline-block py-2 px-3 rounded-lg bg-bg-300 text-sm",children:e})},e))}),g.length>0?(0,n.jsx)("div",{className:"text-sm text-center text-text-500",children:(0,n.jsx)(E.A,{defaultMessage:"Ask for more edits, save, or discard changes",id:"zOxoAYYCog"})}):(0,n.jsxs)("div",{className:"mb-2",children:[(0,n.jsx)("div",{className:"text-sm text-text-500 mb-2",children:(0,n.jsx)(E.A,{defaultMessage:"Describe how you’d like to edit the style, like:",id:"PRDvfjUkNA"})}),(0,n.jsx)("ul",{className:"flex flex-col gap-2",children:_.map((e,t)=>(0,n.jsx)("li",{children:(0,n.jsx)("button",{onClick:t=>{t.preventDefault(),w(e)},className:"text-sm font-medium h-8 px-3 rounded-full border-0.5 border-border-200 text-text-200 bg-gradient-to-b hover:text-text-000 hover:from-bg-400/0 hover:to-bg-400/50 hover:border-border-100 active:scale-x-[0.985] active:scale-y-[0.995] transition",children:e})},t))})]}),(0,n.jsx)("form",{className:"mb-1.5 mx-0.5",onSubmit:e=>b(e),children:(0,n.jsx)(tv.ks,{autoFocus:!0,className:"w-full",name:"inputText",placeholder:l.formatMessage({defaultMessage:"Ask Claude to edit the style...",id:"5D1Fao75P8"}),size:"lg",value:v,onChange:e=>j(e.target.value),append:(0,n.jsx)(u.N,{children:v.length>0&&(0,n.jsx)(m.P.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.85,opacity:0,transition:{ease:"easeIn",duration:.1}},children:(0,n.jsx)(q.$,{type:"submit",size:"icon_sm",variant:"flat",disabled:o||f,children:(0,n.jsx)(t3.D,{})})})})})})]}),(0,n.jsxs)(ad,{isSaveButton:!0,children:[(0,n.jsx)(q.$,{onClick:s,disabled:o||f||v.length>0||0===g.length,children:(0,n.jsx)(E.A,{defaultMessage:"Save changes",id:"X0ha1a+WYV"})}),(0,n.jsx)(q.$,{onClick:M,disabled:o,loading:f,variant:"secondary",children:g.length>0?(0,n.jsx)(E.A,{defaultMessage:"Discard",id:"nmpevlUATU"}):(0,n.jsx)(E.A,{defaultMessage:"Cancel",id:"47FYwba+bI"})})]})]})},am=e=>{let{style:t,updateStyle:a,onClose:s}=e,[l,i]=(0,p.useState)(!1),[r,o]=(0,p.useState)(t.prompt),d=(0,h.A)(),c=async e=>{e.preventDefault(),i(!0),await a({prompt:r}),i(!1),s()};return(0,n.jsxs)("form",{className:"flex flex-col gap-2 h-full min-h-0 p-3 pt-2 rounded-xl border-0.5 border-border-200",onSubmit:e=>c(e),children:[(0,n.jsx)("div",{className:"text-center text-sm text-text-200 font-medium",children:(0,n.jsx)(E.A,{defaultMessage:"Edit style instructions manually",id:"+qSf1b/LLJ"})}),(0,n.jsx)("textarea",{className:" flex-1 min-h-0 bg-bg-000 border border-border-200 p-3 leading-5 rounded-lg transition-colors hover:border-border-100 placeholder:text-text-500 focus:border-accent-secondary-100 focus:ring-0 focus:outline-none disabled:cursor-not-allowed disabled:opacity-50 whitespace-pre-wrap resize-none",name:"inputText",placeholder:d.formatMessage({defaultMessage:"Describe your style instructions",id:"nk7EX3l+b4"}),value:r,disabled:l,onChange:e=>o(e.target.value),autoFocus:!0}),(0,n.jsxs)(ad,{isSaveButton:!0,children:[(0,n.jsx)(q.$,{type:"submit",loading:l,children:(0,n.jsx)(E.A,{defaultMessage:"Save changes",id:"X0ha1a+WYV"})}),(0,n.jsx)(q.$,{onClick:()=>{o(t.prompt),s()},disabled:l,variant:"secondary",children:(0,n.jsx)(E.A,{defaultMessage:"Cancel",id:"47FYwba+bI"})})]})]})},ap=e=>{let{style:t,onClick:a}=e,s="default"===t.type;return(0,n.jsxs)("div",{className:(0,c.A)("flex flex-col items-center h-full px-6 gap-4 rounded-lg sm:rounded-xl max-sm:mx-1.5",!s&&"bg-gradient-to-b from-accent-secondary-900/75 to-accent-secondary-900/25 border border-accent-secondary-100/50",s&&"bg-bg-300 border border-border-300"),children:[(0,n.jsx)("div",{className:"flex-1",children:(0,n.jsx)("div",{className:(0,c.A)("w-fit px-4 py-2 pb-2.5 gap-2.5 rounded-b-lg font-medium text-xs",s?"bg-bg-400 text-text-300":"bg-accent-secondary-200/10 text-accent-secondary-100"),children:s?(0,n.jsx)(E.A,{defaultMessage:"Preset style",id:"qwpRSZtBAV"}):(0,n.jsx)(E.A,{defaultMessage:"Your custom style",id:"o/vLK7B7mw"})})}),(0,n.jsxs)("div",{className:"flex flex-col items-center gap-1.5 pb-4",children:[!s&&(0,n.jsx)($.Tooltip,{className:"text-center",tooltipContent:(0,n.jsx)(E.A,{defaultMessage:"Full style instructions are generated and include more than shown in summary. You can edit instructions manually from the options menu",id:"R5PMcY1ELo"}),children:(0,n.jsxs)("div",{className:"flex items-center gap-1 cursor-help opacity-50 hover:opacity-60",children:[(0,n.jsx)("span",{className:"text-sm font-medium",children:(0,n.jsx)(E.A,{defaultMessage:"Style summary",id:"hVmQ4DO8io"})}),(0,n.jsx)(e3.R,{size:12,className:"translate-y-px",weight:"bold"})]})}),(0,n.jsx)("div",{"data-testid":"style-summary",className:"font-claude-response text-xl font-normal text-pretty leading-snug text-center flex-1 flex items-center",children:"default"===t.type&&t.summaryKey?(0,n.jsx)(r.X5,{id:t.summaryKey}):t.summary})]}),(0,n.jsx)("div",{className:"flex-1 flex items-center text-sm",children:s?(0,n.jsx)(E.A,{defaultMessage:"Preset styles are not editable",id:"qjKy0s/reb"}):(0,n.jsx)(q.$,{variant:"outline",onClick:a,className:"!border-accent-secondary-200 !text-accent-secondary-000 hover:!bg-accent-secondary-100/10",prepend:(0,n.jsx)(at.f,{weight:"bold"}),children:(0,n.jsx)(E.A,{defaultMessage:"Edit with Claude",id:"wdKoWlVN+G"})})})]})},ah=e=>{let{style:t,animateBoolRef:a}=e,s=(0,h.A)(),[l,i]=(0,p.useState)(""),[d,f]=(0,p.useState)(),x=(0,p.useRef)(t.prompt),g=(0,p.useRef)(d),y=(0,o.T9)("claude_style_previews","previewExamples",ao,ar),{handleRateLimitError:v}=tW(),{isPending:j,mutateAsync:b}=(0,tR.n7)(),w=(0,p.useCallback)(async()=>{if(d)try{let e=await b({style_prompt:t.prompt,example_key:d.key,example_text:d.textKey?(0,r.fl)({id:d.textKey,intl:s}):d.text});i(e)}catch(e){v(e,s.formatMessage({defaultMessage:"Failed to preview style. Please try again.",id:"B2A4x/wbTg"}))}},[v,b,d,t.prompt,s]);return(0,p.useEffect)(()=>{var e;(x.current!==t.prompt||(null==(e=g.current)?void 0:e.key)!==(null==d?void 0:d.key))&&(x.current=t.prompt,g.current=d,w())},[w,d,t.prompt]),(0,n.jsx)(m.P.div,{className:(0,c.A)("max-sm:hidden flex flex-col gap-2 h-full min-h-0 p-2 rounded-xl border-0.5 border-border-300 transition-colors",d?"bg-bg-000/70":"bg-bg-000/20"),initial:!!a.current&&{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{scale:{type:"spring",stiffness:230,damping:15,delay:.2},opacity:{duration:.3,delay:.2}},children:d?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"flex items-center text-sm px-2 font-medium text-text-200",children:[(0,n.jsx)(E.A,{defaultMessage:"Previewing with",id:"tNFdPqESDT"}),(0,n.jsx)(X.ms,{align:"center",trigger:(0,n.jsx)(q.$,{variant:"ghost",size:"unset",className:"!px-1 !py-0.5 gap-0.5 !text-accent-secondary-100 hover:!bg-accent-secondary-900",append:(0,n.jsx)(aa.a,{className:"translate-y-px"}),children:d?d.nameKey?(0,n.jsx)(r.X5,{id:d.nameKey}):d.name:(0,n.jsx)(E.A,{defaultMessage:"Example",id:"xrCRnH/mKK"})}),children:y.map(e=>(0,n.jsx)(X.tJ,{disabled:j,onClick:()=>f(e),children:e.nameKey?(0,n.jsx)(r.X5,{id:e.nameKey}):e.name},e.key))})]}),(0,n.jsxs)(t4.E,{className:"p-2 pt-0 min-h-0 overflow-y-scroll",children:[(0,n.jsx)("div",{className:"bg-bg-300 -mx-0.5 mb-2 py-1.5 px-2 text-sm rounded-lg text-pretty",children:d.textKey?(0,n.jsx)(r.X5,{id:d.textKey}):d.text}),(0,n.jsx)(u.N,{children:j?(0,n.jsx)("div",{className:"pt-2",children:(0,n.jsx)(t6.a,{state:"writing"})}):(0,n.jsx)(m.P.div,{initial:{opacity:0},animate:{opacity:1},transition:{ease:"easeIn",duration:.25},children:(0,n.jsx)(t2.fP,{className:"font-claude-response flex-1 flex flex-col gap-2",text:l})})})]})]}):(0,n.jsx)("div",{className:"flex-1 grid place-items-center text-center",children:(0,n.jsxs)("div",{className:"w-full",children:[(0,n.jsx)("div",{className:"text-sm text-text-500 font-medium mb-4",children:(0,n.jsx)(E.A,{defaultMessage:"Preview with an example...",id:"YdUmd5z6YL"})}),(0,n.jsx)("div",{className:"flex flex-wrap justify-center gap-2 w-full",children:y.map(e=>(0,n.jsx)("button",{onClick:()=>f(e),className:"\n                    rounded-full\n                    border-0.5\n                    border-border-300\n                    text-sm\n                    text-text-400\n                    font-medium\n                    h-8\n                    px-3\n                    flex\n                    items-center\n                    bg-gradient-to-b\n                    from-always-black/0\n                    to-always-black/5\n                    hover:bg-accent-secondary-900\n                    hover:text-accent-secondary-000\n                    hover:border-accent-secondary-100/50\n                    transition-colors",children:e.nameKey?(0,n.jsx)(r.X5,{id:e.nameKey}):e.name},e.key))})]})})})},af=e=>{let{style:t,returnToListScreen:a,onRename:s,setStateToManualEdit:l}=e,i=(0,as.X)(t),r="default"===t.type,{isPending:o,mutateAsync:d}=(0,tR.M$)(i),{addHiddenPresetStyle:c}=al(),{clearStoredStyle:u,storedStyle:m}=(0,ty.p)(),{addError:p}=(0,N.Y)(),f=(0,h.A)(),x=async()=>{if(r)c(t),setTimeout(()=>{a()},500);else try{await d(),m&&"uuid"in m&&m.uuid===t.uuid&&u(),a()}catch(e){p(f.formatMessage({defaultMessage:"Failed to delete style. Please try again.",id:"4eIHICfKCI"}),{error:e})}};return(0,n.jsxs)(X.ms,{align:"end",unstyledTrigger:!0,trigger:(0,n.jsxs)(q.$,{variant:"ghost",className:"max-sm:min-w-8 max-sm:px-2 sm:pl-3 sm:pr-2",children:[(0,n.jsxs)("span",{className:"hidden sm:flex items-center gap-1",children:[(0,n.jsx)(E.A,{defaultMessage:"Options",id:"NDV5MqT9ww"}),"\xa0",(0,n.jsx)(aa.a,{})]}),(0,n.jsx)("span",{className:"sm:hidden",children:(0,n.jsx)(t8.L,{weight:"bold",size:20})})]}),children:[!r&&(0,n.jsx)(X.tJ,{disabled:o,onClick:()=>{s()},children:(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)(t9.g,{className:"mr-2"}),(0,n.jsx)(E.A,{defaultMessage:"Rename style",id:"sEO8vFphTF"})]})}),"Concise"===i?(0,n.jsx)(X.q,{className:"text-sm",children:(0,n.jsx)(E.A,{defaultMessage:"Concise style can’t be hidden",id:"zTztS+Om9I"})}):(0,n.jsx)(X.tJ,{className:"pr-0 !text-danger-000",disabled:o,onClick:x,children:r?(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(t7.C,{}),(0,n.jsx)(E.A,{defaultMessage:"Hide preset style",id:"z44N28JZYv"})]}):(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(ae.l,{}),(0,n.jsx)(E.A,{defaultMessage:"Delete style",id:"fAqSoPl78t"})]})}),!r&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(X.DG,{}),(0,n.jsx)(X.tJ,{onClick:l,children:(0,n.jsx)(E.A,{defaultMessage:"Edit style manually",id:"H+z4uo2Wfn"})})]})]})},ax=e=>{let{size:t=16,className:a}=e;return(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",width:t,height:t,viewBox:"0 0 16 16",className:a,strokeLinecap:"round",strokeLinejoin:"round",children:[(0,n.jsx)("path",{d:"M8.5 4.5c-3 2-4.5 4-5.5 8L2.5 15l1-1.5"}),(0,n.jsx)("path",{d:"M3 4.5c-.5 1.3-.1 5 .4 6.5 0 0 1.9-2 4.1-3 1.8-.8 3.8-.6 4.5-2 .6-1.2-.2-1.7-1.5-1 1.2-.7 4-2 3-3.5-1-1.4-3.5-.1-4.5.8C9 1.9 9 .9 8 1c-1 .1-2 1.5-2.3 2.8 0 0 0-.7-.7-.8-.7-.1-1.6.5-2 1.5Z"}),(0,n.jsx)("path",{d:"M10.5 11v4m-2-2h4"})]})};var ag=a(59880),ay=a(94879),av=a(19610),aj=a(82356),ab=a(85401);let aw=(0,p.forwardRef)((e,t)=>{let{setScreen:a,styles:s,onStyleChange:l}=e,{hiddenPresetStyles:i,resetHiddenPresetStyles:r}=al(),{sortStyles:o,setOrder:d}=function(){let[e,t]=(0,an.Vc)("userStylesOrder",[]);return{sortStyles:(0,p.useCallback)(t=>[...t].sort((t,a)=>{let s=(0,as.X)(t),n=(0,as.X)(a);if("Default"===s)return -1;if("Default"===n)return 1;let l=e.indexOf(s),i=e.indexOf(n);return -1===l&&-1===i?0:-1===l?1:-1===i?-1:l-i}),[e]),stylesOrder:e,setOrder:(0,p.useCallback)(e=>{t(e.map(e=>(0,as.X)(e)))},[t])}}(),[c,u]=(0,p.useState)([]),h=(0,p.useCallback)(e=>{let t=[...i,"Default"];return o(e.filter(e=>!t.includes((0,as.X)(e))))},[i,o]);(0,p.useEffect)(()=>{u(h(s))},[s,h]);let f=(0,p.useCallback)(e=>{Array.isArray(e)&&(u(e),d(e))},[d]),x=(0,p.useMemo)(()=>s.some(e=>"custom"===e.type),[s]);return(0,n.jsxs)(m.P.div,{exit:{opacity:0,transition:{duration:0}},ref:t,className:"flex-1 min-h-0 flex flex-col -mx-3",children:[(0,n.jsxs)("div",{className:"flex-1 min-h-0",children:[(0,n.jsx)(av.x,{as:"ul",axis:"y",values:c,onReorder:f,layoutScroll:!0,className:"pl-3 pr-3 pb-2 overflow-y-auto max-h-full [mask-image:linear-gradient(to_top,hsl(var(--always-black)/0%)_0%,_hsl(var(--always-black)/100%)_3%)]",children:c.map(e=>(0,n.jsx)(aM,{style:e,onClick:()=>l(e,!1)},(0,as.X)(e)))}),!x&&(0,n.jsxs)(m.P.div,{initial:{opacity:0,scale:.985},animate:{opacity:1,scale:1,transition:{delay:.3,ease:"easeOut",duration:.3}},exit:{opacity:0},className:"flex bg-gradient-to-b from-accent-pro-900/20 to-accent-pro-900/50 py-3 pl-3.5 pr-5 mx-3 rounded-lg border-0.5 border-border-300 text-text-300 text-sm",children:[(0,n.jsx)("div",{className:"font-ui-serif font-medium mr-4 text-accent-pro-000 mt-px whitespace-nowrap",children:(0,n.jsx)(E.A,{defaultMessage:"Tip",id:"4j1TGZubAJ"})}),(0,n.jsx)("p",{children:(0,n.jsx)(E.A,{defaultMessage:"Choose from preset styles or create your own custom style to tailor elements of Claude’s written responses such as tone, voice, vocabulary, detail level, and more. <link>Learn about styles</link>",id:"pwT6iI4QV7",values:{link:e=>(0,n.jsx)(tD.Y,{href:"https://support.anthropic.com/en/articles/10181068-configuring-and-using-styles",target:"_blank",children:e})}})})]})]}),(0,n.jsxs)("div",{className:"flex justify-between items-center mt-4 mx-3",children:[(0,n.jsx)(q.$,{onClick:()=>a(tI.I.CREATE),prepend:(0,n.jsx)(ax,{}),children:(0,n.jsx)(E.A,{defaultMessage:"Create custom style",id:"9y/YEanHck"})}),i.length>0&&(0,n.jsx)(tD.Y,{onClick:r,children:(0,n.jsx)(E.A,{defaultMessage:"Reset preset styles",id:"EITqrHaUNi"})})]})]})});aw.displayName="ListStyles";let aM=e=>{let{style:t,onClick:a}=e,s="default"===t.type,l=(0,aj.m)(),[i,o]=(0,p.useState)(!1);return(0,n.jsxs)(ab.N,{value:t,dragListener:!1,dragControls:l,dragTransition:{bounceStiffness:500,bounceDamping:40},onDragStart:()=>o(!0),onDragEnd:()=>o(!1),className:"relative my-2 min-w-0",children:[(0,n.jsxs)("button",{className:(0,c.A)("\n          flex\n          items-center\n          w-full\n          h-11\n          py-4\n          pl-1\n          pr-3\n          min-w-0\n          rounded-lg\n          transition\n          border-0.5\n          border-border-300\n          bg-bg-100\n          bg-gradient-to-b\n          from-bg-300/0\n          to-bg-300/50\n          select-none\n          relative\n        ",i?"scale-y-[1.015] scale-x-[1.0025] shadow-md":"group hover:enabled:from-accent-secondary-200/0 hover:enabled:to-accent-secondary-200/10 hover:enabled:border-accent-secondary-200/50"),onClick:a,children:[(0,n.jsx)("div",{className:"flex min-w-0 items-center flex-1 pl-7 truncate",children:"default"===t.type&&t.nameKey?(0,n.jsx)(r.X5,{id:t.nameKey}):t.name}),s&&(0,n.jsx)("div",{className:"mr-0.5 rounded-full px-2 py-0.5 bg-text-300/5 text-text-400 font-medium text-[0.625rem]",children:(0,n.jsx)(E.A,{defaultMessage:"Preset",id:"EucS2pAMVS"})}),(0,n.jsx)("div",{className:"text-accent-secondary-200 opacity-0 scale-50 transition group-hover:scale-100 group-hover:opacity-100",children:s?(0,n.jsx)(ag.Q,{}):(0,n.jsx)(t9.g,{})})]}),(0,n.jsx)("div",{onPointerDown:e=>l.start(e),onClick:e=>e.stopPropagation(),className:"w-7 h-7 absolute left-1 top-1/2 -translate-y-1/2 grid place-items-center cursor-move text-text-500 hover:text-accent-secondary-000",children:(0,n.jsx)(ay.H,{size:16,weight:"bold"})})]})},a_=e=>{let{openWithScreen:t,onClose:a,styles:s,setChatStyle:l}=e,i=(0,h.A)(),o=!!t,d=(0,ef.st)(),[c,m]=(0,p.useState)(t||tI.I.LIST),[f,x]=(0,p.useState)(),[g,y]=(0,p.useState)(!1),[v,j]=(0,p.useState)(!1),b=(0,p.useRef)(!1);(0,p.useEffect)(()=>{t&&m(t)},[t]);let w=()=>{b.current=!1,m(tI.I.LIST),y(!1),j(!1)},M=()=>{(!g||window.confirm(i.formatMessage({defaultMessage:"Are you sure? Closing while editing may not synchronize changes.",id:"0XdWZrmwXu"})))&&(d.track({event_key:"styles.modal",open:!1}),w(),a())},_=(e,t)=>{b.current=t,x(e),m(tI.I.EDIT),y(!1),j(!1)};return(0,n.jsx)(eT.aF,{modalSize:"xl",title:(e=>{switch(e){case tI.I.CREATE:return(0,n.jsx)("div",{className:"font-ui-serif font-normal",children:(0,n.jsx)(E.A,{defaultMessage:"Create a style",id:"/pKvFi9Ak4"})});case tI.I.CREATE_MANUALLY:return(0,n.jsx)("div",{className:"font-ui-serif font-normal",children:(0,n.jsx)(E.A,{defaultMessage:"Describe your style",id:"Ntblq5cSRe"})});case tI.I.LIST:return(0,n.jsx)("div",{className:"font-ui-serif font-normal",children:(0,n.jsx)(E.A,{defaultMessage:"Customize your styles",id:"dn3MiW/vUH"})});case tI.I.EDIT:return(0,n.jsx)("div",{className:"w-10/12 sm:w-5/12 md:w-7/12",children:v?(0,n.jsx)(aA,{style:f,onClose:e=>{e&&x(e),j(!1)}}):(0,n.jsx)("button",{title:f.name,className:"w-full font-ui-serif font-normal text-left truncate cursor-text h-9 pr-4 leading-none translate-y-px text-text-200 hover:text-text-000",onClick:()=>!g&&j(!0),children:g?(0,n.jsx)(E.A,{defaultMessage:"Edit {name}",id:"s3IOQQ+nJU",values:{name:f.name}}):"default"===f.type&&f.nameKey?(0,n.jsx)(r.X5,{id:f.nameKey}):f.name})})}})(c),icon:(e=>{switch(e){case tI.I.CREATE:case tI.I.EDIT:return(0,n.jsx)(q.$,{variant:"ghost",size:"icon_sm",disabled:g,onClick:()=>w(),children:(0,n.jsx)(tT.n,{})});case tI.I.CREATE_MANUALLY:return(0,n.jsx)(q.$,{variant:"ghost",size:"icon_sm",onClick:()=>m(tI.I.CREATE),children:(0,n.jsx)(tT.n,{})});case tI.I.LIST:return null}})(c),isOpen:o,onClose:M,className:"h-[35rem] !bg-gradient-to-b from-bg-100 to-bg-200 !pt-5 !pb-7",prependBeforeCloseButton:(0,n.jsx)(n.Fragment,{children:c===tI.I.LIST&&(0,n.jsx)($.Tooltip,{tooltipContent:i.formatMessage({defaultMessage:"Learn more about styles ↗",id:"nuhnis5YtY"}),children:(0,n.jsx)("div",{className:"mr-1",children:(0,n.jsx)(q.$,{href:"https://support.anthropic.com/en/articles/10181068-configuring-and-using-styles",variant:"ghost",className:"text-text-300",size:"icon",target:"_blank",children:(0,n.jsx)(tO.v,{size:18})})})})}),hasCloseButton:!0,children:(0,n.jsxs)(u.N,{mode:"popLayout",children:[c===tI.I.CREATE&&(0,n.jsx)(tJ,{onStyleChange:_,setScreen:m,animateBoolRef:b},"CreateStyleScreen"),c===tI.I.CREATE_MANUALLY&&(0,n.jsx)(t5,{onStyleChange:_,setScreen:m},"CreateStyleManuallyScreen"),c===tI.I.LIST&&(0,n.jsx)(aw,{setScreen:m,styles:s,onStyleChange:_},"ListStylesScreen"),c===tI.I.EDIT&&f&&(0,n.jsx)(ac,{animateBoolRef:b,style:f,returnToListScreen:w,setIsEditingName:j,setCurrentStyle:x,setIsEditing:y,setChatStyle:e=>{l(e),M()}},"EditStyleScreen")]})})},aA=e=>{let{style:t,onClose:a}=e,s=(0,as.X)(t),l="default"===t.type,i=(0,h.A)(),[o,d]=(0,p.useState)("default"===t.type&&t.nameKey?(0,r.fl)({id:t.nameKey,intl:i}):t.name),{isPending:c,mutateAsync:u}=(0,tR.lo)(s,l),m=async()=>{a(await u({name:o}))};return(0,n.jsx)("form",{className:"w-full",onSubmit:async e=>{e.preventDefault(),await m()},children:(0,n.jsx)(tv.ks,{autoFocus:!0,className:"w-full",value:o,maxLength:64,onChange:e=>d(e.target.value),error:0===o.length,append:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(q.$,{variant:"ghost",type:"button",size:"unset",className:"w-7 h-7 rounded-md mr-1",onClick:()=>a(),disabled:c,children:(0,n.jsx)(eY.X,{})}),(0,n.jsx)(q.$,{variant:"flat",size:"unset",className:"w-7 h-7 rounded-md",type:"submit",loading:c,children:(0,n.jsx)(ea.J,{weight:"bold"})})]})})})};var ak=a(96469),aC=a(34096);let aN=()=>{let e=(0,A.QN)(),{setProjectUuid:t,setSyncSourceUuids:a,setIsUploadingGithubSync:s,syncSourceUuids:l,attachments:i,setAttachments:r}=(0,w.o)(),{styleModalOpenWithScreen:o,setStyleModalOpenWithScreen:d,createProjectModalIsOpen:c,setCreateProjectModalIsOpen:u,githubModalIsOpen:m,setGithubModalIsOpen:h,gmailAuthModalIsOpen:x,setGmailAuthModalIsOpen:g,createPromptArgumentModalIsOpen:y,setCreatePromptArgumentModalIsOpen:v}=(0,ez.CH)(),{mcpDirectoryModalIsOpen:j,setMcpDirectoryModalIsOpen:b}=(0,ez.tl)(),{personalizedStyleOptions:M}=(0,ty.p)(),_=(0,e0.sb)(),k=(0,eG.pi)(),C=(0,p.useCallback)(e=>{a(t=>[...t,e.uuid]),s(!1)},[a,s]),N=(0,f.NY)(l),S=(0,tg.B7)(N);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a_,{openWithScreen:o,onClose:()=>d(null),styles:M,setChatStyle:e=>k(e.key)}),(0,n.jsx)(aC.r,{isOpen:!!x,onClose:()=>g(!1),callerIdentifier:"inputMenu"}),(0,n.jsx)(tS,{moveAttachments:!!(null==c?void 0:c.moveAttachments),isOpen:!!(null==c?void 0:c.isOpen),handleClose:()=>u(null),handleProjectCreated:e=>{t(e.uuid),u(null)},syncSources:S,attachments:i,setSyncSourceUuids:a,setAttachments:r}),(0,n.jsx)(ak.s,{location:"chat",projectUuid:e,isOpen:m,onClose:()=>h(!1),onCreated:C,setIsUploadingGithubSync:s}),y&&(0,n.jsx)(t_,{isOpen:y.isOpen,onClose:()=>v(null),serverUuid:y.serverUuid,prompt:y.prompt}),_&&(0,n.jsx)(e5.TY,{isOpen:j,setIsOpen:b,showManageButton:!0})]})};function aS(){let e=(0,s._)(["\n  !box-content\n  flex\n  flex-col\n  bg-bg-000\n  mx-2\n  md:mx-0\n  items-stretch\n  transition-all\n  duration-200\n  relative\n  cursor-text\n  z-10\n  rounded-2xl\n"]);return aS=function(){return e},e}function aE(){let e=(0,s._)(["\n  bg-bg-100 \n  w-full \n  h-2\n"]);return aE=function(){return e},e}function aI(){let e=(0,s._)(["\n  flex \n  w-full \n  min-w-0 \n  flex-col\n"]);return aI=function(){return e},e}let aT=(0,p.forwardRef)((e,t)=>{let{disabled:a,placement:s,placeholder:i,onSubmit:y,onReady:v,onRetry:j,enableScreenDrop:F=!1,disableDropZone:z=!1}=e,G=(0,h.A)(),{prompt:U,tipTapEditorState:Y}=(0,A.QT)(),H=(0,A.QN)(),V=(0,A.Jy)(e=>e.previewPrompt),{setPrompt:W,setAttachments:B,setFiles:K,attachments:J,setTipTapEditorState:q,files:X,syncSourceUuids:$,isUploadingDriveSync:Q,isUploadingGithubSync:Z,sendMessage:ee,conversation:et,isChatSyncing:ea,isProjectSyncing:es,setSyncSourceUuids:en,isSending:el,focusInput:ei,promptInputRef:er,willRedirectOnSubmit:eo,hasBlockingWarning:ed,isUploadingFile:ec,setIsUploadingFile:eu,validateMaxUploadLimit:em,onPasteFiles:ep,uploadInputProps:eh,hasAttachments:ef,isNewConversation:ex,isImprovingPrompt:eg}=(0,w.o)(),{incognitoModeEnabled:ey}=(0,M.S)();(0,p.useImperativeHandle)(t,()=>({setContent:(e,t,a)=>{W(e,{forceUpdateTiptap:!0}),B("function"==typeof t?t(J):t),K("function"==typeof a?a(X):a)},sendMessage:ee,setAttachments:e=>{B("function"==typeof e?e(J):e)},getAttachments:()=>J})),(()=>{let{setPrompt:e,setAttachments:t,setFiles:a}=(0,A.Tc)(e=>({setPrompt:e.setPrompt,setAttachments:e.setAttachments,setFiles:e.setFiles}),"useSavePromptOnFail"),{failedStreamRetryData:s,setFailedStreamRetryData:n}=(0,L.x)();(0,p.useEffect)(()=>{null!==s&&(e(s.prompt),t(s.attachments),a(s.files),n(null))},[s,t,n,a,e])})();let{fetchInputAutocompletion:ev}=(0,x.$z)(null==et?void 0:et.id),ej=function(e,t,a,s,n,l){let[i,r]=(0,p.useState)(!1);return(0,p.useEffect)(()=>{let e=e=>{"Shift"===e.key&&r(!0)},t=e=>{"Shift"===e.key&&r(!1)};return window.addEventListener("keydown",e),window.addEventListener("keyup",t),()=>{window.removeEventListener("keydown",e),window.removeEventListener("keyup",t)}},[]),(0,p.useCallback)(e=>{var a,r,o;let d=null==(r=e.clipboardData)||null==(a=r.files)?void 0:a.length,c=null==(o=e.clipboardData)?void 0:o.getData("text/plain"),u=null==c?void 0:c.length;if(u&&!d){let e=(0,O.$)(c);e&&l(e)}if(d&&!u){s({newUploads:Array.from(e.clipboardData.files)})&&n(e.clipboardData.files),e.preventDefault();return}s({numNewPotentialAttachments:1,showError:!1})&&(!u||c.length<4e3||i||(e.preventDefault(),t(e=>[...e,{file_name:"",file_size:c.length,file_type:"txt",extracted_content:c}])))},[s,t,n,l,i])}(0,B,0,em,ep,(()=>{let{prompt:e}=(0,A.QT)(),{setSyncSourceUuids:t,isAtMaxNumUploads:a,setIsUploadingDriveSync:s}=(0,w.o)(),l=(0,I.LP)(),{addError:i}=(0,N.Y)(),r=(0,h.A)(),o=(0,D.Uz)({type:"remote"}),d=(0,T.kO)(),c=null==o?void 0:o.find(e=>e.url&&T.TI[e.url]===S.v8.GDRIVE),u=!c&&d,{mutate:m}=(0,f.EF)({onMutate:()=>{s(!0)},onSuccess:e=>{t(t=>[...t,e.uuid]),s(!1)},onError:e=>{s(!1),i((0,R.J)(e),{error:e})},meta:{noToast:!0}}),{isDriveAuthenticated:x,initDriveAuth:g}=(0,I.cI)({callerIdentifier:"chat-input",handleAuthSuccess:()=>{for(let t of e.match(/(https?:\/\/[^\s]+)/gi)||[]){let e=(0,O.$)(t);e&&y(e,!0)}}}),y=(0,p.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!u&&(l||t)){if(!x&&!t)return void i((0,n.jsx)("span",{children:(0,n.jsx)(E.A,{defaultMessage:"<button>Authenticate</button> to paste link as attachment",id:"85AH1hyv0s",values:{button:e=>(0,n.jsx)("button",{className:"underline",onClick:g,children:e})}})}));if(a)return void i(r.formatMessage({defaultMessage:"You can add at most {maxUploads, plural, one {# attachment} other {# attachments}} to a message.",id:"wvnM4s8976"},{maxUploads:C.XA.maxTotalUploadsPerMessage}));c?m({sync_source_type:S.v8.MCP_RESOURCES,sync_source_config:{server_uuid:c.uuid,resource:{uri:"drive:///"+e,name:e.split("/").pop()||e}}}):m({sync_source_type:S.v8.GDRIVE,sync_source_config:{uri:e}})}},[u,l,x,a,c,i,g,r,m]);return y})()),eb=(0,k.U)(H),{value:ew}=(0,o.fS)("test_gated_strings"),eM=(0,d.q)(),e_=a||el||0===U.length&&0===J.length&&0===X.length&&0===$.length||ec||Q||Z||ea||es||ed||eb||(null==et?void 0:et.isSampling)===!0,eA=(0,p.useCallback)(async()=>{!e_&&(await ee(),y&&y())},[e_,y,ee]),ek=(0,p.useCallback)(e=>{let t=e.target;"BUTTON"===t.tagName||t.closest("button")||t.closest("[role]")||t.closest("a")||t.closest("input")||t.closest("select")||t.closest("textarea")||ei()},[ei]),eC=(0,p.useRef)(null),eN=(0,f.NY)($).map((e,t)=>{let{data:a}=e;return{syncSource:a,uuid:$[t]}}),eS=(0,n.jsx)(u.N,{initial:!1,children:ef&&(0,n.jsx)(m.P.div,{className:"overflow-hidden rounded-b-2xl",initial:{height:0},animate:{height:"auto"},exit:{height:0},children:(0,n.jsx)(b,{isUploadingFile:ec,isUploadingSync:Q||Z,attachments:J,files:X,syncSourceResults:eN,onRemoveAttachment:e=>{B(t=>t.filter((t,a)=>a!==e))},onRemoveFile:e=>{K(t=>t.filter((t,a)=>a!==e))},onRemoveSyncSource:e=>{en(t=>t.filter(t=>t!==e))}})},"attachments")}),eE=(0,P.h)(null==et?void 0:et.id,null==et?void 0:et.model),eI=(0,l.WZ)(null==et?void 0:et.id),{value:eT}=(0,o.fS)("hey_hello_hi");return eT&&et&&eE&&"refusal"===eE.stopReason&&eE.fallback&&eE.lastMessage&&et.id&&et.model?(0,n.jsx)(g.sF,{model:et.model,conversationUuid:et.id,lastMessage:eE.lastMessage,fallback:eE.fallback,onRetryWithFallback:async()=>{if(!eE.lastMessage.parent_message_uuid)return;let{model:e}=await eI.mutateAsync();null==j||j(eE.lastMessage.parent_message_uuid,e)}}):eM?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(aL,{onPasteCapture:e=>{var t,a;(null==er||null==(a=er.current)||null==(t=a.getEditor())?void 0:t.isFocused)&&ej(e)},children:[(0,n.jsx)("input",{ref:eC,id:"chat-input-file-upload-".concat(s),"data-testid":"file-upload","aria-hidden":"true",tabIndex:-1,className:"absolute -z-10 h-0 w-0 overflow-hidden opacity-0 select-none",...eh}),"bottom"===s&&(0,n.jsx)("div",{className:"px-3 md:px-2",children:(0,n.jsx)(g.Qg,{placement:s,onRetry:(e,t)=>null==j?void 0:j(e,t)})}),(0,n.jsxs)(aR,{onClick:ek,className:(0,c.A)("border border-transparent",eo&&el&&"animated-loading-background",eg?"transition-all duration-500 ring-1 ring-border-300/50 dark:ring-border-300/50":"",ey?"border-dashed bg-clip-padding !border-border-200 shadow-[0_0.25rem_1.25rem_hsl(var(--always-black)/3.5%)] focus-within:shadow-[0_0.25rem_1.25rem_hsl(var(--always-black)/7.5%)]":"shadow-[0_0.25rem_1.25rem_hsl(var(--always-black)/3.5%),0_0_0_0.5px_hsla(var(--border-300)/0.15)] hover:shadow-[0_0.25rem_1.25rem_hsl(var(--always-black)/3.5%),0_0_0_0.5px_hsla(var(--border-200)/0.3)] focus-within:shadow-[0_0.25rem_1.25rem_hsl(var(--always-black)/7.5%),0_0_0_0.5px_hsla(var(--border-200)/0.3)] hover:focus-within:shadow-[0_0.25rem_1.25rem_hsl(var(--always-black)/7.5%),0_0_0_0.5px_hsla(var(--border-200)/0.3)]"),children:[(0,n.jsxs)("div",{className:"flex flex-col gap-3.5 m-3.5",children:[(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)(_.P,{ref:er,prompt:U,tipTapEditorState:Y,setTipTapEditorState:q,onSubmit:eA,onReady:v,placement:s,placeholder:null!=i?i:ex?ew?(0,r.O)({id:"spread_attempt_mind",intl:G}):G.formatMessage({defaultMessage:"How can I help you today?",id:"XLcM6WHfQR"}):ew?(0,r.O)({id:"window_edge_kiwi",intl:G}):G.formatMessage({defaultMessage:"Reply to Claude...",id:"kSt28+RchS"}),fetchInputAutocompletion:ev,className:V?"!opacity-0":void 0}),(0,n.jsx)(u.N,{children:V?(0,n.jsx)(m.P.p,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"self-start absolute pointer-events-none inset-0 text-text-500 line-clamp-2",children:V}):eg&&U?(0,n.jsx)(m.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 pointer-events-none overflow-hidden rounded",children:(0,n.jsx)(m.P.div,{className:"absolute inset-0 bg-gradient-to-r from-transparent via-always-white/20 dark:via-always-white/10 to-transparent",animate:{x:["-100%","100%"]},transition:{duration:1.5,ease:"easeInOut",repeat:1/0}})}):null})]}),(0,n.jsx)(tm,{placement:s,isDisabled:e_})]}),(0,n.jsx)(tf,{disabled:z,enableScreenDrop:F}),eS]}),"bottom"!==s&&(0,n.jsx)("div",{className:"px-3 md:px-2",children:(0,n.jsx)(g.Qg,{placement:s,onRetry:(e,t)=>null==j?void 0:j(e,t)})}),"bottom"===s&&(0,n.jsx)(aD,{})]}),(0,n.jsx)(aN,{})]}):(0,n.jsxs)(aL,{children:[(0,n.jsx)(aR,{className:"bottom"===s?"h-[99px]":"h-[123px]"}),"bottom"===s&&(0,n.jsx)(aD,{})]})});aT.displayName="ChatInputContent";let aO=(0,p.forwardRef)((e,t)=>{let{disabled:a,placement:s,placeholder:l,onSubmit:i,onReady:r,onRetry:o,enableScreenDrop:d=!1,disableDropZone:c=!1}=e;return(0,n.jsx)(ez.Xx,{placement:s,children:(0,n.jsx)(aT,{ref:t,disabled:a,placement:s,placeholder:l,onSubmit:i,onReady:r,onRetry:o,enableScreenDrop:d,disableDropZone:c})})});aO.displayName="ChatInput";let aR=i.J.div(aS()),aD=i.J.div(aE()),aL=i.J.fieldset(aI())},46793:(e,t,a)=>{a.d(t,{sF:()=>eL,Qg:()=>eD,Id:()=>eR});var s=a(54568),n=a(19736),l=a(86545),i=a(34003),r=a(64328),o=a(45054),d=a(21266),c=a(23812),u=a(71462),m=a(68067),p=a(2e3),h=a(95617),f=a(28044),x=a(69335),g=a(7620),y=a(59666),v=a(48579),j=a(93714),b=a(79052),w=a(50571),M=a(22167),_=a(55839),A=a(69524),k=a(58841),C=a(54671),N=a(52500),S=a(42605),E=a(66365),I=a(72902),T=a(45312),O=a(6149),R=a(91820),D=a(1720),L=a(3075),P=a(20683),F=a(55562),z=a(77223),G=a(49737),U=a(19069),Y=a(39613),H=a(17333),V=a(13750);function W(e){let{onReady:t,children:a,onSuccess:n}=e,l=(0,H.useStripe)(),i=(0,H.useElements)(),{account:o}=(0,r.YL)(),[d,u]=(0,g.useState)(null),[m,p]=(0,g.useState)(!1),[h,f]=(0,g.useState)(!1),{mutateAsync:x}=(0,v.k0)(),j=async()=>{if(!m&&l&&i){p(!0);try{let e=await i.submit();if(e.error){e.error.message&&u(e.error.message);return}let t=await x(),{error:a}=await l.confirmPayment({elements:i,clientSecret:t.clientSecret,redirect:"if_required"});(null==a?void 0:a.message)&&"validation_error"!==a.type&&u(a.message),a||n()}catch(e){u(e.message)}finally{p(!1)}}};return(0,s.jsxs)(V.lV,{onSubmit:()=>{m||j()},children:[(0,s.jsx)(H.PaymentElement,{id:"payment-element",options:{readOnly:m,layout:"tabs",terms:{card:"never"},defaultValues:{billingDetails:{email:null==o?void 0:o.email_address,name:null==o?void 0:o.full_name}}},onReady:()=>{f(!0),t&&t()}}),d&&(0,s.jsx)("div",{className:"text-danger-000 mt-4",id:"payment-message",children:d}),(0,s.jsxs)("div",{className:"mt-5 flex flex-row flex-wrap items-center justify-end gap-3",children:[a,(0,s.jsx)(c.$,{type:"submit",loading:m,variant:"flat",className:"bg-accent-pro-100 hover:bg-accent-pro-200 w-full py-6",disabled:!h,children:(0,s.jsx)(y.A,{defaultMessage:"Confirm payment",id:"Dja1nAdMHW"})})]}),(0,s.jsx)("div",{className:"mt-3 text-text-500 text-sm text-center",children:(0,s.jsx)(y.A,{defaultMessage:"By providing your payment information, you allow Anthropic to charge your card in the amount above. Purchase non-refundable.",id:"0L0VGgMTRs"})})]})}function B(e){let{amount:t,currency:a,children:n,className:l,onSuccess:i}=e,r=(0,z.ib)(),[o,d]=(0,g.useState)(!0),{theme:c,mode:u}=(0,U.D)(),m=(0,F.l)().get(Y.eT.COLOR_MODE),p={fontSizeBase:"16px",colorBackground:(0,G.w)(c,u,m,"bg-000"),colorText:(0,G.w)(c,u,m,"text-100")},h={mode:"payment",amount:t,currency:null==a?void 0:a.toLowerCase(),payment_method_types:["card","link"],loader:"never",appearance:{theme:"stripe",variables:p}};return(0,s.jsxs)("div",{className:(0,I.A)("relative",l),children:[(0,s.jsx)("div",{className:(0,I.A)("w-full pt-1 transition-opacity duration-1000",{"opacity-0":o}),children:(0,s.jsx)(H.Elements,{options:h,stripe:r,children:(0,s.jsx)(W,{onReady:()=>d(!1),onSuccess:i,children:n})})}),o&&(0,s.jsx)(K,{})]})}let K=()=>(0,s.jsx)("div",{className:"absolute inset-0 flex h-full w-full items-center justify-center",children:(0,s.jsx)(D.Loading,{})});function J(e){var t,a;let n,{isOpen:l,onClose:i,conversationUuid:d}=e,c=(0,o.Y)(),{activeOrganization:u}=(0,r.YL)(),m=(0,R.$)(),p=(0,g.useCallback)(()=>{c.addSuccess((0,s.jsx)(y.A,{defaultMessage:"Message limits reset. Let’s chat!",id:"LGCoQdVha4"})),(null==u?void 0:u.uuid)&&d&&m({type:"within_limit"},u.uuid,d),i()},[null==u?void 0:u.uuid,d,i,c,m]),{data:h,isLoading:f}=(0,v.Zr)();return h&&(n=(0,P.vv)(h.price+(null!=(t=h.taxAmount)?t:0),h.currency,{preferWholeNumber:!0})),(0,s.jsx)(L.aF,{isOpen:l,onClose:i,title:(0,s.jsx)("div",{className:"text-text-200 font-ui-serif text-xl font-medium mt-2",children:(0,s.jsx)(y.A,{defaultMessage:"Reset usage limits",id:"YKpO8tTise"})}),hasCloseButton:!0,modalSize:"lg",children:(0,s.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,s.jsxs)("div",{className:"flex p-3 justify-center items-center gap-10 self-stretch rounded-xl border border-accent-pro-100 bg-accent-pro-900 mt-6",children:[(0,s.jsx)("div",{className:"flex flex-col px-5 gap-2",children:f||!h?(0,s.jsx)(D.Loading,{size:"sm"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("p",{className:"text-text-100 text-3xl/6 font-medium",children:n}),null===h.taxAmount&&(0,s.jsx)("p",{className:"text-text-500 text-sm/3 text-nowrap",children:(0,s.jsx)(y.A,{defaultMessage:"+ tax",id:"H/9uGFjKzR"})})]})}),(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("p",{className:"text-text-200 text-sm",children:(0,s.jsx)(y.A,{defaultMessage:"Immediately get access to Claude instead of waiting for usage limits to reset.",id:"6Gj58FRZ27"})}),(0,s.jsx)("p",{className:"text-text-200 text-sm",children:(0,s.jsx)(y.A,{defaultMessage:"This is a one-time payment.",id:"lVfQHZlUq0"})})]})]}),(0,s.jsx)(B,{amount:h?h.price+(null!=(a=h.taxAmount)?a:0):500,currency:(null==h?void 0:h.currency)||"USD",onSuccess:p})]})})}function q(e){let{messageLimit:t,placement:a,defaultWarning:n,defaultTheme:l}=e,i=(0,E.useExperiment)("rate_limit_resets").get("allow_rate_limit_resets",!1);return i&&("exceeded_limit"===t.type||"approaching_limit"===t.type&&0===t.remaining)?(0,s.jsx)(N.L,{theme:"pro",placement:a,warning:(0,s.jsx)($,{messageLimit:t})}):i&&"approaching_limit"===t.type?(0,s.jsx)(N.L,{theme:"info",placement:a,warning:(0,s.jsx)(X,{messageLimit:t})}):(0,s.jsx)(N.L,{theme:l,warning:n,placement:a})}let X=e=>{let{messageLimit:t}=e,[a,n]=(0,g.useState)(!1);return(0,s.jsxs)("div",{className:"w-full",children:[(0,s.jsxs)("div",{className:"flex w-full flex-col items-center md:flex-row gap-2",children:[(0,s.jsx)("div",{className:"flex flex-row items-center gap-2 md:w-full",children:(0,s.jsx)("div",{children:(0,s.jsx)("div",{className:"text-sm",children:1===t.remaining?(0,s.jsx)(y.A,{id:"RoowG4DICE",defaultMessage:"You have 1 message left before hitting usage limits"}):(0,s.jsx)(y.A,{id:"4rS9S85sm+",defaultMessage:"You have {numMessagesRemaining} messages left before hitting usage limits",values:{numMessagesRemaining:t.remaining}})})})}),(0,s.jsx)("div",{className:"-mt-px w-full whitespace-nowrap md:w-fit",children:(0,s.jsx)(c.$,{variant:"unstyled",className:(0,I.A)("@lg:w-fit w-full shrink-0","text-sm font-medium","text-accent-pro-000","hover:text-accent-pro-000 hover:bg-bg-500/40"),onClick:()=>{n(!0)},children:(0,s.jsx)(y.A,{id:"0Lg76lu7jn",defaultMessage:"Reset limits"})})})]}),(0,s.jsx)(J,{isOpen:a,onClose:()=>n(!1),conversationUuid:t.conversationUuid})]})},$=e=>{let{messageLimit:t}=e,[a,n]=(0,g.useState)(!1);if(!t.resetsAt)return null;let l=T.c9.fromSeconds(t.resetsAt);return(0,s.jsxs)(O.q,{minimalUi:!0,actionButton:(0,s.jsxs)(c.$,{variant:"unstyled",size:"sm",className:(0,I.A)("@lg:w-fit w-full shrink-0","bg-accent-pro-100 text-oncolor-100 font-medium font-ui transition-colors hover:bg-accent-pro-200"),onClick:()=>{n(!0)},children:[(0,s.jsx)(y.A,{id:"0Lg76lu7jn",defaultMessage:"Reset limits"}),(0,s.jsx)("span",{className:"inline-block text-[0.65rem] bg-bg-000/20 ml-2 px-1.5 py-0.5 rounded",children:(0,s.jsx)(y.A,{id:"vroSRZd5vI",defaultMessage:"BETA"})})]}),children:[(0,s.jsx)(y.A,{id:"74NSYSM2xX",defaultMessage:"You can reset usage limits now or wait until {time}.",values:{time:(0,s.jsx)("span",{className:"inline-block",children:l.toLocaleString(T.c9.TIME_SIMPLE)})}}),(0,s.jsx)(J,{isOpen:a,onClose:()=>n(!1),conversationUuid:t.conversationUuid})]})};var Q=a(88775),Z=a(73619),ee=a(37e3),et=a(19977),ea=a(96547),es=a(45271);let en=()=>{let e=(0,ea.lu)();return(0,s.jsxs)(ee.x,{children:[(0,s.jsx)("p",{className:"text-[13px] text-text-200",children:e?(0,s.jsx)(y.A,{defaultMessage:"Connect your tools to Claude",id:"exSmFaQCLC"}):(0,s.jsx)(y.A,{defaultMessage:"Upgrade to connect your tools to Claude",id:"kIvAPf8iSA"})}),(0,s.jsxs)("div",{className:"flex flex-row items-center gap-2",children:[(0,s.jsxs)("div",{className:"flex flex-row",children:[e&&["https://mcp.notion.com/mcp","https://mcp.canva.com/mcp","https://mcp.linear.app/sse","https://mcp.atlassian.com/v1/sse","https://mcp.asana.com/sse"].map(e=>(0,s.jsx)("div",{className:"w-3",children:(0,s.jsx)(es.z,{size:18,imageSize:13,type:"favicon",src:e})},e)),["/images/icons/messages-app.svg","/images/icons/notes-app.svg","/images/icons/chrome-app.svg"].map(e=>(0,s.jsx)("div",{className:"w-3",children:(0,s.jsx)(es.z,{size:18,imageSize:13,type:"external",src:e})},e))]}),(0,s.jsx)(et.J,{size:16,className:"text-text-500"})]})]})};var el=a(84617),ei=a(10369);function er(){let e=(0,r.Kq)(),t=(0,ei.A)();return(0,s.jsx)(O.q,{actionButton:null,title:t.formatMessage({defaultMessage:"Team plan canceled",id:"KuqVOfg9/0"}),children:e?(0,s.jsx)(y.A,{defaultMessage:"You can no longer chat with Claude. To restore full access, <link>renew your subscription</link>.",id:"L2pC0kiNNO",values:{link:e=>(0,s.jsx)(el.Y,{className:"whitespace-nowrap",href:"/settings/billing",children:e})}}):(0,s.jsx)(y.A,{defaultMessage:"You can no longer chat with Claude.",id:"hxcpUUnV0b"})})}var eo=a(68034);let ed=()=>{let e=(0,eo.h)({allowSelfUpgrade:!1});return(0,s.jsx)(O.q,{actionButton:e,children:(0,s.jsx)(y.A,{defaultMessage:"Due to capacity constraints, chatting with Claude is currently not available. Please try again shortly.",id:"kfyWX0MxKQ"})})};var ec=a(72522),eu=a(18849);let em=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,I.A)("text-text-100 font-medium underline hover:no-underline",t),...a})},ep=e=>{var t;let a,{inaccessibleSyncSources:n}=e,{chatResourceState:l}=(0,k.i)(),i=(0,ec.v)(),{isDrawerExpanded:r,setIsDrawerExpanded:o}=(0,eu.x)(),d=n.every(e=>e.status.state===p.I5.UNAUTHENTICATED)&&1===new Set(n.map(e=>e.type)).size,c=null==(t=n[0])?void 0:t.type,u=(0,s.jsx)("button",{onClick:()=>{o(!0)},children:(0,s.jsx)(em,{children:(0,s.jsx)(y.A,{defaultMessage:"Show {count, plural, one {# Item} other {# Items}}",id:"1HlfJxfH7H",values:{count:n.length}})})});return d&&null!==c?a=(0,s.jsx)("button",{onClick:()=>i(c),children:(0,s.jsx)(em,{children:(0,s.jsx)(y.A,{defaultMessage:"Reconnect with {sourceName}",id:"dUareRZF9G",values:{sourceName:p.sb[c]}})})}):l.conversationUuid&&!r&&(a=u),(0,s.jsx)(ee.x,{children:(0,s.jsx)(y.A,{defaultMessage:"Some of your content could not be loaded. {actionButton}",id:"Ibsz06ys2B",values:{actionButton:a}})})};var eh=a(24407);let ef=eh.z.array(eh.z.object({text:eh.z.string(),href:eh.z.string().optional(),button:eh.z.boolean().optional()})).nullable();function ex(e){let{messageComponents:t}=e;return(0,s.jsx)(ee.x,{children:(0,s.jsx)(eg,{messageComponents:t})})}function eg(e){let{messageComponents:t}=e;return(0,s.jsx)("div",{children:t.map((e,t)=>e.button?(0,s.jsx)(c.$,{href:e.href,target:"_blank",children:e.text},t):e.href?(0,s.jsx)(el.Y,{href:e.href,...e.href.startsWith("/")?{}:{target:"_blank"},children:e.text},t):(0,s.jsx)("span",{children:e.text},t))})}var ey=a(28483),ev=a(87784),ej=a(44894),eb=a(74813),ew=a(34385),eM=a(11717);function e_(e){let{isOpen:t,setIsOpen:a,files:n,isNewConversation:l}=e,i=(0,ei.A)();return(0,s.jsxs)(L.aF,{isOpen:t,hasCloseButton:!0,title:i.formatMessage({defaultMessage:"Analysis tool required",id:"jvGhSl5Gpz"}),onClose:()=>a(!1),children:[(0,s.jsxs)("div",{className:"my-4 text-pretty flex flex-col gap-2",children:[(0,s.jsx)("div",{children:(0,s.jsx)(y.A,{defaultMessage:"Claude requires the analysis tool to be enabled to analyze the following files:",id:"DWgtKtw1y9"})}),(0,s.jsx)("ul",{className:"list-disc pl-4",children:n.map(e=>(0,s.jsx)("li",{children:e.file_name},e.file_uuid))}),(0,s.jsx)("div",{children:l?i.formatMessage({defaultMessage:"If you start this conversation without turning on the analysis tool, these files will not be available to Claude.",id:"0r1iTiKoSi"}):i.formatMessage({defaultMessage:"Please enable the analysis tool and then start a new chat in this project to analyze these files.",id:"YLHCS8L8fc"})})]}),(0,s.jsx)(L.vW,{layout:"right",children:(0,s.jsx)(L.yl,{type:"button",size:"lg",onClick:()=>a(!1),children:(0,s.jsx)(y.A,{defaultMessage:"OK",id:"kAEQyVFWDv"})})})]})}function eA(e){let{files:t,isNewConversation:a}=e,{track:n}=(0,eb.st)(),{openFeaturePreviewModal:l}=(0,eM.go)(),[i,r]=(0,g.useState)(!1);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e_,{isOpen:i,setIsOpen:r,isNewConversation:a,files:t}),(0,s.jsx)(ee.x,{children:(0,s.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,s.jsx)("div",{children:(0,s.jsx)(y.A,{defaultMessage:"Claude cannot access some of the <a>files attached</a> to this conversation",id:"dlrqZaDnOO",values:{a:e=>(0,s.jsx)(el.Y,{href:"#",onClick:()=>r(!0),children:e})}})}),(0,s.jsx)("div",{children:(0,s.jsx)("a",{className:"text-accent-secondary-000 font-medium",href:"#",onClick:()=>{n({event_key:"claudeai.settings.preview_feature.opened",source:"ooc_files_warning"}),l()},children:(0,s.jsx)(y.A,{defaultMessage:"Enable analysis tool",id:"UDUWEABw3p"})})})]})})]})}var ek=a(79383),eC=a(96614),eN=a(18088),eS=a(98304),eE=a(16685);let eI=eh.z.object({id:eh.z.string(),bodyMd:eh.z.string(),isDismissable:eh.z.boolean(),proUpsell:eh.z.boolean(),alertForModels:eh.z.array(eh.z.string())}).nullable(),eT=e=>{let{alert:t,setHideAlert:a}=e,n=(0,r.UC)(),l=(0,eo.h)();return(0,s.jsxs)(ee.x,{children:[(0,s.jsx)(ek.Lv,{children:(0,s.jsx)(eE.o,{children:t.bodyMd})}),n&&t.proUpsell&&l,t.isDismissable&&(0,s.jsx)(c.$,{className:"ml-2 h-4 w-4 translate-y-[0.5px] rounded",size:"unset",variant:"ghost",onClick:()=>a(!0),children:(0,s.jsx)(eS.X,{size:12})})]})};var eO=a(40459);let eR=()=>{let e=(0,M.X0)(p.v8.GMAIL),t=(0,M.X0)(p.v8.GCAL),a=(0,b.$f)();return!(0,f.V)()&&(e||t||a)},eD=e=>{var t,a,l,o,d,c,h,f,g,b,M,A,E,I,T,O;let R,{placement:D,onRetry:L}=e,{isPromptUnsafe:P}=(0,Q.QT)(),{attachments:F,conversation:z,files:G}=(0,S.o)(),U=(0,Q.QN)(),Y=(0,n.WZ)(null==z?void 0:z.id),{setMcpDirectoryModalIsOpen:H}=(0,C.tl)(),V=(0,ev.h)(null==z?void 0:z.id,null==z?void 0:z.model),W=(null==z?void 0:z.id)&&V?(0,s.jsx)(ev.g,{conversationUuid:z.id,model:z.model,lastMessage:V.lastMessage,stopReason:V.stopReason,onRetryWithFallback:async()=>{if(!V.lastMessage.parent_message_uuid)return;let{model:e}=await Y.mutateAsync();L(V.lastMessage.parent_message_uuid,e)}}):null,{exceededMessageLimitWarning:B,approachingMessageLimitWarning:K,overageExceededWarning:J,messageLimit:X}=(0,ey.IK)(null!=(t=null==z?void 0:z.id)?t:null),{isRavenCanceled:$}=(0,v.bF)(),et=$?(0,s.jsx)(er,{}):void 0,ea=(0,r.r$)()?(0,s.jsx)(ed,{}):void 0,es=(()=>{let{chatResourceState:e}=(0,k.i)();return[...e.syncSources||[],...(0,j.CO)(U).data||[]].filter(e=>{var t;return p.xj.includes(null==e||null==(t=e.status)?void 0:t.state)})})(),el=es.length?(0,s.jsx)(ep,{inaccessibleSyncSources:es}):void 0,ei=(0,_.CD)(),eo=(0,r.mV)(),ec=ei&&!eo?(0,s.jsx)(ee.x,{children:(0,s.jsxs)("div",{className:"text-danger-000 flex items-center gap-1",children:[(0,s.jsx)(x.N,{className:"h-4 w-4 shrink-0",weight:"regular"}),(0,s.jsx)("span",{children:(0,s.jsx)(y.A,{defaultMessage:"Less accurate Google Drive search results while Claude catalogs your Drive files",id:"ljvRWwDUyf"})})]})}):void 0,eu=(0,Z.U)(U)?(0,s.jsx)(ee.x,{children:(0,s.jsxs)("div",{className:"text-danger-000 flex items-center gap-1",children:[(0,s.jsx)(x.N,{className:"h-4 w-4 shrink-0",weight:"regular"}),(0,s.jsx)("span",{children:(0,s.jsx)(y.A,{defaultMessage:"Project knowledge exceeds maximum. Remove files to continue.",id:"IqUMWBoy4d"})})]})}):void 0,{systemAlertFromConfig:em}=(e=>{let t=(0,m.T9)("claude_ai_system_alerts","alert",null,eI),[a,n]=(0,eN.Vc)("".concat(e,":").concat(null==t?void 0:t.id,":hideAlertOnConversation"),!1),l=null==t?void 0:t.alertForModels,i=(0,eC.Z3)(e);return e&&(!l||l.includes(i))&&t&&!a?{systemAlertFromConfig:{alert:t,component:(0,s.jsx)(eT,{alert:t,setHideAlert:n})}}:{}})(null!=(a=null==z?void 0:z.id)?a:null),eh=em?em.component:null,eg=(0,i.u9)(),eb=function(e,t,a){let{data:n=[]}=(0,ew.uE)(a),l=(0,ej.cV)(),i=[...e,...t?t.files:[],...n].filter(e=>e.file_kind===u.M.Blob);return!l&&i.length?(0,s.jsx)(eA,{files:i,isNewConversation:!t}):null}(G,z,U),eM=eg?null:eb,e_=function(){let e=(0,m.T9)("claudeai_warning_message","components",null,ef);return e?(0,s.jsx)(ex,{messageComponents:e}):null}(),ek=eR(),eS=(0,m.fS)("claudeai_unsafe_prompt_inline"),eE=P&&ek&&eS?(0,s.jsx)(ee.x,{children:(0,s.jsxs)("div",{className:"text-danger-000 flex items-center gap-1",children:[(0,s.jsx)(x.N,{className:"h-4 w-4 shrink-0",weight:"regular"}),(0,s.jsx)("span",{children:(0,s.jsx)(y.A,{defaultMessage:"Use caution before running this prompt. Malicious conversation content could trick Claude into attempting harmful actions or sharing your data.",id:"bWRp6wwzXA"})})]})}):null,eD=F.some(e=>e.origin===u.R.URLParameter)?(0,s.jsx)(ee.x,{children:(0,s.jsxs)("div",{className:"text-danger-000 flex items-center gap-1",children:[(0,s.jsx)(x.N,{className:"h-4 w-4 shrink-0",weight:"regular"}),(0,s.jsx)("span",{children:(0,s.jsx)(y.A,{defaultMessage:"Artifacts are user-generated and may contain unverified or potentially unsafe content.",id:"/0GesG9R4n"})})]})}):null,eL=null!=(o=null!=(l=null!=W?W:eE)?l:eD)?o:null,eP=null!=eu?eu:null,eF=(0,w.ko)({shouldTrack:"onpage"===D})&&"onpage"===D?(0,s.jsx)(en,{}):null,ez=null!=(O=null!=(T=null!=(I=null!=(E=null!=(A=null!=(M=null!=(b=null!=(g=null!=(f=null!=(h=null!=(c=null!=(d=null!=eL?eL:eP)?d:B)?c:J)?h:et)?f:ea)?g:el)?b:eM)?M:eh)?A:ec)?E:e_)?I:K)?T:eF)?O:null;ez===eF&&(R=()=>H(!0));let eG=em&&em.alert.proUpsell?"pro":B||eM||ec||K?"info":eF?"chin":"danger",eU=(0,r.O9)(),eY=(0,r.zc)();return!eP&&X&&(eU||eY)&&(K||B)&&!eO.env.NEXT_PUBLIC_DISABLE_PAYMENTS?(0,s.jsx)(q,{messageLimit:X,defaultWarning:ez,defaultTheme:eG,placement:D}):(0,s.jsx)(N.L,{warning:ez,placement:D,theme:eG,onClick:R})};function eL(e){var t,a;let{model:n,conversationUuid:i,lastMessage:r,fallback:o,onRetryWithFallback:u}=e,[p,h]=(0,g.useState)(!1),{allModelOptions:f}=(0,l.A9)(),x=f.find(e=>e.model===n),v=(null==x||null==(t=x.name)?void 0:t.replace("Claude",""))||n,j=null!=(a=(0,m.T9)("hiking_boots","value",null,m.Lu))?a:"";return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eP,{isOpen:p,onClose:()=>h(!1),conversationUuid:i,lastMessage:r}),(0,s.jsx)("div",{className:"mx-2 md:mx-0",children:(0,s.jsxs)("div",{className:"flex flex-col md:flex-row min-h-[99px] py-4 px-6 shadow-[0_0.25rem_1.25rem_hsl(var(--always-black)/3.5%)] rounded-2xl bg-bg-000 md:items-center gap-4 md:gap-6 border-0.5 border-border-300",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-1 text-sm flex-1",children:[(0,s.jsx)("h4",{className:"font-bold",children:(0,s.jsx)(y.A,{defaultMessage:"Chat paused",id:"bL7dVUkHa0"})}),(0,s.jsx)("p",{className:"text-text-300",children:(0,s.jsx)(d.YX,{id:"howdy",dangerouslyVisiblePublicValues:{currentModelName:v,fallbackModelName:o.displayName,feedback:e=>(0,s.jsx)("button",{className:"underline cursor-pointer",onClick:()=>{h(!0)},children:e}),learnMore:e=>(0,s.jsx)("a",{className:"underline cursor-pointer",href:j,target:"_blank",children:e})}})})]}),(0,s.jsx)("div",{className:"w-full md:w-auto",children:(0,s.jsx)(c.$,{onClick:u,className:"w-full md:w-auto",children:(0,s.jsx)(y.A,{defaultMessage:"Retry with {fallbackModelName}",id:"SH+4I4XTEI",values:{fallbackModelName:o.displayName}})})})]})}),(0,s.jsx)("div",{className:"bg-bg-100 w-full h-2"})]})}function eP(e){let{isOpen:t,onClose:a,conversationUuid:n,lastMessage:l}=e,i=(0,o.Y)();return(0,s.jsx)(A.B,{isOpen:t,showOptions:!1,conversationUuid:n,message:l,requestedFeedbackType:h.kj.SC_FALSE_POSITIVE,setRequestedFeedbackType:()=>{},onClose:a,onSuccess:()=>{a(),i.addSuccess((0,s.jsx)(y.A,{defaultMessage:"Thanks for your feedback!",id:"coh2h6fh1P"}))}})}},54671:(e,t,a)=>{a.d(t,{Xx:()=>z,_9:()=>F,CH:()=>G,tl:()=>U});var s=a(54568),n=a(74813),l=a(99969),i=a.n(l),r=a(7620),o=a(94629),d=a(14691),c=a(9398),u=a(47592),m=a(2e3),p=a(95617),h=a(28044),f=a(10369),x=a(96547),g=a(45538),y=a(79052),v=a(36016),j=a(22167),b=a(22624),w=a(88775),M=a(45271),_=a(35580),A=a(97208),k=a(3424),C=a(81023),N=a(64145),S=a(23169),E=a(43906),I=a.n(E);let T={includeScore:!0,isCaseSensitive:!1,ignoreLocation:!0,threshold:.4},O={path:null,inputMenuSearchQuery:"",setInputMenuSearchQuery:i(),inputMenuIsOpen:!1,setInputMenuIsOpen:i(),menuView:{rootItems:[],currentItems:[]},handleClickItem:i(),handleBack:i(),highlightedItemKey:null,setHighlightedItemKey:i(),animationDirection:"none"},R={...O,styleModalOpenWithScreen:null,setStyleModalOpenWithScreen:i(),createProjectModalIsOpen:null,setCreateProjectModalIsOpen:i(),githubModalIsOpen:!1,setGithubModalIsOpen:i(),gmailAuthModalIsOpen:!1,setGmailAuthModalIsOpen:i(),createPromptArgumentModalIsOpen:null,setCreatePromptArgumentModalIsOpen:i()},D={...O,mcpDirectoryModalIsOpen:!1,setMcpDirectoryModalIsOpen:i()},L=(0,r.createContext)(R),P=(0,r.createContext)(D),F=e=>{let{actions:t,rootItems:a,menuType:l,inputMenuIsOpen:i,setInputMenuIsOpen:o}=e,u=(0,n.st)(),p=(0,r.useRef)(null),[h,x]=(0,r.useState)(null),[v,j]=(0,r.useState)(null),[w,M]=(0,r.useState)(""),_=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!i&&e){o(!0),"plus"===l&&u.track({event_key:"claudeai.plus_menu.opened"});return}if(i&&!e){M("");let e=()=>{var e;A(null,!0),j(null),o(!1),null==(e=document.getElementById("input-".concat(l,"-menu-trigger")))||e.focus()};t.withDelay?setTimeout(e,200):e()}},A=(e,t)=>{t?p.current=e:p.current=h,x(e)},k=(()=>{if(h){let e=a.find(e=>e.key===h);if(e&&"children"in e)return e.children}return a})(),E=(e=>{let{actions:t,inputMenuSearchQuery:a,inputMenuIsOpen:n,pathItems:l,path:i,menuType:o}=e,u=(0,f.A)(),p=(0,r.useRef)(a),{handleSearchDrive:h,searchedDriveItems:x}=(e=>{let{path:t,actions:a,inputMenuSearchQuery:n,inputMenuIsOpen:l,menuType:i}=e,o="drive",d=(t===o||!t)&&l&&"plus"===i,u=(0,y.LP)(),[p,h]=(0,r.useState)([]),{recentDriveDocs:f}=(0,y.zH)(d),x=(0,r.useMemo)(()=>new S.A(f,{...T,keys:["title"]}),[f]);return u&&d?{handleSearchDrive:()=>{let e=n.toLowerCase();if(!e||!f)return[];h(x.search(e,{limit:t===o?10:5}).map(e=>({key:e.item.uri,type:"button",label:e.item.title||"",icon:(0,s.jsx)(c.A9,{type:m.v8.GDRIVE,variant:c.UF.DOCS,size:16}),onClick:()=>{a.createDriveSyncSource(e.item.uri)}})))},searchedDriveItems:p}:{handleSearchDrive:()=>[],searchedDriveItems:[]}})({path:i,actions:t,inputMenuSearchQuery:a,inputMenuIsOpen:n,menuType:o}),{handleSearchProjects:v,searchedProjectItems:j}=(e=>{let{path:t,actions:a,inputMenuSearchQuery:n,inputMenuIsOpen:l,menuType:i,pathItems:o}=e,c="projects",u=(0,b.K)(),m=o.map(e=>{let{key:t}=e;return t}).indexOf("projects")>-1||"projects"===t,p=!!(n&&m&&(t===c||!t)&&l&&u&&"plus"===i),[h,f]=(0,r.useState)([]),{data:x}=(0,g.CB)({enabled:p,limit:g.dx}),y=(0,r.useMemo)(()=>new S.A(x||[],{...T,keys:["name","description"]}),[x]);return p?{handleSearchProjects:()=>{let e=n.toLowerCase();if(!e||!x)return[];f(y.search(e,{limit:t===c?10:5}).map(e=>({type:"button",key:e.item.uuid,label:e.item.name,icon:(0,s.jsx)(d.Jt,{size:16}),subtitle:e.item.creator.full_name,onClick:()=>a.onSelectProject(e.item.uuid)})))},searchedProjectItems:h}:{handleSearchProjects:()=>[],searchedProjectItems:[]}})({path:i,actions:t,inputMenuSearchQuery:a,inputMenuIsOpen:n,menuType:o,pathItems:l}),{handleFilterMenuItems:w,filteredMenuItems:M}=(e=>{let{path:t,inputMenuSearchQuery:a,pathItems:s}=e,n=s.filter(e=>{let{menuItemHidden:t}=e;return!t}),[l,i]=(0,r.useState)([]);return"projects"===t||"drive"===t?{handleFilterMenuItems:()=>[],filteredMenuItems:[]}:{handleFilterMenuItems:()=>{let e=a.toLowerCase();if(!e)return n;let t=[];for(let e of n)t.push(e),!e.isDisabled&&"projects"!==e.key&&"drive"!==e.key&&"children"in e&&e.children&&t.push(...e.children);i(t.filter(t=>!t.nonSearchable&&"toggleAll"!==t.type&&"back"!==t.type&&"divider"!==t.type&&"string"==typeof t.label&&t.label.toLowerCase().includes(e)).slice(0,7))},filteredMenuItems:l}})({path:i,inputMenuSearchQuery:a,pathItems:l}),_=(0,r.useCallback)(()=>{w(),v(),h()},[w,v,h]),A=(0,r.useMemo)(()=>I()(()=>{_()},100),[_]);return((0,r.useEffect)(()=>{if(a&&n&&a!==p.current)return p.current=a,A(),()=>{A.cancel()}},[n,a,A]),M.length||j.length||x.length)?[M,j,x].reduce((e,t,a)=>[...e,...e.length&&t.length?[{key:"divider".concat(a+1),type:"divider",label:""}]:[],...t],[]):[{key:"loading",type:"button",label:u.formatMessage({defaultMessage:"No results found",id:"hX5PAbCTOR"}),icon:(0,s.jsx)(N.e,{size:16}),onClick:()=>void 0,isDisabled:!0}]})({actions:t,inputMenuSearchQuery:w,inputMenuIsOpen:i,pathItems:k,path:h,menuType:l}),O=w.trim().length?E:k,{handleClickItem:R,handleBack:D}=(e=>{let{currentItems:t,inputMenuIsOpen:a,setInputMenuIsOpen:s,inputMenuSearchQuery:n,setInputMenuSearchQuery:l,path:i,handleUpdatePath:o,highlightedItemKey:d,setHighlightedItemKey:c}=e,u=(0,r.useCallback)(e=>{if("toggleGroup"===e.type||"optionGroup"===e.type||"buttonGroup"===e.type)s(!0),o(e.key,!0);else if("button"===e.type||"switch"===e.type||"toggle"===e.type||"option"===e.type){var t;null==(t=e.onClick)||t.call(e)}},[s,o]),m=(0,r.useCallback)(e=>{i&&(null==e||e.preventDefault(),o(null),c(i),(0,C.l)())},[i,c,o]),p=(0,r.useCallback)(e=>{let a,s=t.filter(e=>!["subheader","divider"].includes(e.type)&&!e.isDisabled&&!e.menuItemHidden),n=s.findIndex(e=>{let{key:t}=e;return t===d});a="ArrowUp"===e?n>0?n-1:s.length-1:n<s.length-1?n+1:0,c(s[a].key)},[t,d,c]),h=(0,r.useCallback)(e=>{var t,n,i;if(!a)return void u(e);if(!e.isDisabled){if(l(""),"back"===e.type)return void m();if("button"===e.type){null==(t=e.onClick)||t.call(e),e.skipCloseOnClick||s(!1);return}if("toggleGroup"===e.type||"optionGroup"===e.type||"buttonGroup"===e.type){o(e.key),c(null),(0,C.l)();return}"option"===e.type&&(null==(n=e.onClick)||n.call(e),e.skipCloseOnClick||s(!1,{withDelay:!0})),("toggleAll"===e.type||"toggle"===e.type||"switch"===e.type)&&(null==(i=e.onClick)||i.call(e),(0,C.l)())}},[m,u,o,a,l,s,c]),f=(0,r.useCallback)((e,a)=>{if(!d)return;let s=t.find(e=>{let{key:t}=e;return t===d});s&&("Enter"===e||["optionGroup","toggleGroup","buttonGroup"].includes(s.type))&&(a.preventDefault(),h(s))},[d,t,h]);return(0,r.useEffect)(()=>{if(!a)return;let e=e=>{"Tab"===e.key?e.preventDefault():"Escape"===e.key?(e.preventDefault(),s(!1)):"ArrowUp"===e.key||"ArrowDown"===e.key?(e.preventDefault(),p(e.key)):"ArrowRight"===e.key||"Enter"===e.key?f(e.key,e):"ArrowLeft"!==e.key||n||m(e)};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[a,s,n,p,f,m]),{handleClickItem:h,handleBack:m}})({currentItems:O,inputMenuIsOpen:i,setInputMenuIsOpen:_,inputMenuSearchQuery:w,setInputMenuSearchQuery:M,path:h,handleUpdatePath:A,highlightedItemKey:v,setHighlightedItemKey:j}),L=p.current&&!h?"back":!p.current&&h?"forward":"none";return{path:h,inputMenuSearchQuery:w,setInputMenuSearchQuery:M,inputMenuIsOpen:i,setInputMenuIsOpen:_,menuView:{rootItems:a,currentItems:O},handleClickItem:R,handleBack:D,highlightedItemKey:v,setHighlightedItemKey:j,animationDirection:L}};function z(e){let{placement:t,children:a}=e,[n,l]=(0,r.useState)(!1),[i,C]=(0,r.useState)(!1),[N,S]=(0,r.useState)(null),[E,I]=(0,r.useState)(!1),[T,O]=(0,r.useState)(!1),[R,D]=(0,r.useState)(!1),[z,G]=(0,r.useState)(null),[U,Y]=(0,r.useState)(null),H=(0,k.Cn)({setMcpDirectoryModalIsOpen:D,setStyleModalOpenWithScreen:G,setCreateProjectModalIsOpen:S,setGithubModalIsOpen:I,setGmailAuthModalIsOpen:O,setCreatePromptArgumentModalIsOpen:Y}),V=(e=>{let{placement:t,actions:a,inputMenuIsOpen:n}=e,l=(0,f.A)(),i=(e=>{let{actions:t}=e,a=(0,f.A)();return(0,h.V)()||(0,u.fJ)()?null:{key:p.xd.ADD_SCREENSHOT,type:"button",icon:(0,s.jsx)(d.i7,{size:16}),label:a.formatMessage({defaultMessage:"Take a screenshot",id:"aTaOpCB71M"}),onClick:t.onAddScreenshot}})({actions:a}),r=(0,j.kO)(),o=(e=>{let{actions:t}=e,a=(0,f.A)();return(0,v.Cq)()?{key:p.xd.GITHUB,type:"button",icon:(0,s.jsx)(c.A9,{type:m.v8.GITHUB,size:16}),label:a.formatMessage({defaultMessage:"Add from {github}",id:"h3J3E4bRfj"},{github:"GitHub"}),onClick:t.openGithubModal}:null})({actions:a}),C=(e=>{let{actions:t,inputMenuIsOpen:a}=e,n=(0,f.A)(),l=(0,A.Hd)(),i=(0,y.LP)(),{isDriveAuthenticated:r,initDriveAuth:o}=(0,y.cI)(),{recentDriveDocs:d,isLoading:u}=(0,y.zH)(a);if(!i)return null;let h=n.formatMessage({defaultMessage:"Add from {drive}",id:"hwJ50OkM/9"},{drive:"Google Drive"}),x={key:p.xd.DRIVE,icon:(0,s.jsx)(c.A9,{type:m.v8.GDRIVE,size:16}),label:h};if(!r)return{...x,type:"button",isExternal:!0,secondaryText:n.formatMessage({defaultMessage:"Connect",id:"+vVZ/G11Zg"}),onClick:o};let g=u?[{key:"drive-loading",type:"button",label:n.formatMessage({defaultMessage:"{drive} documents loading...",id:"PjuSZ/7RIb"},{drive:"Drive"}),isDisabled:!0}]:d.length?d.slice(0,8).map(e=>{var a;return{key:e.uri,type:"button",label:null!=(a=e.title)?a:"Untitled",icon:(0,s.jsx)(c.A9,{type:m.v8.GDRIVE,variant:c.UF.DOCS,size:16}),onClick:()=>{t.createDriveSyncSource(e.uri)}}}):[{key:"empty",type:"button",label:n.formatMessage({defaultMessage:"No recent {drive} documents",id:"XepM9W1Mo/"},{drive:"Drive"}),isDisabled:!0}];return{...x,type:"buttonGroup",children:[...l?[]:[{type:"back",key:"drive-back",label:h}],...g]}})({actions:a,inputMenuIsOpen:n}),N=(e=>{let{inputMenuIsOpen:t,actions:a}=e,n=(0,f.A)(),l=(0,A.Hd)(),i=(0,w.QN)(),{isProjectLocked:r}=(0,w.Jy)(e=>({isProjectLocked:e.isProjectLocked})),o=(0,b.K)(),{data:c}=(0,g.CB)({enabled:t&&o,creatorFilter:"is_creator",limit:8}),{data:u}=(0,g.CB)({enabled:t&&o,creatorFilter:"is_not_creator",limit:8}),m=[...c||[],...u||[]],{data:h}=(0,g.fo)(i),x=(null==m?void 0:m.slice(0,8).map(e=>({key:e.uuid,type:"option",label:e.name,subtitle:e.creator.full_name,onClick:()=>a.onSelectProject(e.uuid),icon:(0,s.jsx)(d.Jt,{size:16}),isChecked:e.uuid===i})))||[];if(r||!o)return null;let y=n.formatMessage({defaultMessage:"Use a project",id:"H/dsl+Px2v"});return{key:p.xd.PROJECTS,type:"optionGroup",icon:(0,s.jsx)(d.Jt,{size:16}),label:y,secondaryText:null==h?void 0:h.name,children:[...l?[]:[{type:"back",key:"projects-back",label:y}],...x,{key:"divider1",type:"divider",label:""},{key:"add",type:"button",variant:"primary",icon:(0,s.jsx)(d.OM,{size:16}),label:n.formatMessage({defaultMessage:"Start a new project",id:"0y7bg6nA29"}),onClick:()=>a.onCreateProject(!1),nonSearchable:!0}],indicatorActive:!!h}})({actions:a,inputMenuIsOpen:n}),S=(e=>{let{actions:t}=e,a=(0,f.A)(),n=(0,_.Uz)({isConnected:!0,hasPromptsOrResources:!0}),l=(0,x.R4)(),i=(0,x.vW)();return n.map(e=>{let n=e.prompts.map(a=>({key:"prompt-".concat(e.name,"-").concat(a.name),type:"button",icon:(0,s.jsx)(d.ry,{size:16}),label:a.displayName,onClick:()=>{var s;return(null==(s=a.arguments)?void 0:s.length)?t.onEnterPromptArguments(e.uuid,a):void i({serverUuid:e.uuid,prompt:a,args:{}})}})),r=e.resources.map(t=>({key:"resource-".concat(e.name,"-").concat(t.uri),type:"button",icon:(0,s.jsx)(d.ZH,{size:16}),label:t.displayName,onClick:()=>void l({serverUuid:e.uuid,resource:t})}));return{key:"mcp-server-".concat(e.name),type:"buttonGroup",label:a.formatMessage({defaultMessage:"Add from {server}",id:"qEj6u51OfR"},{server:e.name}),icon:(0,s.jsx)(M.z,{size:16,type:e.iconType,src:e.iconSrc,name:e.name}),children:[...n,...r]}})})({actions:a});return[{key:p.xd.UPLOAD,type:"button",icon:(0,s.jsx)(d.o3,{size:16}),label:l.formatMessage({defaultMessage:"Upload a file",id:"Zc9xq9TzDD"}),onClick:()=>(0,k.U_)(t)},...i?[i]:[],...o?[o]:[],...C&&!r?[C]:[],...S,...N?[{key:"divider1",type:"divider",label:""},N]:[]]})({placement:t,actions:H,inputMenuIsOpen:n}),W=F({actions:H,rootItems:V,menuType:"plus",inputMenuIsOpen:n,setInputMenuIsOpen:l}),B=(0,o.ey)({actions:H}),K=F({actions:H,rootItems:B,menuType:"tools",inputMenuIsOpen:i,setInputMenuIsOpen:C}),J=(0,r.useMemo)(()=>({...W,styleModalOpenWithScreen:z,setStyleModalOpenWithScreen:G,createProjectModalIsOpen:N,setCreateProjectModalIsOpen:S,githubModalIsOpen:E,setGithubModalIsOpen:I,gmailAuthModalIsOpen:T,setGmailAuthModalIsOpen:O,createPromptArgumentModalIsOpen:U,setCreatePromptArgumentModalIsOpen:Y}),[W,z,G,N,S,E,I,T,O,U,Y]),q=(0,r.useMemo)(()=>({...K,mcpDirectoryModalIsOpen:R,setMcpDirectoryModalIsOpen:D}),[K,R,D]);return(0,s.jsx)(L.Provider,{value:J,children:(0,s.jsx)(P.Provider,{value:q,children:a})})}function G(){return(0,r.useContext)(L)}function U(){return(0,r.useContext)(P)}},55146:(e,t,a)=>{a.d(t,{E:()=>p,I:()=>m});var s=a(19736),n=a(74813),l=a(64328),i=a(4869),r=a(21113),o=a.n(r),d=a(27541),c=a(7620),u=a(2327);let m=()=>{let e="new-conversation-params-for-navigation",t=(0,i.useQueryClient)(),a=(0,c.useCallback)(()=>{let t=localStorage.getItem(e);if(!t)return{};try{let e=JSON.parse(t);return o()(e,e=>Date.now()-e.created_at<6e4)}catch(t){localStorage.removeItem(e)}return{}},[]);return{prepareNewConversation:(0,c.useCallback)((s,n)=>{let l={created_at:Date.now(),...n};t.setQueryData([e,s],l);let i=a();i[s]=l;try{localStorage.setItem(e,JSON.stringify(i))}catch(e){}},[t,a]),getCreateParamsForConvo:(0,c.useCallback)(s=>{let n=a(),l=t.getQueryData([e,s])||n[s];t.removeQueries({queryKey:[e,s]});let i=o()(n,(e,t)=>t!==s);return localStorage.setItem(e,JSON.stringify(i)),l},[t,a])}};function p(){var e;let{setTemporaryConversationUuid:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=(0,n.st)(),{data:i}=(0,s.Fn)(),{mutateAsync:r}=(0,s.CW)(),[o,p]=(0,u.d)(),{prepareNewConversation:h}=m(),{account:f}=(0,l.YL)(),x=(0,d.useRouter)();return(0,c.useCallback)(async e=>{var s;let{model:n,project_uuid:l,include_conversation_preferences:d,paprika_mode:c,compass_mode:u,create_mode:m,name:g,is_temporary:y}=e,v=r({uuid:o,name:null!=g?g:"",model:n,project_uuid:l,include_conversation_preferences:d,paprika_mode:c,compass_mode:u,create_mode:m,is_temporary:y});if(h(o,e),await v,y)null==t||t(o);else if((null==f||null==(s=f.settings)?void 0:s.has_finished_claudeai_onboarding)===!1){let e=new URLSearchParams;e.append("returnTo","/chat/".concat(o));let t="/onboarding?".concat(e.toString());x.push(t)}else x.push("/chat/".concat(o));return p(),(null==i?void 0:i.is_first_conversation)&&await a.track({event_key:"chat.conversation.first_conversation_created",surface:"claude.ai"}),{uuid:o}},[r,o,p,i,a,x,h,null==f||null==(e=f.settings)?void 0:e.has_finished_claudeai_onboarding,t])}},55321:(e,t,a)=>{a.d(t,{U:()=>R});var s=a(54568),n=a(74813),l=a(64328),i=a(14691),r=a(23812),o=a(87483),d=a(68067),c=a(7620),u=a(10369),m=a(59666),p=a(45538),h=a(45054),f=a(34498);function x(e){let{isOpen:t,onClose:a,project:n}=e,{addError:l}=(0,h.Y)(),i=(0,u.A)(),{mutateAsync:r}=(0,p.sS)(n.uuid),o=(0,c.useCallback)(async()=>{try{await r({is_archived:!0})}catch(e){throw l(i.formatMessage({defaultMessage:"Could not archive",id:"3O1N877xLt"}),{error:e}),e}},[r,l,i]);return(0,s.jsx)(f.R,{isOpen:t,onClose:a,onConfirm:o,title:i.formatMessage({defaultMessage:"Archive project",id:"sxTTUDY6HD"}),message:i.formatMessage({defaultMessage:"Are you sure you want to archive {projectName}?",id:"1BieCt3ylM"},{projectName:n.name}),confirmText:i.formatMessage({defaultMessage:"Archive",id:"hrgo+EleAn"}),variant:"danger",autoFocus:!0})}var g=a(27541);function y(e){let{isOpen:t,onClose:a,project:n}=e,{addError:l,addSuccess:i}=(0,h.Y)(),r=(0,u.A)(),o=(0,g.usePathname)(),d=(0,g.useRouter)(),{mutateAsync:c,isPending:m}=(0,p.eW)(n.uuid),x=async()=>{try{await c(),i(r.formatMessage({defaultMessage:"Project deleted successfully",id:"UIJxB9dUFp"})),o==="/project/".concat(n.uuid)&&d.push("/projects")}catch(e){l(r.formatMessage({defaultMessage:"Could not delete",id:"njF5218LQD"}),{error:e})}};return(0,s.jsx)(f.R,{isOpen:t,onClose:a,onConfirm:x,title:r.formatMessage({defaultMessage:"Delete project",id:"f2FD7U33A1"}),message:r.formatMessage({defaultMessage:"Are you sure you want to delete {projectName}?",id:"yc7hx3U5ir"},{projectName:n.name}),confirmText:r.formatMessage({defaultMessage:"Delete",id:"K3r6DQW7h+"}),variant:"danger",isLoading:m,testId:"delete-project-confirm-button"})}var v=a(13750),j=a(3075);function b(e){let{isOpen:t,onClose:a,project:n}=e,[l,i]=(0,c.useState)(n.name),[o,d]=(0,c.useState)(n.description),f=(0,u.A)(),{addError:x}=(0,h.Y)(),{mutateAsync:g}=(0,p.sS)(n.uuid),y=async()=>{try{await g({name:l,description:o}),a()}catch(e){x(f.formatMessage({defaultMessage:"Error updating project, please try again later",id:"eLzspFmHkT"}),{error:e})}};return(0,s.jsxs)(j.aF,{isOpen:t,onClose:a,modalSize:"md",children:[(0,s.jsx)("div",{className:"flex items-center gap-1",children:(0,s.jsx)("h2",{className:"font-xl-bold",children:(0,s.jsx)(m.A,{defaultMessage:"Edit details",id:"BVWzJ5FL/Y"})})}),(0,s.jsxs)("div",{className:"mb-6 mt-3",children:[(0,s.jsx)(v.ks,{className:"mb-4 w-full",label:f.formatMessage({defaultMessage:"Name",id:"HAlOn1ZsuY"}),value:l,onChange:e=>i(e.target.value),required:!0}),(0,s.jsx)(v.fs,{label:f.formatMessage({defaultMessage:"Description",id:"Q8Qw5BZ1VA"}),value:o,onChange:e=>d(e.target.value),minRows:6,required:!0,className:"max-h-60 overflow-auto"})]}),(0,s.jsxs)("div",{className:"mt-2 flex justify-end gap-2",children:[(0,s.jsx)(r.$,{variant:"secondary",onClick:a,children:(0,s.jsx)(m.A,{defaultMessage:"Cancel",id:"47FYwba+bI"})}),(0,s.jsx)(r.$,{onClick:()=>{y()},children:(0,s.jsx)(m.A,{defaultMessage:"Save",id:"jvo0vs3nF0"})})]})]})}var w=a(2348),M=a(9140),_=a(59922),A=a(2e3),k=a(34385),C=a(93714);function N(){let e=(0,w._)(["\n  text-text-400\n  text-sm\n  font-medium\n"]);return N=function(){return e},e}function S(){let e=(0,w._)(["\n  text-xs\n  font-normal\n"]);return S=function(){return e},e}let E=e=>{let{syncSource:t}=e;return t.type===A.v8.GDRIVE?(e=>(0,s.jsx)("option",{value:"sync-".concat(e.uuid),children:e.status.extra||(0,s.jsx)(m.A,{defaultMessage:"Unknown Google Drive document",id:"DjaaH+4Tyz"})},"sync-".concat(e.uuid)))(t):t.type===A.v8.GITHUB?(e=>{let{owner:t,repo:a}=e.config,n="".concat(t,"/").concat(a);return(0,s.jsx)("option",{value:"sync-".concat(e.uuid),children:n},"sync-".concat(e.uuid))})(t):void 0},I=_.J.label(N()),T=_.J.div(S());function O(e){let{isOpen:t,onClose:a,projectUuid:n,organizationUuid:l}=e,[i,r]=(0,c.useState)(),[o,d]=(0,c.useState)(),[u,h]=(0,c.useState)(),[f,x]=(0,c.useState)(),[g,y]=(0,c.useState)(!1),[b,w]=(0,c.useState)(),[_,A]=(0,c.useState)(),[N,S]=(0,c.useState)(),{mutateAsync:O}=(0,p.GQ)(l,n),{data:R}=(0,k.MO)(n,!!n&&t),{data:D}=(0,k.uE)(n,!!n&&t),{data:L}=(0,C.CO)(n,!1,!!n&&t),P=async()=>{await O({category:i||"",notes:o,reporter_name:f,reporter_email:u,opt_out_of_training:g,doc_uuid:b,file_uuid:_,sync_source_uuid:N}),r(void 0),d(void 0),w(void 0),A(void 0),S(void 0),x(void 0),h(void 0),y(!1),a(!0)},F=(R&&R.length>0||D&&D.length>0||L&&L.length>0)&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(I,{children:[(0,s.jsx)(m.A,{defaultMessage:"Specific document, file, or source (optional)",id:"axKp3B/R/i"}),(0,s.jsx)(T,{children:(0,s.jsx)(m.A,{defaultMessage:"Select a specific document, file, or sync source in this project to report",id:"UhG56XNcMi"})})]}),(0,s.jsxs)(v.l6,{value:b?"doc-".concat(b):_?"file-".concat(_):N?"sync-".concat(N):"select-item",onChange:e=>{let t=e.target.value;"select-item"===t?(w(void 0),A(void 0),S(void 0)):t.startsWith("doc-")?(w(t.substring(4)),A(void 0),S(void 0)):t.startsWith("file-")?(A(t.substring(5)),w(void 0),S(void 0)):t.startsWith("sync-")&&(S(t.substring(5)),w(void 0),A(void 0))},children:[(0,s.jsx)("option",{value:"select-item",children:(0,s.jsx)(m.A,{defaultMessage:"Select a document, file, or source (optional)",id:"uH9yKzuAxu"})}),R&&R.length>0&&(0,s.jsx)("optgroup",{label:"Documents",children:R.map(e=>(0,s.jsx)("option",{value:"doc-".concat(e.uuid),children:e.file_name},"doc-".concat(e.uuid)))}),D&&D.length>0&&(0,s.jsx)("optgroup",{label:"Files",children:D.map(e=>(0,s.jsx)("option",{value:"file-".concat(e.file_uuid),children:e.file_name},"file-".concat(e.file_uuid)))}),L&&L.length>0&&(0,s.jsx)("optgroup",{label:"Sync Sources",children:L.map(e=>(0,s.jsx)(E,{syncSource:e},"syncs-".concat(e.uuid)))})]})]});return(0,s.jsx)(j.aF,{modalSize:"md",isOpen:t,onClose:a,hasCloseButton:!0,title:(0,s.jsx)("span",{className:"font-claude-response font-medium",children:(0,s.jsx)(m.A,{defaultMessage:"Report project",id:"i+TY5eOB+b"})}),children:(0,s.jsx)(M.d,{category:i,setCategory:r,notes:o,setNotes:d,reporterEmail:u,setReporterEmail:h,reporterName:f,setReporterName:x,optOutOfTraining:g,setOptOutOfTraining:y,onSubmit:P,onClose:()=>a(!1),additionalFields:F})})}let R=e=>{let{fullMenu:t=!1,star:a=!0,project:h,buttonSize:f="icon_sm",open:g,onOpenChange:v}=e,j=(0,u.A)(),{track:w}=(0,n.st)(),[M,_]=(0,c.useState)(!1),[A,k]=(0,c.useState)(!1),[C,N]=(0,c.useState)(!1),[S,E]=(0,c.useState)(!1),{mutate:I}=(0,p.sS)(h.uuid),T=null!==h.archived_at,{value:R}=(0,d.fS)("project_deletion_button"),D=(0,l.mV)(),{account:L,activeOrganization:P}=(0,l.YL)(),F=(null==h?void 0:h.creator.uuid)===(null==L?void 0:L.uuid);return F||a?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.ms,{align:"end",open:g,onOpenChange:v,trigger:(0,s.jsx)(r.$,{variant:"ghost",className:"active:!scale-100 pointer-events-auto",size:f,onClick:e=>{e.stopPropagation(),e.preventDefault()},onMouseDown:e=>{e.stopPropagation(),e.preventDefault()},"aria-label":h.name?j.formatMessage({defaultMessage:"More options for {label}",id:"rKQPgfPvWS"},{label:h.name}):j.formatMessage({defaultMessage:"More options",id:"IzCVhGdYVc"}),children:(0,s.jsx)(i.FO,{})}),unstyledTrigger:!0,children:(0,s.jsxs)("div",{children:[a&&(0,s.jsx)(o.tJ,{"data-testid":"star-project-trigger",onSelect:()=>{let e=!h.is_starred;I({is_starred:e}),w({event_key:e?"claudeai.projects.starred":"claudeai.projects.unstarred",project_uuid:h.uuid,project_name:h.name})},icon:h.is_starred?(0,s.jsx)(i.BQ,{}):(0,s.jsx)(i.FE,{}),children:h.is_starred?(0,s.jsx)(m.A,{defaultMessage:"Unstar",id:"Y5zRLWgCMP"}):(0,s.jsx)(m.A,{defaultMessage:"Star",id:"VwapsmdMes"})}),F&&(0,s.jsxs)(s.Fragment,{children:[!T&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.tJ,{"data-testid":"rename-project-trigger",onSelect:()=>_(!0),icon:(0,s.jsx)(i.ff,{}),children:(0,s.jsx)(m.A,{defaultMessage:"Edit details",id:"BVWzJ5FL/Y"})}),D&&(0,s.jsx)(o.tJ,{onSelect:()=>E(!0),icon:(0,s.jsx)(i.Gb,{}),children:(0,s.jsx)(m.A,{defaultMessage:"Report",id:"x5Tz6MZH82"})}),(0,s.jsx)(o.DG,{}),t&&(0,s.jsx)(o.tJ,{"data-testid":"archive-project-trigger",onSelect:()=>{null==v||v(!1),setTimeout(()=>k(!0),100)},icon:(0,s.jsx)(i.Td,{}),children:(0,s.jsx)(m.A,{defaultMessage:"Archive",id:"hrgo+EleAn"})}),R&&(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(o.tJ,{danger:!0,"data-testid":"delete-project-trigger",onSelect:()=>{null==v||v(!1),setTimeout(()=>N(!0),100)},icon:(0,s.jsx)(i.E9,{}),children:(0,s.jsx)(m.A,{defaultMessage:"Delete",id:"K3r6DQW7h+"})})})]}),T&&t&&(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(o.tJ,{onClick:()=>{I({is_archived:!1})},icon:(0,s.jsx)(i.Td,{}),children:(0,s.jsx)(m.A,{defaultMessage:"Unarchive",id:"ftDYZo4V2C"})})})]})]})}),(0,s.jsx)(b,{isOpen:M,onClose:()=>_(!1),project:h}),(0,s.jsx)(x,{isOpen:A,onClose:()=>k(!1),project:h}),(0,s.jsx)(y,{isOpen:C,onClose:()=>N(!1),project:h}),(0,s.jsx)(O,{isOpen:S,onClose:()=>E(!1),projectUuid:h.uuid,organizationUuid:null==P?void 0:P.uuid})]}):null}},55839:(e,t,a)=>{a.d(t,{CD:()=>o});var s=a(1613),n=a(64328),l=a(80688),i=a(2e3),r=a(79052);let o=()=>{let e=(0,r.$f)(),t=(0,r.vT)(),a=(0,r.K6)(),{data:s}=d(i.v8.GDRIVE),n=null==s?void 0:s.state;return!!(e&&t&&a&&n&&[i.I5.CREATED,i.I5.UPDATING,i.I5.PENDING].includes(n))},d=e=>{let{account:t,activeOrganization:a}=(0,n.YL)(),r=null==t?void 0:t.uuid,o=null==a?void 0:a.uuid;return(0,s.Sk)("/api/organizations/".concat(o,"/sync/ingestion/").concat(e,"/progress"),{queryKey:[l.hx,{orgUuid:o,accountUuid:r,syncSourceType:e}],enabled:!!a,refetchInterval:e=>{let t;return!!(e.state.data&&(t=e.state.data.state,[i.I5.CREATED,i.I5.PENDING,i.I5.UPDATING].includes(t)))&&6e4},meta:{noToast:!0}})}},58841:(e,t,a)=>{a.d(t,{u:()=>u,i:()=>m});var s=a(54568),n=a(99969),l=a.n(n),i=a(7620);function r(e,t){switch(t.type){case"OPEN_COMPASS_STATUS":return{...e,selectedItem:{type:"compass",data:t.data}};case"SELECT_ATTACHMENT":return{...e,selectedItem:{type:"attachment",attachment:t.attachment}};case"SELECT_ARTIFACT":return{...e,selectedItem:{type:"artifact",id:t.id,versionUuid:t.versionUuid}};case"SELECT_DOC":return{...e,selectedItem:{type:"doc",id:t.id}};case"SELECT_FILE":return{...e,selectedItem:{type:"file",path:t.path,toolType:t.toolType,messageId:t.messageId}};case"CLEAR_SELECTED":return{...e,selectedItem:null,activeMessageUuid:void 0};case"SET_ACTIVE_MESSAGE_UUID":return{...e,activeMessageUuid:t.uuid};case"UPDATE_ATTACHMENTS":return{...e,attachments:t.attachments};case"UPDATE_FILES":return{...e,files:t.files};case"UPDATE_SYNC_SOURCES":return{...e,syncSources:t.syncSources};case"UPDATE_STREAMING_FILE":{var a,s;let n=new Map(e.streamingFiles),l=n.get(t.path);return n.set(t.path,{content:t.content,renderAs:t.renderAs,showingInRightPane:null!=(s=null!=(a=t.showingInRightPane)?a:null==l?void 0:l.showingInRightPane)&&s}),{...e,streamingFiles:n}}case"CLEAR_STREAMING_FILE":{let a=new Map(e.streamingFiles);return a.delete(t.path),{...e,streamingFiles:a}}default:return e}}let o={selectedItem:null,attachments:[],files:[],syncSources:[],activeMessageUuid:void 0,conversationUuid:void 0,streamingFiles:new Map},d={chatResourceState:o,dispatchChatResource:l()},c=(0,i.createContext)(d);function u(e){let{children:t,conversationUuid:a}=e,[n,l]=(0,i.useReducer)(r,{...o,conversationUuid:a}),d=(0,i.useMemo)(()=>({chatResourceState:n,dispatchChatResource:l}),[n,l]);return(0,s.jsx)(c.Provider,{value:d,children:t})}function m(){return(0,i.useContext)(c)}},61105:(e,t,a)=>{a.d(t,{E:()=>n,V:()=>l});var s=a(7620);function n(e){let t=[];for(let s of e){var a;for(let e of null!=(a=s.files_v2)?a:s.files)"file_kind"in e&&t.push(e)}return t}let l=e=>(0,s.useMemo)(()=>n(e),[e])},65016:(e,t,a)=>{a.d(t,{D$:()=>c});var s=a(45054),n=a(10369),l=a(8468),i=a(10665),r=a(35391);let o="advanced",d=["enabled_web_search","enabled_bananagrams","enabled_sourdough","enabled_foccacia"];function c(e){let{toggleConversationSetting:t,batchToggleConversationSettings:a}=(0,i.r)(),c=(0,i.v)("compass_mode"),u=(0,r.YW)(),m=(0,l.Gm)(e),{addSuccess:p}=(0,s.Y)(),h=(0,n.A)(),f=(0,i.v)("enabled_web_search"),x=(0,i.v)("enabled_bananagrams"),g=(0,i.v)("enabled_sourdough"),y=(0,i.v)("enabled_foccacia"),v=(0,i.v)("enabled_mcp_tools");return{toggleSearchTool:(e,s)=>{if(s)return void t(e,s);!function(e){let{remainingToolCount:t,compassMode:a}=e;return 0===t&&a===o}({remainingToolCount:function(e){let{toolToIgnore:t,currentStates:a}=e,s=0;for(let e of d)e!==t&&a[e]&&s++;return a.enabled_mcp_tools&&Object.values(a.enabled_mcp_tools).some(e=>!!e)&&s++,s}({toolToIgnore:e,currentStates:{enabled_web_search:null!=f&&f,enabled_bananagrams:null!=x&&x,enabled_sourdough:null!=g&&g,enabled_foccacia:null!=y&&y,enabled_mcp_tools:v}}),compassMode:c})?t(e,s):a({compass_mode:null,[e]:!1})},toggleResearchMode:e=>{var s,n,l;if(!e)return void t("compass_mode",null);(s=m,n=u,l=c,!s&&n&&l!==o)?(a({enabled_web_search:!0,compass_mode:o}),p(h.formatMessage({defaultMessage:"Web search enabled automatically for Research",id:"ss4xBdPHtN"}))):t("compass_mode",o)},canAutoEnableWebSearch:!m&&u,toggleConversationSetting:t,batchToggleConversationSettings:a}}},69524:(e,t,a)=>{a.d(t,{B:()=>v});var s=a(54568),n=a(19736),l=a(64328),i=a(13750),r=a(23812),o=a(3075),d=a(84617),c=a(57291),u=a(68067),m=a(95617),p=a(7620),h=a(10369),f=a(59666),x=a(24443),g=a(61105);function y(e){let{value:t,children:a}=e;return(0,s.jsx)("option",{value:t,children:a})}function v(e){var t,a,v,j,b,w;let{conversationUuid:M,message:_,requestedFeedbackType:A,setRequestedFeedbackType:k,isOpen:C,onClose:N,onSuccess:S,showOptions:E=!0}=e,I=(0,h.A)(),[T,O]=(0,p.useState)(""),{data:R}=(0,n.Bq)(M),D=null==R?void 0:R.chat_messages.some(e=>(0,c.Xz)(e).length>0),L=(0,g.V)(null!=(v=null==R?void 0:R.chat_messages)?v:[]).length>0,{mutate:P}=(0,n.HA)(M,_,!!D,{onSuccess:S}),F=(0,p.useId)(),z=null!=(j=null==(t=_.content)?void 0:t.some(e=>"thinking"===e.type))&&j,G="raven"===(0,l.$b)(),U=(0,x.SK)(),Y=(0,u.fS)("claude_ai_report_content_option").value,H=null;return(null==R||null==(a=R.settings)?void 0:a.enabled_web_search)&&(H=null!=(w=null==(b=_.content)?void 0:b.some(e=>"tool_use"===e.type&&"web_search"===e.name))&&w?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(y,{value:m.kj.FLAG_WEB_OVER,children:(0,s.jsx)(f.A,{defaultMessage:"Shouldn’t have searched the web",id:"T+mr27AakV"})}),(0,s.jsx)(y,{value:m.kj.FLAG_WEB_SOURCES,children:(0,s.jsx)(f.A,{defaultMessage:"Don’t like the cited sources",id:"MBNotx/VaO"})}),(0,s.jsx)(y,{value:m.kj.FLAG_WEB_URL,children:(0,s.jsx)(f.A,{defaultMessage:"Report a URL",id:"BMYqsjhycd"})})]}):(0,s.jsx)(y,{value:m.kj.FLAG_WEB_UNDER,children:(0,s.jsx)(f.A,{defaultMessage:"Should have searched the web",id:"CS8kdzupd9"})})),(0,s.jsxs)(o.aF,{isOpen:C,title:I.formatMessage({defaultMessage:"Feedback",id:"Ejhdi47Jk5"}),onClose:N,children:[(0,s.jsx)("div",{className:"mt-4 flex flex-col",children:(null==A?void 0:A.includes("flag"))&&E&&(0,s.jsxs)(i.l6,{className:"my-2 max-w-md",label:I.formatMessage({defaultMessage:"What type of issue do you wish to report? (optional)",id:"IFWIi9rs1t"}),value:A,onChange:e=>{k(e.target.value||m.kj.FLAG)},children:[(0,s.jsx)(y,{value:m.kj.FLAG,children:(0,s.jsx)(f.A,{defaultMessage:"Select…",id:"q0+99kUbd6"})}),(0,s.jsx)(y,{value:m.kj.FLAG_BUG,children:(0,s.jsx)(f.A,{defaultMessage:"UI bug",id:"0uIYueAyDB"})}),(0,s.jsx)(y,{value:m.kj.FLAG_REFUSAL,children:(0,s.jsx)(f.A,{defaultMessage:"Overactive refusal",id:"Jl0Mn6yDBI"})}),L&&(0,s.jsx)(y,{value:m.kj.FLAG_FILE,children:(0,s.jsx)(f.A,{defaultMessage:"Poor image understanding",id:"227KYxHrx5"})}),(0,s.jsx)(y,{value:m.kj.FLAG_INSTRUCTIONS,children:(0,s.jsx)(f.A,{defaultMessage:"Did not fully follow my request",id:"2uOw8LgMwG"})}),(0,s.jsx)(y,{value:m.kj.FLAG_FACTS,children:(0,s.jsx)(f.A,{defaultMessage:"Not factually correct",id:"topE9Q6MGe"})}),(0,s.jsx)(y,{value:m.kj.FLAG_INCOMPLETE,children:(0,s.jsx)(f.A,{defaultMessage:"Incomplete response",id:"ZNEcy7OM5r"})}),z&&(0,s.jsx)(y,{value:m.kj.FLAG_THOUGHTS,children:(0,s.jsx)(f.A,{defaultMessage:"Issue with thought process",id:"zOab+24EWo"})}),H,U&&(0,s.jsx)(y,{value:m.kj.FLAG_MEMORY,children:(0,s.jsx)(f.A,{defaultMessage:"Memory not applied correctly",id:"lNOB6Omh4y"})}),Y&&(0,s.jsx)(y,{value:m.kj.FLAG_CONTENT,children:(0,s.jsx)(f.A,{defaultMessage:"Report content",id:"vfibES+z8T"})}),(0,s.jsx)(y,{value:m.kj.FLAG_OTHER,children:(0,s.jsx)(f.A,{defaultMessage:"Other",id:"/VnDMl81rh"})})]})}),A===m.kj.FLAG_WEB_URL||A===m.kj.FLAG_CONTENT?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"text-text-300 border-0.5 border-border-300 rounded-lg p-12 text-sm",children:(0,s.jsx)(f.A,{defaultMessage:"Please use this <link>form</link> to report violative content.",id:"QSjqvNNsUq",values:{link:e=>(0,s.jsx)(d.Y,{href:"https://docs.google.com/forms/d/e/1FAIpQLSeO9Hzkyf_hQ2fYkfP_cqAcJG5kdlkg1wF4drQEFK9Z6db7jg/viewform",target:"_blank",children:e})}})}),(0,s.jsx)(o.vW,{children:(0,s.jsx)(r.$,{variant:"secondary",onClick:N,children:(0,s.jsx)(f.A,{defaultMessage:"Cancel",id:"47FYwba+bI"})})})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"mt-4 flex flex-col",children:[(0,s.jsx)("label",{htmlFor:F,className:"text-text-400 mb-2 text-sm",children:(0,s.jsx)(f.A,{defaultMessage:"Please provide details: (optional)",id:"og1W/bIZdx"})}),(0,s.jsx)(i.fs,{id:F,className:"text-sm",placeholder:(null==A?void 0:A.includes("flag"))||(null==A?void 0:A.includes("sc"))?I.formatMessage({defaultMessage:"What was unsatisfying about this response?",id:"+DB/t6WTki"}):I.formatMessage({defaultMessage:"What was satisfying about this response?",id:"yJFWG3mK1I"}),value:T,onChange:e=>{O(e.target.value)}})]}),(0,s.jsx)("p",{className:"text-text-500 mt-3 italic leading-tight",children:(0,s.jsx)("small",{children:(0,s.jsx)(f.A,{defaultMessage:"Submitting this report will send the entire current conversation to Anthropic for future improvements to our models. <link>Learn More</link>",id:"laRJ009b4f",values:{link:e=>(0,s.jsx)(d.Y,{target:"_blank",rel:"noopener",href:G?"https://privacy.anthropic.com/en/articles/9957937-how-does-anthropic-use-submitted-feedback":"https://privacy.anthropic.com/en/articles/10023565-how-does-anthropic-use-submitted-feedback",children:e})}})})}),(0,s.jsxs)(o.vW,{children:[(0,s.jsx)(r.$,{onClick:()=>{A&&(P({type:A,reason:T||void 0}),N())},children:(0,s.jsx)(f.A,{defaultMessage:"Submit",id:"wSZR47Y5kj"})}),(0,s.jsx)(r.$,{variant:"secondary",onClick:N,children:(0,s.jsx)(f.A,{defaultMessage:"Cancel",id:"47FYwba+bI"})})]})]})]})}},73619:(e,t,a)=>{a.d(t,{U:()=>n});var s=a(47831);let n=e=>{let t=(0,s.ED)(e),{maxKbTokens:a}=(0,s.AO)();return void 0!==t&&t>a}},81023:(e,t,a)=>{a.d(t,{l:()=>l});var s=a(47592),n=a(95839);let l=()=>{if((0,s.fJ)())return;let e=document.getElementById(n.I);e&&e.focus()}},83158:(e,t,a)=>{a.d(t,{Dk:()=>r,NM:()=>i,lD:()=>d,sv:()=>o});var s=a(54568),n=a(44894),l=a(47479);let i=e=>{let{file:t,size:a,showWarnings:n,onRemoveFile:i,onClick:r,isEditable:o}=e;return"xxs"===a?(0,s.jsx)(l.M1,{file:t}):(0,s.jsx)(l.NM,{file:t,showWarnings:n,handleRemove:i,handleClick:r,isEditable:o})};function r(e){let t=e.match(/\.[^/.]+$/);return t&&(0,n.cm)({imagesEnabled:!0}).includes(t[0].toLowerCase())?e.replace(/\.[^/.]+$/,""):e}let o=()=>(0,s.jsx)(l.Iq,{title:"Images hidden in shared chats",isError:!0}),d=()=>(0,s.jsx)(l.Iq,{title:"Files hidden in shared chats",isError:!0})},87784:(e,t,a)=>{a.d(t,{g:()=>c,h:()=>d});var s=a(54568),n=a(19736),l=a(84617),i=a(66365),r=a(59666),o=a(6149);function d(){var e;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments.length>1?arguments[1]:void 0,s=(0,n.mz)(t||""),l=null==s||null==(e=s.chat_messages)?void 0:e.at(-1),r=function(e){let{stopReason:t,model:a}=e,s=(0,i.useDynamicConfig)("holdup");if(!a||!t)return;let n=s.get("modelFallbacks",{})[a];if(n&&"refusal"===t)return n}({stopReason:null==l?void 0:l.stop_reason,model:a});return l&&"assistant"===l.sender&&("prompt_injection_risk"===l.stop_reason||"refusal"===l.stop_reason)?{stopReason:l.stop_reason,lastMessage:l,fallback:r}:null}function c(e){let t=(0,n.bT)("push"),a=()=>{t()},i=e=>(0,s.jsx)(l.Y,{onClick:a,children:e});return(0,s.jsx)(o.q,{actionButton:null,children:(0,s.jsx)("div",{className:"text-text-200 flex w-full items-center justify-between",children:(0,s.jsx)("div",{className:"flex items-center gap-1",children:(0,s.jsx)("span",{children:"refusal"===e.stopReason?(0,s.jsx)(r.A,{defaultMessage:"Claude is unable to respond to this request, which appears to violate our <policyLink>Usage Policy</policyLink>. Please <newChat>start a new chat</newChat>.",id:"JQtAKVGSTL",values:{policyLink:e=>(0,s.jsx)("a",{href:"https://www.anthropic.com/legal/aup",target:"_blank",className:"underline cursor-pointer",children:e}),newChat:i}}):(0,s.jsx)(r.A,{defaultMessage:"Claude is unable to respond to this request. Please <newChat>start a new chat</newChat>.",id:"VZKromeiwV",values:{newChat:i}})})})})})}},88801:(e,t,a)=>{a.d(t,{X:()=>s});function s(e){return"default"===e.type?e.key:e.uuid}},89568:(e,t,a)=>{a.d(t,{P:()=>V});var s=a(54568),n=a(7620);let l=(0,n.createContext)({setOverrideSubmit:()=>!1});var i=a(47592),r=a(33912),o=a(89501),d=a(15701),c=a(36526),u=a(10195),m=a(69584),p=a(12917),h=a(47833),f=a(43906),x=a.n(f);let g=new d.hs("inputAutocomplete"),y=()=>({decoration:null,completion:null}),v=(e,t)=>d.LN.atEnd(e).$anchor.pos===t.$anchor.pos,j=e=>{let{editor:t}=e;if(!v(t.state.doc,t.state.selection))return!1;let a=g.getState(t.state);return!!a.decoration&&(t.view.dispatch(t.state.tr.insertText(a.completion.content)),!0)},b=(e,t,a,s)=>{let n=e.getMeta(g);if(n&&n.prompt===s.doc.textContent&&(t.completion=n),!v(s.doc,s.selection)||!t.completion||t.completion.prompt!==s.doc.textContent)return t.decoration=null,t;let l=document.createElement("span");l.className="text-text-500",l.textContent=t.completion.content;let i=document.createElement("span");i.className="ml-1 px-1 border rounded-lg align-[1px] font-medium text-xs text-text-500",i.textContent="Tab";let r=s.selection.$head.pos,o=h.NZ.widget(r,l),d=h.NZ.widget(r,i);return t.decoration=h.zF.create(s.doc,[o,d]),t},w=c.YY.create({name:"inputAutocompletion",addOptions:()=>({fetchInputAutocompletion:e=>Promise.resolve("")}),addProseMirrorPlugins(){let e=x()(async(e,t)=>{try{let a=this.options.fetchInputAutocompletion,s=await a(t);s&&e.dispatch(e.state.tr.setMeta(g,{prompt:t,content:s}))}catch(e){}},300);return[new d.k_({key:g,state:{init:y,apply:b},props:{decorations(e){return this.getState(e).decoration}},view:t=>{let{textContent:a}=t.state.doc;return a.length>=3&&e(t,a),{update:(t,a)=>{var s;let{state:n}=t,{doc:l}=n;!a.doc.eq(l)&&(null==(s=g.getState(n).completion)?void 0:s.prompt)!==l.textContent&&l.textContent.length>=3&&e(t,l.textContent)}}}})]},addKeyboardShortcuts:()=>({Tab:j})});var M=a(3971);let _=e=>0===e.state.selection.$from.parentOffset,A=e=>e.state.selection.$from.marks().some(e=>"code"===e.type.name),k=e=>"heading"===e.state.selection.$from.parent.type.name,C=e=>{let t=e.state.selection.$from;return t.parentOffset===t.parent.nodeSize-2},N=e=>{let t=e.state.tr;t.setStoredMarks([]),t.insertText("​"),e.view.dispatch(t)},S=e=>!(e.state.selection.$from.after()<e.state.doc.content.size)&&(N(e),!0),E=e=>!(e.state.selection.$from.before()>0)&&e.chain().insertContentAt(0,"<p></p>").run(),I=e=>!(e.state.selection.$from.after()<e.state.doc.content.size)&&e.chain().insertContent("<p></p>").run(),T=c.YY.create({name:"CodeBlockKeyboardNavExtension",addKeyboardShortcuts:()=>({ArrowUp:e=>{let{editor:t}=e;return"codeBlock"===t.state.selection.$from.parent.type.name&&!!_(t)&&E(t)}})}),O=c.YY.create({name:"InlineCodeKeyboardNavExtension",addKeyboardShortcuts:()=>({ArrowUp:e=>{let{editor:t}=e;return!!A(t)&&!!_(t)&&E(t)},ArrowDown:e=>{let{editor:t}=e;return!!A(t)&&!!C(t)&&I(t)},ArrowRight:e=>{let{editor:t}=e;return!!A(t)&&!!C(t)&&S(t)},ArrowLeft:e=>{let{editor:t}=e;return!!A(t)&&!!_(t)&&(e=>!(e.state.selection.$from.before()>0)&&(N(e),!0))(t)}})}),R=c.YY.create({name:"HeadingKeyboardNavExtension",addKeyboardShortcuts:()=>({ArrowUp:e=>{let{editor:t}=e;return!!k(t)&&!!_(t)&&E(t)},ArrowDown:e=>{let{editor:t}=e;return!!k(t)&&!!C(t)&&I(t)}})}),D=c.YY.create({name:"BoldKeyboardNavExtension",addKeyboardShortcuts:()=>({ArrowRight:e=>{let{editor:t}=e;return!!t.state.selection.$from.marks().some(e=>"bold"===e.type.name)&&!!C(t)&&S(t)}})}),L=c.YY.create({name:"ItalicKeyboardNavExtension",addKeyboardShortcuts:()=>({ArrowRight:e=>{let{editor:t}=e;return!!t.state.selection.$from.marks().some(e=>"italic"===e.type.name)&&!!C(t)&&S(t)}})}),P=c.YY.create({name:"StrikeKeyboardNavExtension",addKeyboardShortcuts:()=>({ArrowRight:e=>{let{editor:t}=e;return!!t.state.selection.$from.marks().some(e=>"strike"===e.type.name)&&!!C(t)&&S(t)}})}),F=c.YY.create({name:"PTagShiftEnterCreateExtension",addKeyboardShortcuts:()=>({"Shift-Enter":e=>{let{editor:t}=e;return t.commands.enter(),t.commands.scrollIntoView(),!0},"Alt-Enter":e=>{let{editor:t}=e;return t.commands.enter(),t.commands.scrollIntoView(),!0}})}),z=c.YY.create({name:"pasteCodeAsPlainText",addProseMirrorPlugins:()=>[new d.k_({key:new d.hs("pasteCodeAsPlainText"),props:{handlePaste:(e,t,a)=>{let{schema:s}=e.state;if(!t.clipboardData||!t.clipboardData.types.includes("vscode-editor-data"))return!1;let n=t.clipboardData.getData("text/plain"),l=s.text(n);return e.dispatch(e.state.tr.replaceSelectionWith(l)),!0}}})]}),G=()=>(0,s.jsx)(u.VR,{className:"code-block",children:(0,s.jsx)("pre",{className:"my-4 block rounded-md bg-[#282c34] p-2 text-[0.875rem] text-[#abb2bf]",children:(0,s.jsx)(u.$p,{as:"code"})})});var U=a(68067),Y=a(72902),H=a(10369);let V=(0,n.forwardRef)((e,t)=>{let{className:a,disabled:c,prompt:h,tipTapEditorState:f,setTipTapEditorState:x,placeholder:g,onSubmit:y,onReady:v,placement:j,fetchInputAutocompletion:b}=e,_=(0,H.A)(),{value:A}=(0,U.fS)("plain_text_input"),{editor:k}=(e=>{let{tipTapEditorState:t,setTipTapEditorState:a,onReady:s,placeholder:n,extraEditorAttributes:l={},fetchInputAutocompletion:d,plainTextMode:c=!1}=e,h=[o.A.configure({placeholder:n,emptyEditorClass:"is-editor-empty before:!text-text-500 before:whitespace-nowrap"}),w.configure({fetchInputAutocompletion:d}),F,z],f=[r.A.extend({addNodeView:()=>(0,u.gu)(G)}).configure({lowlight:p.l}),D,T,R,O,L,P],x=[m.A.configure(c?{bold:!1,italic:!1,strike:!1,code:!1,codeBlock:!1,blockquote:!1,hardBreak:!1,heading:!1,horizontalRule:!1,bulletList:{},orderedList:{},listItem:{}}:{codeBlock:!1,blockquote:!1,hardBreak:!1,heading:!1,horizontalRule:!1}),...h,...c?[]:f];return{editor:(0,u.hG)({editorProps:{attributes:{enterkeyhint:"enter",...l}},onCreate:()=>{null==s||s()},autofocus:!(0,i.Fr)()&&"end",extensions:x,content:t,onUpdate(e){let{editor:t}=e,s=t.isEmpty,n=t.getJSON();a((0,M.DV)(n)),s&&t.commands.focus("end")}})}})({tipTapEditorState:f,setTipTapEditorState:x,onReady:v,placeholder:g,fetchInputAutocompletion:b,plainTextMode:A,extraEditorAttributes:{role:"textbox","aria-label":_.formatMessage({defaultMessage:"Write your prompt to Claude",id:"Lxn7p6AQvE"}),"aria-multiline":"true","aria-required":"false","aria-invalid":"false"}}),[C,N]=(0,n.useState)(!1);(0,n.useImperativeHandle)(t,()=>({setContent(e){e!==h&&(null==k||k.commands.setContent(e,!1,{preserveWhitespace:"full"}))},setEditable(e){k.setOptions({editable:e})},focus(){null==k||k.commands.focus()},getPosition:()=>null==k?void 0:k.state.selection.$anchor,getEditor:()=>k,getIsAtEnd(){if(!k)return;let e=k.state.selection.$anchor.pos;return d.LN.atEnd(k.state.doc).$anchor.pos===e},scrollToEnd(){k&&requestAnimationFrame(()=>{requestAnimationFrame(()=>{k.commands.setTextSelection(k.state.doc.content.size),k.commands.scrollIntoView();let e=k.view.dom.parentElement;e&&(e.scrollTop=e.scrollHeight)})})}}),[k,h]),(0,n.useEffect)(()=>{null==k||k.setOptions({editable:!c})},[k,c]),(0,n.useEffect)(()=>{if(null!==k&&""!==g){let e=k.extensionManager.extensions.filter(e=>"placeholder"===e.name)[0];e&&(e.options.placeholder=g,k.view.dispatch(k.state.tr))}},[k,g]);let S=(0,n.useCallback)(e=>{"Enter"===e.key&&y&&(C||e.shiftKey||e.altKey||e.nativeEvent.isComposing||(0,i.Fr)()&&!e.metaKey&&!e.ctrlKey||(e.preventDefault(),y(e)))},[y,C]);return(0,s.jsx)(l.Provider,{value:{setOverrideSubmit:N},children:(0,s.jsx)(u.$Z,{className:(0,Y.A)("max-h-96 w-full overflow-y-auto font-large break-words transition-opacity duration-200","bottom"===j?"min-h-[1.5rem]":"min-h-[3rem]",!(null==k?void 0:k.isEditable)&&"opacity-60",a),editor:k,onKeyDownCapture:S})})});V.displayName="PromptInput"},90458:(e,t,a)=>{a.d(t,{O:()=>s});function s(e){return e.startsWith("session_")}},93220:(e,t,a)=>{a.d(t,{z:()=>i});var s=a(7620),n=a(98649),l=a(26250);function i(e,t){let{dateAdded:a,priority:i,showAfterOthersDismiss:r}=t,o=(0,s.useContext)(l.L),{dismiss:d,isDismissed:c}=(0,n.W)();if(!o)throw Error("useNux must be used within a NuxProvider");let{registerNux:u,unregisterNux:m,currentlyShowing:p}=o;return(0,s.useEffect)(()=>{if(!c(e))return u(e,{dateAdded:a,priority:i,showAfterOthersDismiss:r}),()=>m(e)},[e,a,i,r,c,u,m]),{shouldShow:p===e&&!c(e),dismiss:()=>{d(e),m(e)}}}},94629:(e,t,a)=>{a.d(t,{$3:()=>B,ey:()=>D});var s=a(54568),n=a(96614),l=a(86545),i=a(64328),r=a(21266),o=a(14691),d=a(9398),c=a(68067),u=a(2e3),m=a(95617),p=a(16),h=a(66365),f=a(27541),x=a(7620),g=a(10369),y=a(35415),v=a(96547),j=a(79052),b=a(74326),w=a(50571),M=a(12142),_=a(10665),A=a(22167),k=a(35391),C=a(42605),N=a(4114),S=a(45271),E=a(65016),I=a(35580),T=a(97208);let O="inputMenu",R=()=>({isDisabled:!0,tooltip:(0,g.A)().formatMessage({defaultMessage:"Select a different model to use this feature",id:"/9vSDy2Wm0"}),isChecked:!1}),D=e=>{let{actions:t}=e,a=(0,g.A)(),l=(0,v.lu)(),r=(0,i.O9)(),d=(0,i.zc)(),c=(0,i.h0)(),u=(0,w.sb)(),m=(0,T.Ob)(),{conversation:h,model:x}=(0,C.o)(),y=(0,n.Z3)((null==h?void 0:h.id)||null),j=null!=x?x:y,b=(0,f.useRouter)(),M=L({actions:t,currentModel:j}),_=W(),A=U({actions:t}),k=Y({actions:t}),N=H({currentModel:j,conversation:h}),S=(0,T.gB)(),E=(0,T.lS)();if(S)return A;let I=[...k&&!E?[k]:[],...N&&!E?[N]:[]];M.length&&!E&&(I=I.concat([...I.length?[{key:"divider1",type:"divider",label:""}]:[],...M]));let O=l&&(r||d);return(_.length||O||u)&&(I=I.concat([..._,...u?[{key:"divider2",type:"divider",label:""},{key:"addIntegrations",type:"button",icon:(0,s.jsx)(p.c,{size:16}),label:a.formatMessage({defaultMessage:"Add connectors",id:"2dXigF1Pil"}),tag:c?void 0:m?"upgrade":"pro",onClick:c||!m?t.openMcpDirectoryModal:()=>{window.location.href="/upgrade"}},{key:"manageIntegrations",type:"button",icon:(0,s.jsx)(o.wB,{size:16}),label:a.formatMessage({defaultMessage:"Manage connectors",id:"cqx+RdJnHp"}),isExternal:!0,onClick:()=>{b.push("/settings/connectors")}}]:O?[{key:"divider2",type:"divider",label:""},{key:"addIntegrations",type:"button",icon:(0,s.jsx)(p.c,{size:16}),label:a.formatMessage({defaultMessage:"Add connectors",id:"2dXigF1Pil"}),isExternal:!0,onClick:()=>{b.push("/settings/connectors")}}]:[]])),I},L=e=>{let{actions:t,currentModel:a}=e,s=P({currentModel:a}),n=F({currentModel:a}),l=G({actions:t,currentModel:a}),i=z({currentModel:a});return[...s?[s]:[],...n?[n]:[],...l?[l]:[],...i?[i]:[]]},P=e=>{let{currentModel:t}=e,a=(0,g.A)(),{conversation:n}=(0,C.o)(),l=(0,i.h0)(),r=(0,T.Ob)(),d=(0,k.Eu)(t),c=(0,k.be)(),u=(0,k.WJ)(),m=(0,k.fy)(n),{toggleSearchTool:p}=(0,E.D$)(n),h=R(),f=K("web_search");if(!c&&!r)return null;let x=m&&d;return c||!r||l?{key:"webSearch",type:"switch",label:a.formatMessage({defaultMessage:"Web search",id:"x0W7xxxEcv"}),icon:(0,s.jsx)(o.qz,{size:16}),isChecked:x,onClick:()=>p("enabled_web_search",!x),tag:f,...!u?{isDisabled:!0,tooltip:a.formatMessage({defaultMessage:"This feature has been disabled by your administrator.",id:"Jpvq2WYysx"})}:!d?h:null}:{key:"webSearch",type:"switch",label:a.formatMessage({defaultMessage:"Web search",id:"x0W7xxxEcv"}),icon:(0,s.jsx)(o.qz,{size:16}),isChecked:!1,isDisabled:!0,tag:"upgrade",onClick:()=>{window.location.href="/upgrade"}}},F=e=>{let{currentModel:t}=e,a=(0,g.A)(),{conversation:n}=(0,C.o)(),r=(0,i.h0)(),o=(0,T.Ob)(),{toggleSearchTool:c,toggleConversationSetting:m}=(0,E.D$)(n),p=(0,j.K6)(),h=(0,l.Wq)()(t,"gsuite_tools"),f=(0,j.$f)(n),{isDriveAuthenticated:x,initDriveAuth:y}=(0,j.cI)({callerIdentifier:O,handleAuthSuccess:()=>{m("enabled_bananagrams",!0)}}),v=(0,A.kO)(),b=(0,A.dJ)(u.v8.GDRIVE),{startAuth:w,authBreakdown:M}=(0,A.ob)(u.v8.GDRIVE,{callerIdentifier:O,handleAuthSuccess:()=>{m("enabled_foccacia",!0)}}),_=R(),k=K("drive_search");if(v&&b&&x||v&&!b||b&&!M.firstParty||!p&&!o)return null;let N={key:"driveSearch",icon:(0,s.jsx)(d.ft,{size:16}),label:a.formatMessage({defaultMessage:"{drive} search",id:"nUykp097rV"},{drive:"Drive"})};if(!p&&o&&!r)return{...N,type:"switch",isChecked:!1,isDisabled:!0,tag:"upgrade",onClick:()=>{window.location.href="/upgrade"}};if(!x){let e=a.formatMessage({defaultMessage:"Connect",id:"+vVZ/G11Zg"}),t=a.formatMessage({defaultMessage:"Reconnect",id:"Eg11ZYmdyO"});return{...N,type:"button",isExternal:!0,secondaryText:v?t:e,onClick:()=>{y()},...v?{tooltip:a.formatMessage({defaultMessage:"Sign back into Google to use our improved connectors",id:"NHTRwY1ogC"})}:{},...h?null:_}}let S=x&&f;return{...N,type:"switch",isChecked:S,onClick:()=>{c("enabled_bananagrams",!S)},tag:k,...h?null:_}},z=e=>{let{currentModel:t}=e,a=(0,g.A)(),{conversation:n}=(0,C.o)(),i=(0,T.Ob)(),{toggleSearchTool:r,toggleConversationSetting:o}=(0,E.D$)(n),c=(0,A.Ys)(u.v8.GCAL),m=(0,l.Wq)()(t,"gsuite_tools"),p=(0,A.X0)(u.v8.GCAL,n),h=(0,A.vm)(),f=(0,A.dJ)(u.v8.GCAL),{isAuthenticated:x,startAuth:y,authBreakdown:v}=(0,A.ob)(u.v8.GCAL,{callerIdentifier:O,handleAuthSuccess:()=>{o("enabled_foccacia",!0)}}),j=R(),b=K("calendar_search");if(h&&f&&x||h&&!f||h&&!v.firstParty||!c&&!i)return null;let w=a.formatMessage({defaultMessage:"Calendar search",id:"b7aUhdL5nd"}),M=a.formatMessage({defaultMessage:"Google Calendar",id:"kjenxGoM59"}),_={key:"gcal",label:h?M:w,icon:(0,s.jsx)(d.HI,{size:16})};if(!c&&i)return{..._,type:"switch",isChecked:!1,isDisabled:!0,tag:"upgrade",onClick:()=>{window.location.href="/upgrade"}};if(!x){let e=a.formatMessage({defaultMessage:"Connect",id:"+vVZ/G11Zg"}),t=a.formatMessage({defaultMessage:"Reconnect",id:"Eg11ZYmdyO"});return{..._,type:"button",isExternal:!0,secondaryText:h?t:e,onClick:()=>{y()},...h?{tooltip:a.formatMessage({defaultMessage:"Sign back into Google to use our improved connectors",id:"NHTRwY1ogC"})}:{},...m?null:j}}let k=x&&p;return{..._,type:"switch",isChecked:k,onClick:()=>{r("enabled_foccacia",!k)},tag:b,...m?null:j}},G=e=>{let{actions:t,currentModel:a}=e,n=(0,g.A)(),{conversation:r}=(0,C.o)(),o=(0,i.h0)(),c=(0,T.Ob)(),{toggleSearchTool:m,toggleConversationSetting:p}=(0,E.D$)(r),h=(0,A.Ys)(u.v8.GMAIL),f=(0,l.Wq)()(a,"gsuite_tools"),x=(0,A.X0)(u.v8.GMAIL,r),y=R(),v=K("gmail_search"),j=(0,A.vm)(),b=(0,A.dJ)(u.v8.GMAIL),{isAuthenticated:w,startAuth:M,authBreakdown:_}=(0,A.ob)(u.v8.GMAIL,{callerIdentifier:O,handleAuthSuccess:()=>{p("enabled_sourdough",!0)}});if(j&&b&&w||j&&!b||j&&!_.firstParty||!h&&!c)return null;let k=n.formatMessage({defaultMessage:"Gmail search",id:"v0qteoUCm+"}),N=n.formatMessage({defaultMessage:"Gmail",id:"2hslSeuDXe"}),S={key:"gmail",label:j?N:k,icon:(0,s.jsx)(d.kw,{size:16})};if(!h&&c&&!o)return{...S,type:"switch",isChecked:!1,isDisabled:!0,tag:"upgrade",onClick:()=>{window.location.href="/upgrade"}};if(!w){let e=n.formatMessage({defaultMessage:"Connect",id:"+vVZ/G11Zg"}),a=n.formatMessage({defaultMessage:"Reconnect",id:"Eg11ZYmdyO"});return{...S,type:"button",isExternal:!0,secondaryText:j?a:e,onClick:()=>{j?M():t.openGmailAuthModal()},...j?{tooltip:n.formatMessage({defaultMessage:"Sign back into Google to use our improved connectors",id:"NHTRwY1ogC"})}:{},...f?null:y}}let I=w&&x;return{...S,type:"switch",isChecked:I,onClick:()=>{m("enabled_sourdough",!I)},tag:v,...f?null:y}},U=e=>{let{actions:t}=e,a=(0,g.A)(),{personalizedStyle:n}=(0,C.o)(),{personalizedStyleOptions:l}=(0,N.p)();return[...l.map(e=>{let a=(null==n?void 0:n.key)===e.key;return{key:e.key,type:"option",label:"default"===e.type&&e.nameKey?(0,s.jsx)(r.X5,{id:e.nameKey}):e.name,icon:(0,s.jsx)(o.P_,{size:16}),onClick:()=>{a?t.onStyleChange("Default"):t.onStyleChange(e.key)},isChecked:a}}),{key:"divider1",type:"divider",label:""},{key:"add",type:"button",variant:"primary",icon:(0,s.jsx)(o.OM,{size:16}),label:a.formatMessage({defaultMessage:"Create & edit styles",id:"cY+Fgc8HvE"}),onClick:t.openStyleModal,nonSearchable:!0}]},Y=e=>{let{actions:t}=e,a=(0,g.A)(),n=(0,T.Hd)(),{personalizedStyle:l}=(0,C.o)(),i=U({actions:t}),r=a.formatMessage({defaultMessage:"Use style",id:"f7VY0ldE+0"});return{key:m.xd.STYLES,type:"optionGroup",icon:(0,s.jsx)(o.P_,{size:16}),label:r,secondaryText:(null==l?void 0:l.isDefault)||null==l?void 0:l.name,children:[...n?[]:[{type:"back",key:"styles-back",label:r}],...i],indicatorActive:l&&"Default"!==l.key}},H=e=>{let t,{currentModel:a,conversation:n}=e,l=(0,g.A)(),r=(0,_.v)("paprika_mode"),d=(0,b.J)(),u=(0,b.j)()(a),{toggleConversationSetting:p}=(0,_.r)(),{value:f}=(0,c.fS)("model_selector_enabled"),{data:v}=(0,y.EY)(),j=(0,i.h0)(),w=(0,h.useLayer)("trials_freemium"),M=R(),A=(0,T.Ob)();(0,x.useEffect)(()=>{let e=!j,t=w.get("free_thinking",!1),a=e&&t&&(null==v?void 0:v.remaining)===0,s=!n||0===n.messagesSoFar;a&&r&&!s&&p("paprika_mode",null)},[null==v?void 0:v.remaining,j,w,r,p,n]);let k=w.get("free_thinking",!1),C=d&&(f||k&&!j);if(!d||!f&&!k&&!A)return null;let N=l.formatMessage({defaultMessage:"Extended thinking",id:"5j4WakKa2u"}),S=!j,E=w.get("free_thinking",!1),I=S&&E&&(null==v?void 0:v.remaining)===0,O=!I&&!!r;if(S&&E&&v&&void 0!==v.remaining&&v.resets_at){let e=new Date(1e3*v.resets_at),a=l.formatDate(e,{month:"short",day:"numeric"});t=l.formatMessage({defaultMessage:"{remaining} remaining until {date}",id:"httnsxXSeU"},{remaining:v.remaining,date:a})}let D={key:m.xd.EXTENDED_THINKING,type:"switch",label:N,icon:(0,s.jsx)(o.Sw,{size:16}),isChecked:O,indicatorActive:O,...t&&{subtitle:t},...I&&{isDisabled:!0,tag:"upgrade",rateLimitReached:!0,onClick:()=>{window.location.href="/upgrade"}}};return C||!A||j?u?{...D,...I?{}:{onClick:()=>{p("paprika_mode",r?null:"extended")},tooltip:l.formatMessage({defaultMessage:"Allow Claude to think out loud for longer for trickier questions and challenges.",id:"bbgQqH7Grg"}),tooltipImage:{src:"/images/feature-preview/extended-thinking.png",width:200,height:108}}}:{...D,...M}:{...D,isChecked:!1,isDisabled:!0,tag:"upgrade",onClick:()=>{window.location.href="/upgrade"}}},V=e=>{let{showConnectAction:t,mcpToolsSetting:a,toggleMcpToolEnabled:n,remoteOnly:l}=e,i=(0,g.A)(),r=(0,M.Q)();return(0,I.Uz)({isConnecting:!1,...l?{type:"remote"}:{},...t?{}:{isConnected:!0}}).map(e=>{let t={key:e.uuid,label:e.name,icon:(0,s.jsx)(S.z,{size:16,type:e.iconType,src:e.iconSrc,name:e.name})};if(!e.isConnected)return{...t,type:"button",isExternal:!0,secondaryText:i.formatMessage({defaultMessage:"Connect",id:"+vVZ/G11Zg"}),onClick:()=>r({uuid:e.uuid,url:e.url})};let l=e.tools.map(t=>{let l=t.enabledKey,i=!1!==a[l];return{key:l,type:"switch",label:t.displayName,icon:(0,s.jsx)(S.z,{size:16,type:e.iconType,src:e.iconSrc,name:e.name}),isChecked:i,onClick:()=>{n(l,!i,e.url)}}}),d=l.filter(e=>"switch"===e.type&&e.isChecked).length,c=d>0,u=e.tools.length,m=[];return l.length>1&&m.push({key:"select-all",type:"button",label:c?i.formatMessage({defaultMessage:"Disable all tools",id:"8A9N39nihk"}):i.formatMessage({defaultMessage:"Enable all tools",id:"x4/g36jIjW"}),onClick:()=>{n(e.tools.map(e=>e.enabledKey),!c,e.url)},skipCloseOnClick:!0,nonSearchable:!0},{key:"divider1",type:"divider",label:""}),m.push(...l),0===m.length&&m.push({key:"empty",type:"button",label:i.formatMessage({defaultMessage:"No tools available",id:"+XSkrzcF/0"}),icon:(0,s.jsx)(o.k0,{size:16}),onClick:()=>void 0,isDisabled:!0}),{...t,type:"toggleGroup",enabledCount:d,totalCount:u,children:m,isChecked:c,onClick:()=>{n(e.tools.map(e=>e.enabledKey),!c,e.url)}}})},W=()=>{var e;let t=null!=(e=(0,_.v)("enabled_mcp_tools"))?e:{},{toggleMcpToolEnabled:a}=(0,w.es)();return V({showConnectAction:!1,mcpToolsSetting:t,toggleMcpToolEnabled:a})},B=()=>{var e;let t=(0,I.Uz)({type:"remote"}),a=null!=(e=(0,_.v)("enabled_mcp_tools"))?e:{},[s,n]=(0,x.useState)(()=>{let e=new Set(t.map(e=>e.uuid));return Object.fromEntries(Object.entries(a).filter(t=>{let[a]=t,s=a.split(":")[0];return e.has(s)}))});return{menuOptions:V({showConnectAction:!1,mcpToolsSetting:s,toggleMcpToolEnabled:function(e,t){n(a=>({...a,...Array.isArray(e)?Object.fromEntries(e.map(e=>[e,t])):{[e]:t}}))},remoteOnly:!0}),getEnabledRemoteTools:()=>{let e=[];for(let a of t)for(let t of a.tools)!1!==s[t.enabledKey]&&e.push({tool_name:t.name,server_uuid:a.uuid});return e}}},K=e=>(0,h.useDynamicConfig)("claude_ai_beta_tools").get("beta_tools",[]).includes(e)?"beta":void 0},95839:(e,t,a)=>{a.d(t,{I:()=>s});let s="chat-input-menu-search-input"},97208:(e,t,a)=>{a.d(t,{Hd:()=>m,Ob:()=>p,gB:()=>u,lS:()=>h});var s=a(64328),n=a(66365),l=a(17421),i=a(35391),r=a(42605),o=a(88775),d=a(35580),c=a(90458);let u=()=>{let e=(0,s.h0)(),t=(0,i.be)(),a=(0,d.Uz)().length>0,n=h();return!e&&!t&&a&&!n},m=()=>{let e=(0,s.h0)(),t=(0,d.Uz)().length>0;return e||t},p=()=>{let e=(0,s.h0)(),t=(0,n.useLayer)("trials_freemium");return!e&&t.get("show_upgrade_buttons",!1)};function h(){(0,l.QJ)(),function(){let{conversation:e}=(0,r.o)();null!=e&&e.id&&(0,c.O)(e.id)}();let{conversation:e}=(0,r.o)(),{pendingConversationSettings:t}=(0,o.Fj)();return!1}},97595:(e,t,a)=>{a.d(t,{c:()=>s});var s=function(e){return e[e.HIGH=30]="HIGH",e[e.MEDIUM=20]="MEDIUM",e[e.LOW=10]="LOW",e[e.NONE=0]="NONE",e}({})}}]);