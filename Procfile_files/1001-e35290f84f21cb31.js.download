try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="bb7cefe2-e0f8-49dd-98db-096644d580cd",e._sentryDebugIdIdentifier="sentry-dbid-bb7cefe2-e0f8-49dd-98db-096644d580cd")}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1001],{10158:(e,t,a)=>{a.d(t,{g:()=>s});var n=a(54568);let s=e=>{let{height:t,className:a}=e;return(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 139 34",className:a,height:t,fill:"currentColor","aria-label":"Claude",children:(0,n.jsx)("path",{d:"M18.07 30.79c-5.02 0-8.46-2.8-10.08-7.11a19.2 19.2 0 0 1-1.22-7.04C6.77 9.41 10 4.4 17.16 4.4c4.82 0 7.78 2.1 9.48 7.1h2.06l-.28-6.9c-2.88-1.86-6.48-2.81-10.87-2.81-6.16 0-11.41 2.77-14.34 7.74A16.77 16.77 0 0 0 1 18.2c0 5.53 2.6 10.42 7.5 13.15a17.51 17.51 0 0 0 8.74 2.06c4.78 0 8.57-.91 11.93-2.5l.87-7.62h-2.1c-1.26 3.48-2.76 5.57-5.25 6.68-1.22.55-2.76.83-4.62.83Zm21.65-26.4.2-3.39H38.5l-6.33 1.9v1.02l2.8 1.3v23.79c0 1.62-.82 1.98-3 2.25V33h10.75v-1.74c-2.17-.27-3-.63-3-2.25V4.4Zm42.75 29h.83l7.27-1.38v-1.78l-1.03-.07c-1.7-.16-2.13-.52-2.13-1.9V15.58l.2-4.07h-1.15l-6.87.99v1.73l.67.12c1.85.28 2.4.8 2.4 2.1v11.3C80.9 29.13 79.2 30 77.19 30c-2.26 0-3.64-1.15-3.64-3.8V15.58l.2-4.07h-1.19l-6.87.99v1.73l.71.12c1.86.28 2.41.8 2.41 2.1v10.43c0 4.42 2.49 6.52 6.48 6.52 3.04 0 5.53-1.62 7.39-3.88l-.2 3.88Zm-20-14.06c0-5.65-3-7.82-8.4-7.82-4.79 0-8.27 1.97-8.27 5.25 0 1 .36 1.74 1.07 2.25l3.64-.47c-.16-1.1-.24-1.78-.24-2.05 0-1.86.99-2.8 3-2.8 2.97 0 4.47 2.09 4.47 5.44v1.11l-7.51 2.25c-2.49.67-3.91 1.27-4.86 2.65a5 5 0 0 0-.71 2.8c0 3.2 2.21 5.46 5.97 5.46 2.72 0 5.13-1.23 7.23-3.56.75 2.33 1.9 3.56 3.95 3.56 1.66 0 3.16-.68 4.5-1.98l-.4-1.38c-.59.16-1.14.23-1.73.23-1.15 0-1.7-.9-1.7-2.68v-8.26Zm-9.6 10.87c-2.05 0-3.31-1.19-3.31-3.28 0-1.43.67-2.26 2.1-2.73l6.08-1.94v5.85c-1.94 1.46-3.08 2.1-4.86 2.1Zm63.3 1.81v-1.78l-1.02-.07c-1.7-.16-2.14-.52-2.14-1.9V4.4l.2-3.4h-1.42l-6.32 1.9v1.02l2.8 1.3v7.83a8.84 8.84 0 0 0-5.37-1.54c-6.28 0-11.18 4.78-11.18 11.93 0 5.89 3.51 9.96 9.32 9.96 3 0 5.61-1.47 7.23-3.72l-.2 3.72h.83l7.27-1.39Zm-13.15-18.13c3 0 5.25 1.74 5.25 4.94v9a7.2 7.2 0 0 1-5.21 2.1c-4.31 0-6.48-3.4-6.48-7.94 0-5.1 2.48-8.1 6.44-8.1Zm28.52 4.5c-.55-2.64-2.17-4.15-4.42-4.15-3.36 0-5.7 2.53-5.7 6.17 0 5.37 2.85 8.85 7.44 8.85a8.6 8.6 0 0 0 7.38-4.35l1.35.36c-.6 4.66-4.82 8.14-10 8.14-6.08 0-10.27-4.5-10.27-10.9 0-6.45 4.54-11 10.63-11 4.54 0 7.74 2.73 8.77 7.48l-15.84 4.85V21.7l10.66-3.32Z"})})}},15393:(e,t,a)=>{a.d(t,{f:()=>i});var n=a(64328),s=a(45054),l=a(68067),r=a(7620),o=a(10369);let i=function(){let{artifactContext:e,onRateLimitError:t,onMissingOrganization:a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{value:i}=(0,l.fS)("apps_use_turmeric"),{activeOrganization:c}=(0,n.YL)(),{addError:d}=(0,s.Y)(),u=(0,o.A)();return(0,r.useCallback)(async n=>{if(!i)return Promise.resolve(null);if(!(null==c?void 0:c.uuid))return null==a||a(),Promise.resolve(null);try{var s;let a=await fetch("/api/organizations/".concat(null==c?void 0:c.uuid,"/proxy/v1/messages"),{method:"POST",headers:{"Content-Type":"application/json",...e?{"anthropic-artifact-id":e.uuid,"anthropic-artifact-entity-type":e.type}:{}},body:JSON.stringify({messages:[{role:"user",content:n}]})});if(!a.ok)throw 429===a.status&&(t?t():d(u.formatMessage({defaultMessage:"Limit reached. This artifact uses Claude for responses. Try again when the message limit resets.",id:"5Ocu9uCFLz"}))),Error("HTTP error! status: ".concat(a.status));let l=await a.json();return Promise.resolve((null==(s=l.content[0])?void 0:s.text)||null)}catch(e){return Promise.reject(e)}},[null==c?void 0:c.uuid,e,i,t,a,d,u])}},19757:(e,t,a)=>{a.d(t,{I:()=>F});var n=a(2348),s=a(54568),l=a(82028),r=a(45054),o=a(26819),i=a(13750),c=a(84284),d=a(59922),u=a(21266),h=a(14691),m=a(23812),g=a(66716),f=a(3075),v=a(84617),x=a(67453),p=a(19977),j=a(39500),y=a(72902),b=a(7620),w=a(10369),C=a(59666),_=a(85028),k=a(13644),N=a(12142),M=a(10665),S=a(85705),P=a(45271),T=a(39383),A=a(35580);function E(){let e=(0,n._)(["\n  bg-bg-000 \n  border-0.5 \n  border-border-300 \n  rounded-lg \n  shadow-sm\n  p-5\n  flex \n  flex-col \n  gap-4\n  items-stretch\n  self-stretch\n"]);return E=function(){return e},e}let z=d.J.div(E()),L=e=>{let{isOpen:t,onClose:a,variant:n,unknownServerCount:l}=e,r=(0,w.A)();return(0,s.jsxs)(f.aF,{title:r.formatMessage({defaultMessage:"Connectors unavailable",id:"nKB/o0ajrR"}),isOpen:t,onClose:a,children:[(0,s.jsx)("div",{className:"flex flex-col gap-3 py-3",children:(0,s.jsx)(z,{children:(0,s.jsx)("p",{className:"text-sm text-text-500",children:"disabled"===n?(0,s.jsx)(C.A,{defaultMessage:"Your organization admin has disabled connectors in artifacts. To use this feature, ask your admin to enable connectors in artifacts.",id:"+0AXIvgEHO"}):(0,s.jsx)(C.A,{defaultMessage:"{count, plural, one {# requested connector is not in your directory and has been} other {# requested connectors are not in your directory and have been}} hidden. Some functionality may be limited. {link}",id:"BwbZlzhj12",values:{count:l||0,link:(0,s.jsx)(v.Y,{href:"/settings/connectors",children:(0,s.jsx)(C.A,{defaultMessage:"Manage connectors.",id:"0+FF8HZw5G"})})}})})})}),(0,s.jsx)(f.vW,{children:(0,s.jsx)(m.$,{variant:"primary",onClick:a,children:(0,s.jsx)(C.A,{defaultMessage:"Close",id:"rbrahOGMC3"})})})]})},I=e=>{var t,a,n;let{server:l,variant:r,onClick:i,enabledToolsCount:d,artifactId:u,versionUuid:g,isInDirectory:f=!1,onToggleAll:j}=e,w=(0,N.Q)({queryString:u?"artifactId=".concat(encodeURIComponent(u),"&versionUuid=").concat(encodeURIComponent(g||"")):""}),[_,k]=(0,b.useState)(!1);return(0,s.jsxs)("div",{className:(0,y.A)("w-full flex items-center justify-between rounded-lg bg-bg-000",i&&"connect"!==r&&"unavailable"!==r&&"cursor-pointer hover:bg-bg-100 transition-colors"),onClick:"connect"===r||"unavailable"===r?void 0:i,children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 min-w-0",children:[(0,s.jsx)(P.z,{size:28,imageSize:16,type:"favicon",src:l.url,name:l.name||l.url}),(0,s.jsxs)("div",{className:"flex gap-2 items-center min-w-0 flex-1",children:[(0,s.jsx)(x.Tooltip,{tooltipContent:l.url||l.name||"",children:(0,s.jsx)("div",{className:"font-medium text-sm truncate",children:l.name||l.url||""})}),!f&&(0,s.jsx)(o.E,{className:"flex-shrink-0",children:(0,s.jsx)(C.A,{defaultMessage:"CUSTOM",id:"Jg/zGahNtM"})})]})]}),(0,s.jsx)("div",{className:"flex items-center gap-2",children:"connect"===r?(0,s.jsx)(m.$,{variant:"secondary",size:"sm",onClick:e=>{e.stopPropagation(),k(!0),w({uuid:l.uuid||"",url:l.url})},loading:_,className:"ml-2",children:(0,s.jsx)(C.A,{defaultMessage:"Connect",id:"+vVZ/G11Zg"})}):"unavailable"===r?(0,s.jsxs)("div",{className:"flex items-center gap-1 ml-2",children:[(0,s.jsx)(m.$,{variant:"secondary",size:"sm",disabled:!0,children:(0,s.jsx)(C.A,{defaultMessage:"Unavailable",id:"UpwcFdTuii"})}),(0,s.jsx)(x.Tooltip,{tooltipContent:(0,s.jsx)(C.A,{defaultMessage:"Manage connectors",id:"cqx+RdJnHp"}),children:(0,s.jsx)(v.Y,{href:"/settings/connectors",className:"text-fg-400 hover:text-fg-300 transition-colors p-1",children:(0,s.jsx)(h.$r,{className:"w-4 h-4"})})})]}):"toggle"===r?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("label",{onClick:e=>e.stopPropagation(),children:(0,s.jsx)(c.j,{checked:d===((null==(t=l.tools)?void 0:t.length)||0)&&((null==(a=l.tools)?void 0:a.length)||0)>0,onChange:()=>{var e;let t=(null==(e=l.tools)?void 0:e.length)||0,a=d===t&&t>0;null==j||j(!a)}})}),(0,s.jsx)(p.J,{className:"w-4 h-4 text-fg-400"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.E,{children:(0,s.jsx)("span",{className:"text-accent-secondary-200",children:(0,s.jsx)(C.A,{defaultMessage:"{enabled} of {total}",id:"ln8LiF3/8T",values:{enabled:d,total:(null==(n=l.tools)?void 0:n.length)||0}})})}),(0,s.jsx)(p.J,{className:"w-4 h-4 text-fg-400"})]})})]})},F=e=>{let{isOpen:t,requestedServers:a,onClose:n,artifactContext:o}=e,c=(0,w.A)(),d=(0,A.Uz)(),{isRemoteServerInDirectory:x}=(0,T.hW)(),p=(0,b.useRef)(x);p.current=x;let{addError:y}=(0,r.Y)(),N=c.formatMessage({defaultMessage:"Failed to save tool configuration. Please try again.",id:"ZohwwHXd08"}),{data:P}=(0,k.rX)(),E=!(null==P?void 0:P.disabled_features.includes("mcp_artifacts")),[F,U]=(0,b.useState)(null),[Y,Z]=(0,b.useState)(""),[O,D]=(0,b.useState)({}),{data:K}=(0,_.mt)({entityId:o.uuid,artifactEntityType:o.type}),{connectorServers:R,directoryServers:q,unknownServers:H}=(0,b.useMemo)(()=>{if(!d)return{connectorServers:[],directoryServers:[],unknownServers:[]};let e=[...a||[]],t=new Set((null==a?void 0:a.map(e=>e.url).filter(Boolean))||[]);(null==K?void 0:K.mcp_servers)&&K.mcp_servers.forEach(a=>{t.has(a.url)||e.push({name:a.name,url:a.url})});let n=[],s=[],l=[];return e.forEach(e=>{let t=d.find(t=>{let a="remote"===t.type,n=t.url===e.url;return a&&n});t?n.push(t):p.current(e)?s.push(e):l.push(e)}),{connectorServers:n,directoryServers:s,unknownServers:l}},[a,d,K]),J=(0,M.v)("enabled_mcp_tools"),$=(0,b.useMemo)(()=>J||{},[J]),{mutateAsync:V}=(0,_.XJ)({entityId:o.uuid,artifactEntityType:o.type}),X=(0,b.useCallback)(e=>e.tools?Y?e.tools.filter(e=>e.name.toLowerCase().includes(Y.toLowerCase())):e.tools:[],[Y]);if((0,b.useEffect)(()=>{if((null==K?void 0:K.mcp_servers)&&(null==R?void 0:R.length)){let e={};K.mcp_servers.forEach(t=>{let a=R.find(e=>e.url===t.url);(null==a?void 0:a.tools)&&a.tools.forEach(a=>{let n=t.allowed_tools.includes(a.name);e[a.enabledKey]=n})}),D(e)}else Object.keys($).length>0&&D($)},[K,R,$]),!R.length&&!q.length&&!H.length)return n(),null;if(!R.length&&!q.length)return(0,s.jsx)(L,{isOpen:t,onClose:n,variant:"empty",unknownServerCount:H.length});let B=R.filter(e=>e.isConnected),G=e=>e.tools&&0!==e.tools.length?e.tools.filter(e=>!1!==O[e.enabledKey]).length:null,Q=B.filter(e=>{let t=G(e);return null!==t&&t>0}).length,W=async e=>{try{await ee(e),n()}catch(e){y(N,{error:e})}},ee=async e=>{let t=R.map(t=>{let a=t.tools||[],n=[],s=[],l=t.isConnected;return e&&a.length>0&&l?a.forEach(e=>{!1!==O[e.enabledKey]?n.push(e.name):s.push(e.name)}):!e&&a.length>0&&a.forEach(e=>{s.push(e.name)}),{name:t.name||"",url:t.url||"",allowed_tools:n,disallowed_tools:s,pending_tool_section:!!e&&!l}}),a=[...q,...H].map(e=>({name:e.name||"",url:e.url||"",allowed_tools:[],disallowed_tools:[],pending_tool_section:!1}));await V({mcp_servers:[...t,...a]})},et=e=>!!e.tools&&0!==e.tools.length&&e.tools.filter(e=>!1!==O[e.enabledKey]).length>0;return F?(0,s.jsx)(f.aF,{title:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("button",{onClick:()=>U(null),className:"hover:bg-bg-200 rounded transition-colors",children:(0,s.jsx)(j.A,{className:"w-5 h-5"})}),(0,s.jsx)("span",{children:(0,s.jsx)(C.A,{defaultMessage:"Customize {serverName}",id:"xtLJnxdHqO",values:{serverName:F.name||F.url||""}})})]}),isOpen:t,onClose:n,children:(0,s.jsxs)("div",{className:"flex flex-col gap-3 py-3",children:[(0,s.jsx)("p",{className:"text-sm description-text-300",children:(0,s.jsx)(u.YX,{id:"crystal_muffin_bicycle"})}),(0,s.jsx)(g.r,{gradientHeight:24,className:"max-h-[500px]",children:(0,s.jsxs)(z,{className:"!gap-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2.5 px-1.5",children:[(0,s.jsx)(h.vj,{className:"w-4 h-4 text-text-500/50"}),(0,s.jsx)(i.ks,{placeholder:c.formatMessage({defaultMessage:"Search tools",id:"QVlai1/dYD"}),value:Y,onChange:e=>Z(e.target.value),className:"flex-1 !border-none !outline-none !p-0 !text-sm text-text-300 placeholder:text-text-500/70"})]}),F.tools&&F.tools.length>1&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(S.$,{item:{key:"select-all",type:"switch",label:et(F)?c.formatMessage({defaultMessage:"Disable all tools",id:"8A9N39nihk"}):c.formatMessage({defaultMessage:"Enable all tools",id:"x4/g36jIjW"}),icon:(0,s.jsx)(l.p,{letter:F.tools[0].name,size:16}),isChecked:et(F),onClick:()=>{let e=!et(F);if(F.tools){let t={...O};F.tools.forEach(a=>{t[a.enabledKey]=e}),D(t)}}}}),(0,s.jsx)("div",{className:"border-t border-border-300"})]}),X(F).map(e=>{let t=e.enabledKey,a=!1!==O[t];return(0,s.jsx)(S.$,{item:{key:t,type:"switch",label:e.name,icon:(0,s.jsx)(l.B,{letter:e.name,size:16}),isChecked:a,onClick:()=>{D(e=>({...e,[t]:!a}))}}},t)})]})})]})}):E?(0,s.jsxs)(f.aF,{title:c.formatMessage({defaultMessage:"Allow access to connectors",id:"5yCBRk9i5t"}),isOpen:t,onClose:n,children:[(0,s.jsxs)("div",{className:"flex flex-col gap-3 py-3",children:[(0,s.jsx)("p",{className:"text-sm description-text-300",children:(0,s.jsx)(u.YX,{id:"penguin_tomato_umbrella"})}),(0,s.jsx)(g.r,{gradientHeight:24,className:"max-h-[500px]",children:(0,s.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,s.jsxs)(z,{children:[R.map(e=>{var t;let a,n=B.includes(e),l=G(e),r=(null==(t=e.tools)?void 0:t.length)||0;return a=n?0===l||l===r?"toggle":"tools":"connect",(0,s.jsx)(I,{server:e,variant:a,onClick:()=>U(e),enabledToolsCount:l,artifactId:o.id,versionUuid:o.uuid,isInDirectory:"remote"===e.type&&p.current(e),onToggleAll:t=>((e,t)=>{if(e.tools){let a={...O};e.tools.forEach(e=>{a[e.enabledKey]=t}),D(a)}})(e,t)},e.uuid||e.url)}),q.length>0&&(0,s.jsxs)(s.Fragment,{children:[R.length>0&&(0,s.jsx)("div",{className:"border-t-0.5 border-border-300 -mx-5"}),q.map(e=>(0,s.jsx)(I,{server:e,variant:"unavailable",isInDirectory:!0},e.url))]}),H.length>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"border-t-0.5 border-border-300 -mx-5"}),(0,s.jsx)("p",{className:"text-xs text-text-500",children:(0,s.jsx)(C.A,{defaultMessage:"{count, plural, one {# requested connector is not in your directory and has been} other {# requested connectors are not in your directory and have been}} hidden. Some functionality may be limited. {link}",id:"BwbZlzhj12",values:{count:H.length,link:(0,s.jsx)(v.Y,{href:"/settings/connectors",children:(0,s.jsx)(C.A,{defaultMessage:"Manage connectors.",id:"0+FF8HZw5G"})})}})})]})]}),(0,s.jsx)(z,{className:"bg-bg-100",children:(0,s.jsx)("p",{className:"text-sm text-text-500",children:(0,s.jsx)(C.A,{defaultMessage:"Claude cannot guarantee the security or privacy practices of third-party integrations.",id:"3gyayAmXQv"})})})]})})]}),(0,s.jsx)(f.vW,{children:Q>0?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(m.$,{variant:"secondary",onClick:n,children:(0,s.jsx)(C.A,{defaultMessage:"Not now",id:"dUCA4Khx0S"})}),(0,s.jsx)(m.$,{onClick:()=>W(!0),variant:"primary",children:(0,s.jsx)(C.A,{defaultMessage:"Continue with {count, plural, one {# connector} other {# connectors}}",id:"YL3kaz513s",values:{count:Q}})})]}):(0,s.jsx)(m.$,{onClick:()=>W(!0),variant:"primary",children:(0,s.jsx)(C.A,{defaultMessage:"Continue without connectors",id:"0AAuZbbfFT"})})})]}):(0,s.jsx)(L,{isOpen:t,onClose:n,variant:"disabled"})}},78540:(e,t,a)=>{a.d(t,{j:()=>r});var n=a(64328),s=a(68067),l=a(7620);let r=function(){let{artifactContext:e,onMissingOrganization:t,chatConversationUuid:a,onStorageChange:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:o}=(0,n.YL)(),{value:i}=(0,s.fS)("claude_create_pebble_stone"),c=(0,l.useCallback)(async function(n){let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!(null==o?void 0:o.uuid))return null==t||t(),Promise.resolve(null);if(!i||!e)return Promise.resolve(null);try{let t=new URL("/api/organizations/".concat(o.uuid,"/artifacts/").concat(e.type,"/").concat(e.uuid,"/storage/").concat(encodeURIComponent(n)),window.location.origin);t.searchParams.set("shared",s.toString()),a&&t.searchParams.set("chat_conversation_uuid",a);let l=await fetch(t.toString(),{method:"GET",headers:{"Content-Type":"application/json"}});if(!l.ok)throw Error("Database error: ".concat(l.status));let r=await l.json();return Promise.resolve(r)}catch(e){return Promise.reject(e)}},[i,null==o?void 0:o.uuid,e,t,a]),d=(0,l.useCallback)(async function(n,s){let l=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!(null==o?void 0:o.uuid))return null==t||t(),Promise.resolve(null);if(!i||!e)return Promise.resolve(null);try{let t=await fetch("/api/organizations/".concat(o.uuid,"/artifacts/").concat(e.type,"/").concat(e.uuid,"/storage/").concat(encodeURIComponent(n)),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({value:s,shared:l,...a&&{chat_conversation_uuid:a}})});if(!t.ok)throw Error("Database error: ".concat(t.status));let i=await t.json();return null==r||r(),Promise.resolve(i)}catch(e){return Promise.reject(e)}},[i,null==o?void 0:o.uuid,e,t,a,r]),u=(0,l.useCallback)(async function(n){let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!(null==o?void 0:o.uuid))return null==t||t(),Promise.resolve(null);if(!i||!e)return Promise.resolve(null);try{let t=new URL("/api/organizations/".concat(o.uuid,"/artifacts/").concat(e.type,"/").concat(e.uuid,"/storage/").concat(encodeURIComponent(n)),window.location.origin);t.searchParams.set("shared",s.toString()),a&&t.searchParams.set("chat_conversation_uuid",a);let l=await fetch(t.toString(),{method:"DELETE",headers:{"Content-Type":"application/json"}});if(!l.ok)throw Error("Database error: ".concat(l.status));let i=await l.json();return null==r||r(),Promise.resolve(i)}catch(e){return Promise.reject(e)}},[i,null==o?void 0:o.uuid,e,t,a,r]),h=(0,l.useCallback)(async function(n){let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!(null==o?void 0:o.uuid))return null==t||t(),Promise.resolve(null);if(!i||!e)return Promise.resolve(null);try{let t=new URL("/api/organizations/".concat(o.uuid,"/artifacts/").concat(e.type,"/").concat(e.uuid,"/storage"),window.location.origin);n&&t.searchParams.set("prefix",n),t.searchParams.set("shared",s.toString()),a&&t.searchParams.set("chat_conversation_uuid",a);let l=await fetch(t.toString(),{method:"GET",headers:{"Content-Type":"application/json"}});if(!l.ok)throw Error("Database error: ".concat(l.status));let r=await l.json();return Promise.resolve(r)}catch(e){return Promise.reject(e)}},[i,null==o?void 0:o.uuid,e,t,a]);return{get:c,set:d,delete:u,list:h}}},85028:(e,t,a)=>{a.d(t,{Ns:()=>u,XJ:()=>d,mt:()=>c,r$:()=>i,rz:()=>h});var n=a(1613),s=a(64328),l=a(68067),r=a(4869);let o="artifact_tool_configuration",i="artifact_storage_info",c=e=>{let{entityId:t,artifactEntityType:a}=e,{activeOrganization:r}=(0,s.YL)(),i=null==r?void 0:r.uuid,{value:c}=(0,l.fS)("claude_create_marble");return(0,n.Sk)("/api/organizations/".concat(i,"/artifacts/").concat(a,"/").concat(t,"/tools"),{queryKey:[o,{orgUuid:i,entityId:t,artifactEntityType:a}],enabled:!!i&&!!t&&c,meta:{noToast:!0}})},d=e=>{let{entityId:t,artifactEntityType:a}=e,{activeOrganization:i}=(0,s.YL)(),c=null==i?void 0:i.uuid,d=(0,r.useQueryClient)(),{value:u}=(0,l.fS)("claude_create_marble");return(0,n.L2)("/api/organizations/".concat(c,"/artifacts/").concat(a,"/").concat(t,"/tools"),"POST",{enabled:!!c&&!!t&&u,onSuccess:()=>{d.invalidateQueries({queryKey:[o,{orgUuid:c,entityId:t,artifactEntityType:a}]})},meta:{noToast:!0}})},u=(e,t)=>{var a;let{entityId:r,artifactEntityType:o,conversationUuid:c}=e,{activeOrganization:d}=(0,s.YL)(),u=null==d?void 0:d.uuid,{value:h}=(0,l.fS)("claude_create_pebble_stone"),m=c?"/api/organizations/".concat(u,"/artifacts/").concat(o,"/").concat(r,"/manage/storage/info?chat_conversation_uuid=").concat(c):"/api/organizations/".concat(u,"/artifacts/").concat(o,"/").concat(r,"/manage/storage/info");return(0,n.Sk)(m,{queryKey:[i,{orgUuid:u,entityId:r,artifactEntityType:o,conversationUuid:c}],enabled:!!u&&!!r&&h&&(null==(a=null==t?void 0:t.enabled)||a),staleTime:0,meta:{noToast:!0}})},h=e=>{let{entityId:t,artifactEntityType:a,conversationUuid:o}=e,{activeOrganization:c}=(0,s.YL)(),d=null==c?void 0:c.uuid,u=(0,r.useQueryClient)(),{value:h}=(0,l.fS)("claude_create_pebble_stone"),m=o?"/api/organizations/".concat(d,"/artifacts/").concat(a,"/").concat(t,"/manage/storage/reset?chat_conversation_uuid=").concat(o):"/api/organizations/".concat(d,"/artifacts/").concat(a,"/").concat(t,"/manage/storage/reset");return(0,n.L2)(m,"DELETE",{enabled:!!d&&!!t&&h,onSuccess:()=>{u.invalidateQueries({queryKey:[i,{orgUuid:d,entityId:t,artifactEntityType:a,conversationUuid:o}]})},meta:{noToast:!0}})}}}]);