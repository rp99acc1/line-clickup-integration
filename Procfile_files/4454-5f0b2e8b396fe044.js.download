try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="632795fc-4034-40d8-80d4-34acc8a783e6",e._sentryDebugIdIdentifier="sentry-dbid-632795fc-4034-40d8-80d4-34acc8a783e6")}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4454],{6149:(e,t,s)=>{s.d(t,{q:()=>o});var i=s(54568),n=s(18868),a=s(72902),r=s(7620),l=s(88775);let o=e=>{let{children:t,actionButton:s,title:o,minimalUi:u,dangerText:d}=e,{hasBlockingWarning:c,setHasBlockingWarning:g}=(0,l.Tc)(e=>({hasBlockingWarning:e.hasBlockingWarning,setHasBlockingWarning:e.setHasBlockingWarning}),"BlockingWarning");return(0,r.useEffect)(()=>(g(!0),()=>{g(!1)}),[c,g]),(0,i.jsx)("div",{className:"w-full",children:(0,i.jsxs)("div",{className:"flex w-full flex-col items-center md:flex-row gap-2",children:[(0,i.jsxs)("div",{className:(0,a.A)("flex flex-row items-center gap-2 md:w-full",d?"text-danger-000":u?"text-text-300":"text-danger-000"),children:[u?null:(0,i.jsx)(n.N,{className:"h-4 w-4 shrink-0",weight:"regular"}),(0,i.jsxs)("div",{children:[o&&(0,i.jsx)("div",{className:"text-sm font-medium",children:o}),(0,i.jsx)("div",{className:"text-sm",children:t})]})]}),!!s&&(0,i.jsx)("div",{className:"-mt-px w-full whitespace-nowrap md:w-fit",children:s})]})})}},13982:(e,t,s)=>{s.d(t,{D:()=>l,MessageLimitModalProvider:()=>o});var i=s(54568),n=s(7620),a=s(2722);let r=null;function l(){r&&r(!0)}function o(){let[e,t]=(0,n.useState)(!1);return(0,n.useEffect)(()=>(r=t,()=>{r=null}),[]),(0,i.jsx)(a.v,{isOpen:e,onClose:()=>t(!1),limitType:"message_limit"})}},17421:(e,t,s)=>{s.d(t,{$D:()=>h,I5:()=>f,LL:()=>w,Lb:()=>v,QJ:()=>m,ct:()=>k,eG:()=>_,gn:()=>p,oz:()=>x});var i=s(1613),n=s(64328),a=s(80688),r=s(68067),l=s(8019),o=s(65738),u=s(4869),d=s(7620),c=s(24407),g=s(74172);function m(){return(0,r.fS)("yukon_gold").value}let h=function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],{activeOrganization:s}=(0,n.YL)(),r=null==s?void 0:s.uuid;return(0,i.Sk)("/v1/sessions",{queryKey:[a.Rv,{orgUuid:r}],enabled:!!s&&e,staleTime:3e4,refetchInterval:t,meta:{noToast:!0},headers:{"anthropic-version":"2023-06-01","anthropic-beta":"ccr-byoc-2025-07-29",...r?{"x-organization-uuid":r}:{}}})};function f(e,t){return{uuid:(0,l.b)(),session_id:t,type:"user",parent_tool_use_id:null,message:{role:"user",content:e}}}let p=e=>{let{activeOrganization:t}=(0,n.YL)(),s=null==t?void 0:t.uuid;return(0,i.Sk)("/v1/sessions/".concat(e),{queryKey:[a.Ex,{orgUuid:s,sessionId:e}],enabled:!!t,meta:{noToast:!0},headers:{"anthropic-version":"2023-06-01","anthropic-beta":"ccr-byoc-2025-07-29",...s?{"x-organization-uuid":s}:{}}})};function v(e){let t=(0,r.T9)("bad_moon_rising_config","environment_id","",c.z.string()),s=(0,r.T9)("bad_moon_rising_prompt","main",void 0,c.z.string().nullable().optional()),i=(0,r.T9)("ccr_model","model","claude-sonnet-4-20250514",c.z.string()),n=x();return(0,d.useCallback)(a=>n({...a,environmentId:t,model:i,customPrompt:"session"===e&&null!=s?s:void 0}),[t,n,i,s,e])}function x(){let e=b();return(0,d.useCallback)(t=>{let{initialMessage:s,title:i,customPrompt:n,model:a,gitRepoUrl:r,gitBranch:l,environmentId:o}=t,u=[];s&&u.push({type:"event",data:s});let d=[],c=[];return r&&l&&(d.push({type:"git_repository",url:r}),c.push({type:"git_repository",git_info:{type:"github",repo:r.split("github.com/")[1],branches:[l]}})),e.mutateAsync({title:i,events:u,environment_id:o,session_context:{sources:d,outcomes:c,...void 0!==n?{custom_system_prompt:n}:{},...void 0!==a?{model:a}:{}}})},[e])}let b=()=>{let{activeOrganization:e}=(0,n.YL)(),t=(0,u.useQueryClient)(),s=null==e?void 0:e.uuid;return(0,i.L2)("/v1/sessions","POST",{onSuccess:()=>{t.invalidateQueries({queryKey:[a.Rv,{orgUuid:s}]})},meta:{noToast:!0},headers:{"anthropic-version":"2023-06-01","anthropic-beta":"ccr-byoc-2025-07-29",...s?{"x-organization-uuid":s}:{}}})};function _(){let{activeOrganization:e}=(0,n.YL)(),t=null==e?void 0:e.uuid;return(0,i.L2)("/api/organizations/".concat(t,"/dust/generate_title_and_branch"),"POST")}function w(){let{activeOrganization:e}=(0,n.YL)(),t=null==e?void 0:e.uuid;return(0,i.L2)("/api/organizations/".concat(t,"/dust/generate_session_title"),"POST")}let j=function(e,t){var s;let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=null!=(s=i.useOrglessPath)&&s,a=n?"/v1/sessions/ws/".concat(t,"/subscribe"):"/v1/sessions/ws/organizations/".concat(e,"/sessions/").concat(t,"/subscribe"),r=new URLSearchParams;i.replay&&r.append("replay","true"),n&&r.append("organization_uuid",e);let l=r.toString();l&&(a+="?".concat(l));let o="https:"===window.location.protocol?"wss:":"ws:";return"".concat(o,"//").concat(window.location.host).concat(a)},y=function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],{activeOrganization:s}=(0,n.YL)(),r=null==s?void 0:s.uuid;return(0,i.Sk)("/v1/sessions/".concat(e,"/events"),{queryKey:[a.ri,{orgUuid:r,sessionId:e}],enabled:!!s&&t,meta:{noToast:!0},headers:{"anthropic-version":"2023-06-01","anthropic-beta":"ccr-byoc-2025-07-29",...r?{"x-organization-uuid":r}:{}}})};class M{[Symbol.asyncIterator](){if(this.started)throw Error("Stream can only be iterated once");return this.started=!0,this}next(){return this.queue.length>0?Promise.resolve({done:!1,value:this.queue.shift()}):this.isDone?Promise.resolve({done:!0,value:void 0}):this.hasError?Promise.reject(this.hasError):new Promise((e,t)=>{this.readResolve=e,this.readReject=t})}enqueue(e){if(this.readResolve){let t=this.readResolve;this.readResolve=void 0,this.readReject=void 0,t({done:!1,value:e})}else this.queue.push(e)}done(){if(this.isDone=!0,this.readResolve){let e=this.readResolve;this.readResolve=void 0,this.readReject=void 0,e({done:!0,value:void 0})}}error(e){if(this.hasError=e,this.readReject){let t=this.readReject;this.readResolve=void 0,this.readReject=void 0,t(e)}}return(){return this.isDone=!0,this.returned&&this.returned(),Promise.resolve({done:!0,value:void 0})}constructor(e){this.returned=e,this.queue=[],this.isDone=!1,this.started=!1}}function k(e,t){let{data:s,isLoading:i,refetch:a}=y(e,!1),{inputStream:u,streamedMessages:c}=function(e,t,s){let i=!(arguments.length>3)||void 0===arguments[3]||arguments[3],a=!(arguments.length>4)||void 0===arguments[4]||arguments[4],l=(0,d.useRef)(null),u=(0,d.useRef)(null),c=(0,d.useRef)(null),[g,m]=(0,d.useState)([]);(0,d.useEffect)(()=>{m([])},[e]);let h=(0,d.useRef)(null);(0,d.useEffect)(()=>{h.current=t},[t]);let{activeOrganization:f}=(0,n.YL)(),p=null==f?void 0:f.uuid,v=(0,d.useCallback)(()=>{u.current&&(u.current.abort(),u.current=null),c.current&&(c.current.done(),c.current=null),l.current=null},[]),{value:x}=(0,r.fS)("sessions_orgless_websocket"),b=(0,d.useCallback)(()=>{if(!i||!p||!e)return;v(),u.current=new AbortController,c.current=new M;let t={url:j(p,e,{useOrglessPath:x}),...x?{headers:{"x-organization-uuid":p}}:{}},n=(0,o.P)({prompt:c.current,websocket:t,abortController:u.current});(async()=>{try{for await(let t of n){var e=h.current;if("result"===t.type&&"granted"===Notification.permission){let t=new Notification(e?"Claude updated ".concat(e):"Update from Claude",{body:"Your task is ready for review",icon:"/favicon.svg",badge:"/favicon.svg"});t.onclick=()=>{window.focus(),t.close()}}m(e=>[...e,t])}}catch(e){a&&e instanceof Error&&"WebSocket connection aborted by user"!==e.message&&b()}})(),s(),l.current=n},[i,p,e,v,s,h,a,x]);return(0,d.useEffect)(()=>{b()},[b]),(0,d.useEffect)(()=>()=>v(),[v]),{inputStream:c.current,streamedMessages:g}}(e,t,a),m=(0,g.T)(e),h=(0,g.j)(),f=(0,d.useMemo)(()=>i||!s?[]:s.data,[i,s]),p=(0,d.useMemo)(()=>{let e=new Set;for(let t of f)e.add(t.uuid);let t=[...f];for(let s of c)s.uuid&&!e.has(s.uuid)&&t.push(s);return t},[f,c]),v=(0,d.useCallback)(t=>{let s={uuid:(0,l.b)(),type:"user",session_id:e,parent_tool_use_id:null,message:{role:"user",content:t}};h(e,s),null==u||u.enqueue(s)},[u,h,e]),x=(0,d.useMemo)(()=>{if(0===m.length)return[];let e=new Set;for(let t of p)e.add(t.uuid);return m.filter(t=>!e.has(t.uuid))},[m,p]);return{loadingInitialMessages:i,sendMessage:v,messages:p,pendingMessages:x}}},28483:(e,t,s)=>{s.d(t,{IK:()=>S,hq:()=>C,AC:()=>L});var i=s(54568),n=s(96614),a=s(91820),r=s(64328),l=s(60687),o=s(23812),u=s(84617),d=s(39613),c=s(68067),g=s(98304),m=s(66365),h=s(45312),f=s(7620),p=s(59666),v=s(36541),x=s(59951),b=s(13982),_=s(46302),w=s(37e3),j=s(6149),y=s(68034);function M(e,t){var s,i,n,a,r,l,o,u;if(!e)return{windowName:null,status:null};let d=null==(u=null==t?void 0:t.startsWith("claude-opus"))||u,c=(null==(s=e["5h"])?void 0:s.status)==="exceeded_limit",g=(null==(i=e["7d"])?void 0:i.status)==="exceeded_limit",m=d&&(null==(n=e["7d_opus"])?void 0:n.status)==="exceeded_limit",h=(null==(a=e.overage)?void 0:a.status)==="exceeded_limit";if((g||c||m)&&h)return{windowName:"overage",status:e.overage};let f=[];if(c&&f.push({name:"5h",resetTime:e["5h"].resets_at}),g&&f.push({name:"7d",resetTime:e["7d"].resets_at}),m&&f.push({name:"7d_opus",resetTime:e["7d_opus"].resets_at}),f.length>1){let t=f.reduce((e,t)=>t.resetTime>e.resetTime?t:e);return{windowName:t.name,status:e[t.name]}}return m?{windowName:"7d_opus",status:e["7d_opus"]}:g?{windowName:"7d",status:e["7d"]}:c||(null==(r=e["5h"])?void 0:r.status)==="approaching_limit"?{windowName:"5h",status:e["5h"]}:(null==(l=e["7d"])?void 0:l.status)==="approaching_limit"?{windowName:"7d",status:e["7d"]}:(null==(o=e.overage)?void 0:o.status)==="approaching_limit"?{windowName:"overage",status:e.overage}:{windowName:null,status:null}}function k(){let e=(0,m.useExperiment)("claude_ai_rate_limit_modal").get("show_upgrade_modal",!1);return(0,f.useEffect)(()=>{e&&(0,b.D)()},[e]),null}let L=()=>{let{messageLimit:e}=(0,r.YL)(),{isTierSelectorEnabled:t}=(0,l.t)(),s=(0,r.mV)(),n=(0,r.O9)(),a=(0,r.zc)(),[o,u]=(0,f.useState)(!0),[d,c]=(0,f.useState)(!0),g=function(e){var t,s,i;if(!e||"within_limit"===e.type)return{isOverageScenario:!1,isBlocking:!1,isActive:!1};let n=!!e.overageDisabledReason&&"overage_not_provisioned"!==e.overageDisabledReason&&"org_level_disabled"!==e.overageDisabledReason,a=!!(null==(t=e.windows)?void 0:t.overage)||n,r=(null==(i=e.windows)||null==(s=i.overage)?void 0:s.status)==="exceeded_limit"||n;return{isOverageScenario:a,isBlocking:r,isActive:!r&&a}}(e);return g.isOverageScenario?g.isBlocking?{messageLimit:e,overageExceededWarning:(0,i.jsx)(A,{messageLimit:e,isBlocking:!0})}:{messageLimit:e,approachingMessageLimitWarning:d?(0,i.jsx)(A,{messageLimit:e,isBlocking:!1,onDismiss:()=>c(!1)}):void 0}:(null==e?void 0:e.type)==="exceeded_limit"||(null==e?void 0:e.type)==="approaching_limit"&&0===e.remaining?{messageLimit:e,exceededMessageLimitWarning:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(E,{messageLimit:e,showTierSelector:t}),!n&&!s&&!a&&(0,i.jsx)(k,{})]})}:(null==e?void 0:e.type)==="approaching_limit"?{messageLimit:e,approachingMessageLimitWarning:o?(0,i.jsx)(I,{messageLimit:e,onDismiss:()=>u(!1)}):void 0}:{}},S=e=>{let t=L(),{messageLimit:s}=t,i=(null==s?void 0:s.type)==="within_limit",a=(0,n.Z3)(e),r=i?null:null==s?void 0:s.conversationUuid,l=(0,n.Z3)(null!=r?r:null);return(null==s?void 0:s.type)!=="within_limit"&&(null==s?void 0:s.perModelLimit)&&a!==l?{}:t};function E(e){let{messageLimit:t,showTierSelector:s=!1}=e,n=(0,r.mV)(),a=(0,r.O9)(),l=(0,r.zc)(),o=(0,r.tP)(),c=(0,x.o)(),g=(0,y.h)(),{account:m,activeOrganization:v}=(0,r.YL)(),{hasOAuthTokens:b}=function(){var e;let{data:t,isLoading:s}=(0,_.Jh)();return{hasOAuthTokens:null!=(e=null==t?void 0:t.some(e=>!e.is_revoked))&&e,isLoading:s}}(),w=(0,f.useMemo)(()=>{if(!m||!v)return!1;let e=m.memberships.find(e=>e.organization.uuid===v.uuid);return(null==e?void 0:e.seat_tier)==="enterprise_usage_based"},[m,v]),{windowName:k,status:L}=M(t.windows),S=(null==L?void 0:L.resets_at)||t.resetsAt;if(!S)return null;let E=h.c9.fromSeconds(S),I=n&&c,A=(()=>{if(w)if(I)return(0,i.jsx)(p.A,{defaultMessage:"Extra usage is required - contact an admin to keep working",id:"Bidiq5CnYF"});else return(0,i.jsx)(p.A,{defaultMessage:"Extra usage is required",id:"fejJ1o01QI"});if("5h"===k)if(I)return(0,i.jsx)(p.A,{defaultMessage:"5-hour limit resets {time} - contact an admin to keep working",id:"JtwE+AsNoz",values:{time:E.toLocaleString(h.c9.TIME_SIMPLE)}});else return(0,i.jsx)(p.A,{defaultMessage:"5-hour limit reached ∙ resets {time}",id:"wEubEiECAS",values:{time:E.toLocaleString(h.c9.TIME_SIMPLE)}});if("7d"===k){let e=E.toFormat("cccc");return I?(0,i.jsx)(p.A,{defaultMessage:"Weekly limit resets {day} {time} - contact an admin to keep working",id:"LUFY3UYYXY",values:{day:e,time:E.toLocaleString(h.c9.TIME_SIMPLE)}}):(0,i.jsx)(p.A,{defaultMessage:"Weekly limit reached ∙ resets {day} {time}",id:"MhyGCtndd7",values:{day:e,time:E.toLocaleString(h.c9.TIME_SIMPLE)}})}if("7d_opus"===k){let e=E.toFormat("cccc");return I?(0,i.jsx)(p.A,{defaultMessage:"Opus limit resets {day} {time} - contact an admin to keep working",id:"ir+wpgGBaT",values:{day:e,time:E.toLocaleString(h.c9.TIME_SIMPLE)}}):(0,i.jsx)(p.A,{defaultMessage:"Opus limit reached ∙ resets {day} {time}",id:"9Di9WqoUCM",values:{day:e,time:E.toLocaleString(h.c9.TIME_SIMPLE)}})}return null})();return(0,i.jsxs)(j.q,{actionButton:I?null:g,minimalUi:!0,children:[A||(s?(0,i.jsx)(p.A,{defaultMessage:"Usage limit reached — your limit will reset at {time}. As an internal user, you can change your tier in the user menu to test different rate limits.",id:"Um8zFcRLL/",values:{time:(0,i.jsx)("span",{className:"inline-block",children:E.toLocaleString(h.c9.TIME_SIMPLE)})}}):l&&o?(0,i.jsx)(p.A,{defaultMessage:"Increase usage for uninterrupted work or continue at {time}.",id:"5QbZN4LMkt",values:{time:(0,i.jsx)("span",{className:"inline-block",children:E.toLocaleString(h.c9.TIME_SIMPLE)})}}):a||n||l?b?(0,i.jsx)(p.A,{defaultMessage:"Usage limit reached — your limit will reset at {time}. <link>Your limits are shared with Claude Code</link>",id:"UrobydPO9o",values:{time:(0,i.jsx)("span",{className:"inline-block",children:E.toLocaleString(h.c9.TIME_SIMPLE)}),link:e=>(0,i.jsx)(u.Y,{href:"/settings/claude-code",children:e})}}):(0,i.jsx)(p.A,{defaultMessage:"Usage limit reached — your limit will reset at {time}.",id:"bXAswF0AK8",values:{time:(0,i.jsx)("span",{className:"inline-block",children:E.toLocaleString(h.c9.TIME_SIMPLE)})}}):(0,i.jsx)(p.A,{defaultMessage:"You are out of free <link>messages</link> until {time}",id:"PKaisys/Ji",values:{time:(0,i.jsx)("span",{className:"inline-block",children:E.toLocaleString(h.c9.TIME_SIMPLE)}),link:e=>(0,i.jsx)(u.Y,{target:"_blank",rel:"noreferrer",href:d.Kf,children:e})}})),(0,i.jsx)(P,{messageLimit:t})]})}let I=e=>{let{messageLimit:t,onDismiss:s}=e,n=(0,y.h)(),{windowName:a,status:r}=M(t.windows),l=(null==r?void 0:r.resets_at)||t.resetsAt;if(!l)return null;let u=h.c9.fromSeconds(l);return(0,i.jsxs)(w.x,{children:[(0,i.jsx)("span",{className:"text-text-300 text-sm",children:"5h"===a?(0,i.jsx)(p.A,{defaultMessage:"Approaching 5-hour limit",id:"TLC6m0t22W"}):"7d"===a?(0,i.jsx)(p.A,{defaultMessage:"Approaching weekly limit",id:"t2T1PWD6TI"}):(0,i.jsx)(p.A,{defaultMessage:"You’re almost out of usage - your limits will reset at {time}",id:"jKI2rDp1ds",values:{time:(0,i.jsx)("span",{className:"inline-block",children:u.toLocaleString(h.c9.TIME_SIMPLE)})}})}),(0,i.jsxs)("span",{children:[n,(0,i.jsx)(o.$,{className:"ml-2 h-6 w-6 translate-y-[0.5px] rounded !bg-transparent",size:"unset",variant:"ghost",onClick:s,children:(0,i.jsx)(g.X,{size:12})})]})]})},A=e=>{let{messageLimit:t,onDismiss:s,isBlocking:n}=e;return n?(0,i.jsx)(T,{messageLimit:t}):(0,i.jsx)(N,{messageLimit:t,onDismiss:s})},T=e=>{let{messageLimit:t}=e,s=(0,r.mV)(),n=(0,x.o)(),[a,l]=(0,f.useState)(!1);if(s&&n)return(0,i.jsx)(j.q,{actionButton:null,minimalUi:!0,dangerText:!0,children:(0,i.jsx)(p.A,{defaultMessage:"Limit reached - contact an admin to keep working",id:"f1/9b+4969"})});if((null==t?void 0:t.overageDisabledReason)==="out_of_credits"){let e=(0,i.jsx)("button",{onClick:()=>l(!0),className:"underline text-sm",children:(0,i.jsx)(p.A,{defaultMessage:"Add funds",id:"sx0aSlxLIy"})});return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(j.q,{actionButton:e,minimalUi:!0,dangerText:!0,children:(0,i.jsx)(p.A,{defaultMessage:"Wallet empty",id:"hgChvDBkGs"})}),(0,i.jsx)(v.l,{isOpen:a,onClose:()=>l(!1)})]})}let o=(0,i.jsx)(u.Y,{href:"/settings/usage",className:"text-sm",children:(0,i.jsx)(p.A,{defaultMessage:"Manage",id:"0AzlrbMWV9"})});return(0,i.jsx)(j.q,{actionButton:o,minimalUi:!0,dangerText:!0,children:(0,i.jsx)(p.A,{defaultMessage:"Spending cap reached",id:"e2HH8SvqXl"})})},N=e=>{let{messageLimit:t,onDismiss:s}=e,{windowName:n,status:a}=M(t.windows),r=(null==a?void 0:a.resets_at)||t.resetsAt;if(!r)return null;let l=h.c9.fromSeconds(r);return(0,i.jsxs)(w.x,{children:[(0,i.jsx)("span",{className:"text-text-300 text-sm",children:(()=>{if("5h"===n)return(0,i.jsx)(p.A,{defaultMessage:"5-hour limit resets {time} ∙ continuing with extra usage",id:"Imf94b7CcD",values:{time:l.toLocaleString(h.c9.TIME_SIMPLE)}});if("7d"===n){let e=l.toFormat("cccc");return(0,i.jsx)(p.A,{defaultMessage:"Weekly limit resets {day} {time} ∙ continuing with extra usage",id:"wvFU29jyYg",values:{day:e,time:l.toLocaleString(h.c9.TIME_SIMPLE)}})}if("7d_opus"===n){let e=l.toFormat("cccc");return(0,i.jsx)(p.A,{defaultMessage:"Opus limit resets {day} {time} ∙ continuing with extra usage",id:"P3sN2kt3TW",values:{day:e,time:l.toLocaleString(h.c9.TIME_SIMPLE)}})}return(0,i.jsx)(p.A,{defaultMessage:"Limit reached ∙ continuing with extra usage",id:"uWI9rRK6Dw"})})()}),(0,i.jsx)("span",{children:s&&(0,i.jsx)(o.$,{className:"ml-2 h-6 w-6 translate-y-[0.5px] rounded !bg-transparent",size:"unset",variant:"ghost",onClick:s,children:(0,i.jsx)(g.X,{size:12})})})]})},P=e=>{let{messageLimit:t}=e,{mutate:s}=(0,a.T)(t.conversationUuid),{value:n}=(0,c.fS)("can_reset_rate_limits");return n?(0,i.jsx)(o.$,{className:"ml-2",variant:"secondary",size:"sm",onClick:()=>s(),children:(0,i.jsx)(p.A,{defaultMessage:"Reset limits",id:"0Lg76lu7jn"})}):null},C=e=>{var t;let{messageLimit:s,activeOrganization:i}=(0,r.YL)(),l=(0,a.$)(),o=(0,n.Z3)(e),u=(null==s?void 0:s.type)!=="within_limit"&&null!=(t=null==s?void 0:s.conversationUuid)?t:null,d=(0,n.Z3)(u);(0,f.useEffect)(()=>{(null==i?void 0:i.uuid)&&s&&"within_limit"!==s.type&&d!==o&&l({type:"within_limit"},i.uuid,e)},[e,d,i,s,o,l])}},37e3:(e,t,s)=>{s.d(t,{x:()=>a});var i=s(2348);function n(){let e=(0,i._)(["\n  font-normal\n  text-[0.65rem]\n  sm:text-xs\n  w-full\n  flex\n  gap-1.5\n  items-center\n  justify-between\n"]);return n=function(){return e},e}let a=s(59922).J.div(n())},43465:(e,t,s)=>{s.d(t,{j:()=>r,y:()=>a});var i=s(55562),n=s(7620);let a=e=>{let{shouldFocus:t,target:s,delayMs:i=100}=e;(0,n.useEffect)(()=>{if(t&&s){let e=setTimeout(()=>{var e;null==(e=s.current)||e.focus()},i);return()=>clearTimeout(e)}},[t,s,i])},r=(e,t)=>{let s=(0,i.l)(),a=s.get(e),[r,l]=(0,n.useState)(void 0!==a?"true"===a:t);return[r,(0,n.useCallback)(t=>{l(i=>{let n="function"==typeof t?t(i):t;return s.set(e,n.toString()),n})},[s,e])]}},52500:(e,t,s)=>{s.d(t,{L:()=>l});var i=s(54568),n=s(72902),a=s(39109),r=s(61295);function l(e){let{warning:t,placement:s,theme:l,onClick:o}=e,u=(0,n.A)("w-full border-0.5 relative z-[5] px-3.5","bottom"===s?"-mb-1 rounded-t-xl border-b-0 pb-2.5 pt-2":"-mb-1 -mt-1 rounded-b-xl border-t-0 pb-2 pt-2.5",{"bg-danger-900 border-transparent":"danger"===l,"text-text-200 border-accent-pro-100/20 bg-accent-pro-900":"pro"===l,"bg-bg-300 border-transparent":"info"===l,"bg-bg-200 border-transparent":"chin"===l,"hover:bg-bg-300 transition-colors":"chin"===l&&!!o});return(0,i.jsx)(a.N,{children:t&&(0,i.jsx)(r.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},children:o?(0,i.jsx)("button",{className:(0,n.A)(u),onClick:o,children:t}):(0,i.jsx)("div",{className:u,children:t})})})}},68034:(e,t,s)=>{s.d(t,{h:()=>u});var i=s(54568),n=s(44995),a=s(64328),r=s(84617);s(7620);var l=s(59666),o=s(59951);function u(){let{allowSelfUpgrade:e=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};switch(function(e){let t=(0,a.UC)(),s=(0,a.wi)(),i=(0,a.bu)(),r=(0,a.tP)(),l=(0,n.fZ)(),u=(0,o.o)();return l?(r||t)&&e?s||i||r?!t&&i?"subscribe-max":!t&&r?"subscribe-max-20x":"subscribe":"subscribe-pro-only":u?"enable-overages":"none":"contact-sales"}(e)){case"contact-sales":return(0,i.jsx)(d,{});case"subscribe":return(0,i.jsx)(c,{});case"subscribe-pro-only":return(0,i.jsx)(g,{});case"subscribe-max":return(0,i.jsx)(m,{});case"subscribe-max-20x":return(0,i.jsx)(h,{});case"enable-overages":return(0,i.jsx)(f,{});case"none":return null}}function d(){let{websiteBaseUrl:e}=(0,n._r)();return(0,i.jsx)(r.Y,{href:"".concat(e,"/contact-sales"),className:"text-sm",children:(0,i.jsx)(l.A,{defaultMessage:"Contact us to upgrade",id:"VifKcG4Va9"})})}function c(){return(0,i.jsx)(r.Y,{href:"/upgrade?hide_free=true",className:"text-sm",children:(0,i.jsx)(l.A,{defaultMessage:"Upgrade",id:"0h/lPMeYkq"})})}function g(){return(0,i.jsx)(r.Y,{href:"/upgrade/pro",className:"text-sm",children:(0,i.jsx)(l.A,{defaultMessage:"Upgrade",id:"0h/lPMeYkq"})})}function m(){return(0,i.jsx)(r.Y,{href:"/upgrade?hide_pro=true",className:"text-sm",children:(0,i.jsx)(l.A,{defaultMessage:"Subscribe to Max",id:"8ACH3Vf732"})})}function h(){return(0,i.jsx)(r.Y,{href:"/upgrade",className:"text-sm",children:(0,i.jsx)(l.A,{defaultMessage:"Upgrade",id:"0h/lPMeYkq"})})}function f(){return(0,i.jsx)(r.Y,{href:"/settings/usage",className:"text-sm",children:(0,i.jsx)(l.A,{defaultMessage:"Keep working",id:"YJG5oUjsVT"})})}},74172:(e,t,s)=>{s.d(t,{T:()=>o,j:()=>r});var i=s(4211),n=s(50848);let a=(0,i.v)()((0,n.Zr)(e=>({pendingMessages:{},addPendingMessage:(t,s)=>{e(e=>({pendingMessages:{...e.pendingMessages,[t]:[...e.pendingMessages[t]||[],s]}}))},clearPendingMessages:t=>{e(e=>({pendingMessages:{...e.pendingMessages,[t]:[]}}))},removePendingMessage:(t,s)=>{e(e=>({pendingMessages:{...e.pendingMessages,[t]:(e.pendingMessages[t]||[]).filter(e=>e.uuid!==s)}}))}}),{name:"session-pending-messages",storage:(0,n.KU)(()=>sessionStorage)})),r=()=>a(e=>e.addPendingMessage),l=[],o=e=>a(t=>{var s;return null!=(s=t.pendingMessages[e])?s:l})},91755:(e,t,s)=>{s.d(t,{R:()=>g,V:()=>c});var i=s(54568),n=s(43465),a=s(47592),r=s(39613),l=s(11583),o=s(5655),u=s(7620);let d=(0,u.createContext)({isExpanded:!1,setIsExpanded:()=>void 0,closeSidebarOnMobile:()=>void 0,isMobile:!1,setForceMobileLayout:()=>void 0,isShortcutsModalOpen:!1,setIsShortcutsModalOpen:()=>void 0});function c(){return(0,u.useContext)(d)}function g(e){let{children:t}=e,[s,c]=(0,n.j)(r.eT.SIDEBAR_PINNED,!1),[g,m]=(0,n.j)(r.eT.SIDEBAR_VISIBLE_ON_LOAD,!1),{width:h}=(0,l.l)(),[f,p]=u.useState(!1),v=f||(0===h?!g:h<1024),[x,b]=u.useState(g&&s),[_,w]=(0,u.useState)(!1);(0,o.M)("keydown",e=>{var t,s,i;let n=(0,a.cX)()?e.metaKey:e.ctrlKey;if((null==(t=e.key)?void 0:t.toLowerCase())==="."&&n&&(e.preventDefault(),b(e=>!e)),(null==(s=e.key)?void 0:s.toLowerCase())==="/"&&n&&(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),w(!0)),","===e.key&&n&&e.shiftKey&&(e.preventDefault(),window.location.href="/settings"),(null==(i=e.key)?void 0:i.toLowerCase())==="u"&&n){let t=document.getElementById("chat-input-file-upload-onpage")||document.getElementById("chat-input-file-upload-modal")||document.getElementById("chat-input-file-upload-bottom");t instanceof HTMLInputElement&&(e.preventDefault(),t.click())}});let j=(0,u.useMemo)(()=>({isExpanded:x,setIsExpanded:e=>{b(e),v||c(e)},closeSidebarOnMobile:()=>{v&&x&&b(!1)},isMobile:v,setForceMobileLayout:p,isShortcutsModalOpen:_,setIsShortcutsModalOpen:w}),[x,b,v,c,p,_,w]);return(0,u.useEffect)(()=>{v?(m(!1),b(!1)):(m(!0),b(s))},[v,m,b,s]),(0,i.jsx)(d.Provider,{value:j,children:t})}}}]);