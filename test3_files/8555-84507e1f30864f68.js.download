try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="4ef93a3e-06ae-4715-9770-5f47e03d902d",e._sentryDebugIdIdentifier="sentry-dbid-4ef93a3e-06ae-4715-9770-5f47e03d902d")}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5054,8555],{3743:(e,t,n)=>{n.d(t,{Ah:()=>i,Bs:()=>o,NJ:()=>a,VH:()=>r,Xs:()=>l,u5:()=>s});let r=e=>{let{account:t,isClaudeDot:n}=e;return n?!1===t.settings.has_finished_claudeai_onboarding:!t.full_name||!t.display_name},o=(e,t)=>t&&!e.is_verified,a=(e,t)=>!!function(e,t){for(let n of e.invites)if(n.organization.capabilities&&n.organization.capabilities.includes(t))return n}(e,t?"raven":"api"),i=(e,t)=>!t&&0===e.invites.length&&0===e.memberships.filter(e=>e.organization.capabilities.includes("api")).length,s=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n&&t&&!e.age_is_verified},l=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return r({account:e,isClaudeDot:t})||o(e,t)||a(e,t)||i(e,t)||s(e,t,n)}},3971:(e,t,n)=>{function r(e){return"text"===e.type&&e.text?{...e,text:e.text.replace("​","")}:e.content?{...e,content:e.content.map(r)}:e}n.d(t,{DV:()=>r,h0:()=>o});let o=e=>{let t="",n=0,r=function(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("doc"===e.type&&e.content)for(let t of e.content)r(t);else if("paragraph"===e.type){if(e.content)for(let t of e.content)r(t);t+="\n"}else if("text"===e.type){let n=e.text;if(e.marks)for(let t of e.marks)"bold"===t.type?n="**".concat(n,"**"):"italic"===t.type?n="*".concat(n,"*"):"underline"===t.type?n="__".concat(n,"__"):"strike"===t.type?n="~~".concat(n,"~~"):"code"===t.type&&(n="`".concat(n,"`"));t+=n}else if("codeBlock"===e.type){let n=e.attrs&&"string"==typeof e.attrs.language?e.attrs.language:"";if(t+="\n```".concat(n,"\n"),e.content)for(let t of e.content)r(t);t+="\n```\n\n"}else if("bulletList"===e.type&&e.content)for(let t of e.content)r(t);else if("orderedList"===e.type&&e.content)for(let t=0;t<e.content.length;t++)r(e.content[t],t+1,!0);else if("listItem"===e.type&&e.content){let i="   ".repeat(n);for(let s of(a?t+="".concat(i).concat(o,". "):t+="".concat(i,"* "),e.content))n+=1,r(s),n-=1}};return r(e),t.replace("​","").trim()}},10665:(e,t,n)=>{n.d(t,{r:()=>S,v:()=>g});var r=n(94295),o=n(19736),a=n(34003),i=n(74813),s=n(64328),l=n(68067),c=n(95617),u=n(7620),d=n(45538),p=n(88775);let f=e=>{let{value:t}=(0,l.fS)("claudeai_paprika_sticky"),{value:n}=(0,l.fS)("claude_ai_sticky_project_settings"),r=["enabled_web_search","enabled_bananagrams","enabled_sourdough","enabled_foccacia","enabled_mcp_tools"];return(t||e&&n)&&r.push("paprika_mode"),e&&n&&r.push("compass_mode"),r},g=e=>{let t=(0,p.jw)(),{pendingConversationSettings:n}=(0,p.Fj)(),{account:r}=(0,s.YL)(),o=(0,p.QN)(),{data:i}=(0,d.xQ)(o),{value:c}=(0,l.fS)("claude_ai_sticky_project_settings"),u=f(!!o);if((0,a.u9)(),t){var g;return null==(g=t.conversationSettings)?void 0:g[e]}return u.includes(e)?o&&c&&i?i[e]:null==r?void 0:r.settings[e]:null==n?void 0:n[e]},S=e=>{let t=(0,p.jw)(),{setPendingConversationSettings:n}=(0,p.Fj)(),a=(0,p.QN)(),{account:g}=(0,s.YL)(),S=f(!!a),{track:y}=(0,i.st)(),{mutate:v}=(0,r.Jy)(),{mutate:m}=(0,o.HF)(null==t?void 0:t.id),{data:h}=(0,d.xQ)(a),{mutate:_}=(0,d.mu)(a),{value:b}=(0,l.fS)("claude_ai_sticky_project_settings"),I=(0,u.useCallback)(r=>{if(!g)return;t&&m({settings:{...r}});let o={},i=!1;Object.keys(r).forEach(a=>{let s=r[a];S.includes(a)?(Object.assign(o,{[a]:s}),i=!0):c.W$.includes(a)&&!t&&n({[a]:s}),y({event_key:"claudeai.conversation.setting.toggled",conversation_uuid:(null==t?void 0:t.id)||null,setting:a,value:s,source:null==e?void 0:e.source})}),i&&(a&&b?_({...h,...o}):v({...g.settings,...o}))},[g,t,m,S,v,y,n,h,a,_,b,null==e?void 0:e.source]);return{toggleConversationSetting:(0,u.useCallback)((e,t)=>{I({[e]:t})},[I]),batchToggleConversationSettings:I}}},18088:(e,t,n)=>{n.d(t,{Vc:()=>i,Wz:()=>a});var r=n(80039),o=n(61903);function a(e,t){return(0,r.F)({key:"SSS-".concat(e),defaultValue:t,serialize:JSON.stringify,deserialize:e=>void 0===e?t:JSON.parse(e)})}function i(e,t){let n=!(arguments.length>2)||void 0===arguments[2]||arguments[2];return(0,o.Q)(e,t,n)}},27164:(e,t,n)=>{n.d(t,{LM:()=>y,jI:()=>p,rE:()=>u});var r=n(3971),o=n(18088),a=n(92693),i=n(7620),s=n(4211),l=n(42469),c=n(74196);let u={type:"doc",content:[{type:"paragraph",content:[]}]},d=(e,t)=>"".concat(e?"".concat(e,":"):"").concat(t);function p(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,p=arguments.length>3?arguments[3]:void 0,f=(0,c.X)(),g=(0,s.P)(n,(0,l.k)(e=>({tipTapEditorState:e.tipTapEditorState||u,setTipTapEditorState:e.setTipTapEditorState}))),S=d(p,e),[y,v,m]=(0,o.Vc)("".concat(S,":textInput"),t?{type:"doc",content:[{type:"paragraph",content:[{type:"text",text:t}]}]}:u,!f),h=f?g.tipTapEditorState:y,_=(0,i.useRef)(h),b=(0,i.useRef)(!1);(0,i.useEffect)(()=>{if(!f&&!b.current){let e=_.current?(0,r.h0)(_.current):"";n.getState().setTipTapEditorState(_.current),n.getState().setPrompt(e,{forceUpdateTiptap:!1}),b.current=!0}},[n,f]);let I=(0,i.useCallback)(e=>{if(f)n.getState().setTipTapEditorState(e);else{let t=(0,r.h0)(e);v(e),n.getState().setPrompt(t,{forceUpdateTiptap:!1})}},[v,n,f]),w=(0,i.useCallback)((e,t)=>{let n=(0,a.P)(e),r={type:"doc",content:[{type:"paragraph",content:n?[{type:"text",text:n}]:[]}]};return n.length>0&&t&&(r.__ant_unsafe=!0),I(r),n},[I]),E=!0===h.__ant_unsafe,k=(0,i.useCallback)(e=>{let t=(0,r.h0)(e);return t.length>0&&E&&(e.__ant_unsafe=!0),I(e),t},[I,E]),C=(0,i.useCallback)(()=>{f?n.getState().setTipTapEditorState(u):m()},[f,n,m]);return{setPrompt:(0,i.useCallback)(function(e){let{forceUpdateTiptap:t=!0,unsafe:r=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(f)n.getState().setPrompt(e,{forceUpdateTiptap:!1});else{let o=w(e,r);n.getState().setPrompt(o,{forceUpdateTiptap:t,unsafe:r})}},[w,n,f]),tipTapEditorState:h,setTipTapEditorJSON:k,setTipTapEditorText:w,setTipTapEditorState:I,isTipTapEditorStateUnsafe:E,clear:C}}let f=[],g=[],S=[];function y(e,t,n){let r=(0,c.X)(),a=(0,s.P)(t,(0,l.k)(e=>({attachments:e.attachments,setAttachments:e.setAttachments,files:e.files,setFiles:e.setFiles,syncSourceUuids:e.syncSourceUuids,setSyncSourceUuids:e.setSyncSourceUuids}))),u=d(n,e),[p,y,v]=(0,o.Vc)("".concat(u,":attachment"),f,!r),[m,h,_]=(0,o.Vc)("".concat(u,":files"),g,!r),[b,I,w]=(0,o.Vc)("".concat(u,":syncSourceUuids"),S,!r),E=r?a.attachments:p,k=r?a.setAttachments:y,C=r?a.files:m,U=r?a.setFiles:h,P=r?a.syncSourceUuids:b;return{attachments:E,setAttachments:k,files:C,setFiles:U,syncSourceUuids:P,setSyncSourceUuids:r?a.setSyncSourceUuids:I,clear:(0,i.useCallback)(()=>{r?(a.setAttachments([]),a.setFiles([]),a.setSyncSourceUuids([])):(v(),_(),w())},[r,a,v,_,w])}}},45054:(e,t,n)=>{n.d(t,{ErrorSegmentConnector:()=>T,ErrorStatsigConnector:()=>x,ErrorsProvider:()=>k,i:()=>j,Y:()=>C});var r=n(54568),o=n(3743),a=n(16178),i=n(68067),s=n(69287),l=n(22300),c=n.n(l),u=n(61483),d=n.n(u),p=n(83487),f=n.n(p),g=n(27541),S=n(7620),y=n(24407),v=n(74813),m=n(64328);function h(e,t){let n=[];for(let r of e){if(null==r)continue;let e=_(r,t+1);""!==e&&n.push(e)}return n.length>0?n.join(" "):""}function _(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t>5?"":e instanceof Error?e.message:"string"==typeof e||"number"==typeof e||"boolean"==typeof e?String(e):S.isValidElement(e)?function e(t,n){var r;let o=t.props;if("object"==typeof o&&null!==o&&"defaultMessage"in o&&"string"==typeof o.defaultMessage)return o.defaultMessage;if("function"==typeof t.type&&"object"==typeof t.props&&null!==t.props)try{let e=(0,t.type)(t.props);if(e)return _(e,n+1)}catch(e){}return"object"==typeof o&&null!==o&&"children"in o?(r=o.children,"string"==typeof r||"number"==typeof r||"boolean"==typeof r?String(r):null==r?"":Array.isArray(r)?h(r,n+1):S.isValidElement(r)?e(r,n+1):_(r,n+1)):""}(e,t):Array.isArray(e)?h(e,t):""}var b=n(18088);let I=(0,S.createContext)(void 0),w=e=>{var t;if(e instanceof a.LG&&(null==(t=e.extra)?void 0:t.details)&&"object"==typeof e.extra.details&&"error_visibility"in e.extra.details)return String(e.extra.details.error_visibility)};function E(e){var t;let{userFacingMessage:n,error:r,toastId:o,errorContext:i,track:l,isApiError:c}=e,u=_(n);l({event_key:"claudeai.user_facing_error.shown",error_message:u?"".concat(u.substring(0,200)).concat(u.length>200?"...":""):"[Error message could not be extracted for logging]",toast_id:o,error_type:r instanceof a.LG?r.type:r instanceof Error?r.name:typeof r,error_source:(null==i||null==(t=i.tags)?void 0:t.source)||"unknown",has_original_error:!!r,original_error_message:r instanceof Error?r.message.substring(0,200):void 0,error_stack_trace:(e=>{if(e instanceof Error&&e.stack)return e.stack.split("\n").slice(0,3).join("\n").substring(0,500)})(r),error_code:(e=>{if(e instanceof a.LG){var t;if(e.errorCode)return e.errorCode;if((null==(t=e.extra)?void 0:t.details)&&"object"==typeof e.extra.details&&"error_code"in e.extra.details&&"string"==typeof e.extra.details.error_code)return e.extra.details.error_code}if(e instanceof Error&&"code"in e)return String(e.code)})(r),error_status_code:(e=>{if(e instanceof Error){if("statusCode"in e&&"number"==typeof e.statusCode)return e.statusCode;if("status"in e&&"number"==typeof e.status)return e.status}})(r),error_visibility:w(r),websocket_close_code:(e=>{var t;if(e instanceof a.LG&&(null==(t=e.extra)?void 0:t.details)&&"object"==typeof e.extra.details&&"websocket_close_code"in e.extra.details&&"number"==typeof e.extra.details.websocket_close_code)return e.extra.details.websocket_close_code})(r),is_instanceof_api_error:r instanceof a.LG,is_caller_api_error:c,offline_status:"undefined"!=typeof navigator?!navigator.onLine:void 0});let d=(null==i?void 0:i.tags)||{},p=(null==i?void 0:i.extra)||{};r instanceof Error&&(0,s.Cp)(r,{tags:{source:"error-toast",...d},extra:{toastId:o,originalErrorMessage:r.message,originalError:r,userMessage:n,...p}})}function k(e){let{children:t}=e,n=(0,S.useRef)(1),[o,a]=(0,S.useState)([]),i=(0,S.useRef)(null),s=(0,S.useRef)(null),l=(0,S.useRef)([]),c=(0,S.useCallback)(e=>{s.current=e,l.current.forEach(t=>{e(t,void 0)}),l.current=[]},[]),u=(0,S.useCallback)(e=>{i.current=e},[]),d=(0,S.useCallback)(async e=>{if(null!==s.current)return s.current(e);l.current.push(e)},[]),p=(0,S.useCallback)(e=>{a(t=>t.filter(t=>t.id!==e))},[]),f=(0,S.useCallback)((e,t)=>{let r=n.current++,{timeout:o,error:i,errorContext:s,messageForLogging:l}=t||{};return E({userFacingMessage:l||e,error:i,toastId:r,errorContext:s,track:d,isApiError:!1}),a(t=>[...t,{id:r,message:e,toastType:"error"}]),o&&setTimeout(()=>p(r),o),r},[p,d]),g=(0,S.useCallback)((e,t)=>{let r=n.current++,{timeout:o,errorContext:s}=t||{},l=e instanceof Error?e.message:String(e);return E({userFacingMessage:l,error:e,toastId:r,errorContext:s,track:d,isApiError:!0}),i.current&&"user_facing"!==w(e)||a(e=>[...e,{id:r,message:l,toastType:"error"}]),o&&setTimeout(()=>p(r),o),r},[p,d]),y=(0,S.useCallback)((e,t)=>{let r=n.current++;return a(t=>[...t,{id:r,message:e,toastType:"success"}]),t&&setTimeout(()=>p(r),t),r},[p]),v=(0,S.useMemo)(()=>({toasts:o,addError:f,addApiError:g,addSuccess:y,clearToast:p,registerSegmentTracker:c,registerErrorVisibility:u}),[o,f,g,y,p,c,u]);return(0,r.jsx)(I.Provider,{value:v,children:t})}function C(){let e=(0,S.useContext)(I);if(!e)throw Error("Must be called within ErrorsProvider");return e}let U=y.z.object({id:y.z.string().optional().nullable(),title:y.z.string().optional().nullable(),message:y.z.string().optional().nullable(),displayFrequencyHours:y.z.number().optional().nullable()}),P={};function T(){let{registerSegmentTracker:e}=C(),{track:t}=(0,v.st)();return(0,S.useEffect)(()=>{e(t)},[e,t]),null}function x(){let{registerErrorVisibility:e}=C(),{value:t}=(0,i.fS)("claude_ai_error_visibility");return(0,S.useEffect)(()=>{e(t)},[e,t]),null}function j(){var e;let{id:t,title:n,message:r,displayFrequencyHours:a}=(0,i.iW)("claude_system_message",P,U),{account:s}=(0,m.YL)(),l=null!=(e=null==s?void 0:s.uuid)?e:"logged-out",u=(0,g.usePathname)(),[p,y]=(0,b.Vc)("dismissed-system-messages",{}),v=(0,S.useMemo)(()=>()=>y(e=>{let n=c()(e);return t&&f()(n,[l,t],Date.now()),n}),[y,l,t]);return(0,S.useMemo)(()=>{if(!s||(0,o.Xs)(s,!0)||"/download"===u||!t)return!1;let e=d()(p,[l,t]);return!e||"boolean"==typeof e||!!a&&Date.now()-e>=60*a*6e4},[s,t,l,p,a,u])?{currentSystemMessageId:t,currentSystemMessageTitle:n,currentSystemMessageContent:r,dismissCurrentSystemMessage:v}:{currentSystemMessageId:null,currentSystemMessageTitle:null,currentSystemMessageContent:null,dismissCurrentSystemMessage:()=>null}}},54667:(e,t,n)=>{n.d(t,{E:()=>l});var r=n(50848),o=n(49359),a=n(27164),i=n(43906),s=n.n(i);let l=e=>{let{conversationId:t="default",enableV2:n=!1}=e||{},i=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return{...((e,t)=>({prompt:"",tipTapEditorState:a.rE,setPrompt:function(n){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{forceUpdateTiptap:o=!0,unsafe:a=!1}=r;if(e({prompt:n}),!0===o){var i;let e=t().promptInputRef;null==e||null==(i=e.current)||i.setContent(n)}},setTipTapEditorState:t=>{e({tipTapEditorState:t})}}))(...t),...((e,t)=>({attachments:[],files:[],syncSourceUuids:[],transitionFiles:[],setAttachments:n=>{e({attachments:"function"==typeof n?n(t().attachments):n})},setFiles:n=>{e({files:"function"==typeof n?n(t().files):n})},setSyncSourceUuids:n=>{e({syncSourceUuids:"function"==typeof n?n(t().syncSourceUuids):n})},setTransitionFiles:t=>{e({transitionFiles:t})}}))(...t),...(e=>({model:"",projectUuid:void 0,pendingConversationSettings:{},conversation:void 0,setModel:t=>e({model:t}),setProjectUuid:t=>e({projectUuid:t}),setPendingConversationSettings:t=>e(e=>({pendingConversationSettings:{...e.pendingConversationSettings,...t}})),setConversation:t=>e({conversation:t})}))(...t),...(e=>({previewPrompt:void 0,isModelSelectorOpen:!1,hasBlockingWarning:!1,personalizedStyle:void 0,includeProfilePreferences:!0,currentCompassTask:void 0,setPreviewPrompt:t=>e({previewPrompt:t}),setIsModelSelectorOpen:t=>e({isModelSelectorOpen:t}),setHasBlockingWarning:t=>e({hasBlockingWarning:t}),setPersonalizedStyle:t=>e({personalizedStyle:t}),setIncludeProfilePreferences:t=>e({includeProfilePreferences:t}),setCurrentCompassTask:t=>e({currentCompassTask:t})}))(...t),...(e=>({isUploadingFile:!1,isUploadingDriveSync:!1,isUploadingGithubSync:!1,setIsUploadingFile:t=>e({isUploadingFile:t}),setIsUploadingDriveSync:t=>e({isUploadingDriveSync:t}),setIsUploadingGithubSync:t=>e({isUploadingGithubSync:t})}))(...t),...(e=>({isSending:!1,isImprovingPrompt:!1,setIsSending:t=>e({isSending:t}),setIsImprovingPrompt:t=>e({isImprovingPrompt:t})}))(...t),...(()=>({isAtMaxNumUploads:!1,hasAttachments:!1,isChatSyncing:!1,isProjectSyncing:!1,isNewConversation:!1,isProjectLocked:!1,willRedirectOnSubmit:!1}))(...t),...(()=>({sendMessage:void 0,sendTransparentMessage:void 0,stopSampling:void 0,focusInput:void 0,improvePrompt:void 0,validateMaxUploadLimit:void 0,onDrop:void 0,onPasteFiles:void 0,handleUpload:void 0,uploadInputProps:void 0}))(...t),...(e=>({promptInputRef:void 0,setPromptInputRef:t=>e({promptInputRef:t})}))(...t)}};if(n){let e=function(){var e,t,n;let r=null!=(n=null==(e=(t=crypto).randomUUID)?void 0:e.call(t))?n:"v2-".concat(Date.now(),"-").concat(Math.random().toString(36).slice(2)),o=s()((e,t)=>{let n=t.state,o=Date.now();if(void 0!==n.tipTapEditorState){let t={value:n.tipTapEditorState||{},tabId:r,timestamp:o};localStorage.setItem("LSS-".concat(e,":textInput"),JSON.stringify(t))}if(void 0!==n.attachments){let t={value:n.attachments||[],tabId:r,timestamp:o};localStorage.setItem("LSS-".concat(e,":attachment"),JSON.stringify(t))}if(void 0!==n.files){let t={value:n.files||[],tabId:r,timestamp:o};localStorage.setItem("LSS-".concat(e,":files"),JSON.stringify(t))}if(void 0!==n.syncSourceUuids){let t={value:n.syncSourceUuids||[],tabId:r,timestamp:o};localStorage.setItem("LSS-".concat(e,":syncSourceUuids"),JSON.stringify(t))}},500,{maxWait:2e3});return{getItem:e=>{try{let t={},n=localStorage.getItem("LSS-".concat(e,":textInput"));if(n){let e=JSON.parse(n);e.value&&"object"==typeof e.value&&"type"in e.value&&(t.tipTapEditorState=e.value)}let r=localStorage.getItem("LSS-".concat(e,":attachment"));if(r){let e=JSON.parse(r);Array.isArray(e.value)&&(t.attachments=e.value)}let o=localStorage.getItem("LSS-".concat(e,":files"));if(o){let e=JSON.parse(o);Array.isArray(e.value)&&(t.files=e.value)}let a=localStorage.getItem("LSS-".concat(e,":syncSourceUuids"));if(a){let e=JSON.parse(a);Array.isArray(e.value)&&(t.syncSourceUuids=e.value)}if(Object.keys(t).length>0)return{state:t,version:0};return null}catch(e){return null}},setItem:(e,t)=>{o(e,t)},removeItem:e=>{o.cancel(),localStorage.removeItem("LSS-".concat(e,":textInput")),localStorage.removeItem("LSS-".concat(e,":attachment")),localStorage.removeItem("LSS-".concat(e,":files")),localStorage.removeItem("LSS-".concat(e,":syncSourceUuids"))},subscribe:e=>t=>{let n=n=>{if(n.storageArea===localStorage&&n.key&&n.key.startsWith("LSS-".concat(e,":"))&&n.newValue)try{JSON.parse(n.newValue).tabId!==r&&t()}catch(e){t()}};return window.addEventListener("storage",n),()=>{window.removeEventListener("storage",n)}}}}(),n=(0,o.y)()((0,r.eh)((0,r.Zr)(i,{name:t,storage:e,partialize:e=>({tipTapEditorState:e.tipTapEditorState,attachments:e.attachments,files:e.files,syncSourceUuids:e.syncSourceUuids})})));return e.subscribe?{store:n,unsubscribe:e.subscribe(t)(()=>{})}:{store:n}}return{store:(0,o.y)()((0,r.eh)(i))}}},61903:(e,t,n)=>{n.d(t,{Q:()=>a,t:()=>o});var r=n(7620);function o(e){var t,n,o;let{key:a,defaultValue:i,deserialize:s=JSON.parse,getInitialValueInEffect:l=!1,sync:c=!0}=e,u="LSS-".concat(a),d=(0,r.useRef)(null!=(o=null==(t=(n=crypto).randomUUID)?void 0:t.call(n))?o:"".concat(Date.now(),"-").concat(Math.random().toString(36).slice(2))),p=(0,r.useRef)(!1),[f,g]=(0,r.useState)(()=>{if(l)return i;try{let e=window.localStorage.getItem(u);if(e){let t=JSON.parse(e);if(t&&"object"==typeof t&&"value"in t)return t.value;return s(e)}}catch(e){console.warn("Error reading localStorage key “".concat(u,"”:"),e)}return i});(0,r.useEffect)(()=>{if(l)try{let e=window.localStorage.getItem(u);if(e){let t=JSON.parse(e);t&&"object"==typeof t&&"value"in t?g(t.value):g(s(e))}}catch(e){console.warn("Error reading localStorage key “".concat(u,"”:"),e)}},[u,s,l]);let S=(0,r.useCallback)(e=>{p.current=!0,g(t=>{let n="function"==typeof e?e(t):e;try{let e={value:n,tabId:d.current,timestamp:Date.now()},t=JSON.stringify(e);if(window.localStorage.setItem(u,t),c){let e=new StorageEvent("storage",{key:u,newValue:t,oldValue:window.localStorage.getItem(u),storageArea:window.localStorage,url:window.location.href});window.dispatchEvent(e)}}catch(e){console.warn("Error writing localStorage key “".concat(u,"”:"),e)}return n}),Promise.resolve().then(()=>{p.current=!1})},[u,c]),y=(0,r.useCallback)(()=>{window.localStorage.removeItem(u),g(i)},[u,i]);return(0,r.useEffect)(()=>{if(!c)return;let e=e=>{if(e.key===u&&e.newValue&&!p.current)try{let t=JSON.parse(e.newValue);if(t&&"object"==typeof t&&"value"in t&&"tabId"in t){if(t.tabId===d.current)return;g(t.value)}else g(s(e.newValue))}catch(e){console.warn("Error handling storage event for “".concat(u,"”:"),e)}};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[u,c,s]),[f,S,y]}function a(e,t){let n=!(arguments.length>2)||void 0===arguments[2]||arguments[2];return o({key:e,defaultValue:t,deserialize:e=>void 0===e?t:JSON.parse(e),getInitialValueInEffect:!1,sync:n})}},74196:(e,t,n)=>{n.d(t,{X:()=>o});var r=n(68067);let o=()=>(0,r.fS)("v2_prompt_storage").value},88775:(e,t,n)=>{n.d(t,{Fj:()=>m,Jy:()=>p,Oh:()=>g,QN:()=>b,QT:()=>S,Tc:()=>h,aQ:()=>y,jM:()=>f,jw:()=>v,lE:()=>_});var r=n(3971),o=n(7620),a=n(4211),i=n(42469),s=n(54667),l=n(74196);let c=o.createContext(null),u=null;function d(e,t){let n=o.useContext(c)||(u||({store:u}=(0,s.E)()),u);return(0,a.P)(n,(0,i.k)(e))}function p(e){let t=function(){let e=o.useContext(c);if(!e)throw Error("ChatInputStore not found. Make sure ChatInputProvider wraps your component.");return e}();return(0,a.P)(t,(0,i.k)(e))}let f=c.Provider,g=(e,t)=>{if(!t)return{prompt:e.prompt,tipTapEditorState:e.tipTapEditorState,isPromptUnsafe:!1};let n=e.tipTapEditorState;return{prompt:(0,r.h0)(n),tipTapEditorState:n,isPromptUnsafe:"__ant_unsafe"in n&&!!n.__ant_unsafe}},S=()=>{let e=(0,l.X)();return p(t=>g(t,e))},y=()=>{let e=(0,l.X)();return p(t=>!!g(t,e).prompt.trim()||t.isSending)},v=()=>{let e=o.useContext(c),t=d(e=>e.conversation,"useChatInputConversationOnly");return e?t:void 0},m=()=>d(e=>({pendingConversationSettings:e.pendingConversationSettings,setPendingConversationSettings:e.setPendingConversationSettings}),"useChatInputPendingConversationSettings");function h(e,t){return d(e,t)}let _=()=>d(e=>({syncSourceUuids:e.syncSourceUuids,setSyncSourceUuids:e.setSyncSourceUuids,projectUuid:e.projectUuid,conversation:e.conversation}),"useChatInputSync"),b=()=>d(e=>e.projectUuid,"useChatInputProjectUuid")},91958:(e,t,n)=>{n.d(t,{Ac:()=>a,D8:()=>s,bI:()=>i});let r="recentDriveDocs";function o(e){return"object"==typeof e&&null!==e&&"string"==typeof e.uri&&("string"==typeof e.title||void 0===e.title)}function a(e){localStorage.setItem(r,JSON.stringify(e))}function i(){if("undefined"==typeof localStorage)return[];let e=localStorage.getItem(r);if(e){let t=JSON.parse(e);if(t&&Array.isArray(t)&&t.every(o))return t}return[]}function s(e){let t=i();a(t=t.filter(t=>t.uri!==e))}}}]);